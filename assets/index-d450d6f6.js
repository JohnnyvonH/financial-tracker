var df=Object.defineProperty;var hf=(e,t,n)=>t in e?df(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Il=(e,t,n)=>(hf(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function ff(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Su={exports:{}},Ni={},bu={exports:{}},M={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var is=Symbol.for("react.element"),pf=Symbol.for("react.portal"),mf=Symbol.for("react.fragment"),gf=Symbol.for("react.strict_mode"),yf=Symbol.for("react.profiler"),vf=Symbol.for("react.provider"),wf=Symbol.for("react.context"),xf=Symbol.for("react.forward_ref"),_f=Symbol.for("react.suspense"),kf=Symbol.for("react.memo"),Sf=Symbol.for("react.lazy"),Dl=Symbol.iterator;function bf(e){return e===null||typeof e!="object"?null:(e=Dl&&e[Dl]||e["@@iterator"],typeof e=="function"?e:null)}var ju={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Eu=Object.assign,Nu={};function tr(e,t,n){this.props=e,this.context=t,this.refs=Nu,this.updater=n||ju}tr.prototype.isReactComponent={};tr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};tr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Cu(){}Cu.prototype=tr.prototype;function Lo(e,t,n){this.props=e,this.context=t,this.refs=Nu,this.updater=n||ju}var Uo=Lo.prototype=new Cu;Uo.constructor=Lo;Eu(Uo,tr.prototype);Uo.isPureReactComponent=!0;var $l=Array.isArray,Tu=Object.prototype.hasOwnProperty,zo={current:null},Ou={key:!0,ref:!0,__self:!0,__source:!0};function Ru(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)Tu.call(t,r)&&!Ou.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:is,type:e,key:i,ref:a,props:s,_owner:zo.current}}function jf(e,t){return{$$typeof:is,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Mo(e){return typeof e=="object"&&e!==null&&e.$$typeof===is}function Ef(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ll=/\/+/g;function Qi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ef(""+e.key):t.toString(36)}function zs(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case is:case pf:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Qi(a,0):r,$l(s)?(n="",e!=null&&(n=e.replace(Ll,"$&/")+"/"),zs(s,t,n,"",function(u){return u})):s!=null&&(Mo(s)&&(s=jf(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Ll,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",$l(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Qi(i,l);a+=zs(i,t,n,c,s)}else if(c=bf(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Qi(i,l++),a+=zs(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function fs(e,t,n){if(e==null)return e;var r=[],s=0;return zs(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Nf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xe={current:null},Ms={transition:null},Cf={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:Ms,ReactCurrentOwner:zo};function Au(){throw Error("act(...) is not supported in production builds of React.")}M.Children={map:fs,forEach:function(e,t,n){fs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return fs(e,function(){t++}),t},toArray:function(e){return fs(e,function(t){return t})||[]},only:function(e){if(!Mo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};M.Component=tr;M.Fragment=mf;M.Profiler=yf;M.PureComponent=Lo;M.StrictMode=gf;M.Suspense=_f;M.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cf;M.act=Au;M.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Eu({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=zo.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Tu.call(t,c)&&!Ou.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:is,type:e.type,key:s,ref:i,props:r,_owner:a}};M.createContext=function(e){return e={$$typeof:wf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vf,_context:e},e.Consumer=e};M.createElement=Ru;M.createFactory=function(e){var t=Ru.bind(null,e);return t.type=e,t};M.createRef=function(){return{current:null}};M.forwardRef=function(e){return{$$typeof:xf,render:e}};M.isValidElement=Mo;M.lazy=function(e){return{$$typeof:Sf,_payload:{_status:-1,_result:e},_init:Nf}};M.memo=function(e,t){return{$$typeof:kf,type:e,compare:t===void 0?null:t}};M.startTransition=function(e){var t=Ms.transition;Ms.transition={};try{e()}finally{Ms.transition=t}};M.unstable_act=Au;M.useCallback=function(e,t){return xe.current.useCallback(e,t)};M.useContext=function(e){return xe.current.useContext(e)};M.useDebugValue=function(){};M.useDeferredValue=function(e){return xe.current.useDeferredValue(e)};M.useEffect=function(e,t){return xe.current.useEffect(e,t)};M.useId=function(){return xe.current.useId()};M.useImperativeHandle=function(e,t,n){return xe.current.useImperativeHandle(e,t,n)};M.useInsertionEffect=function(e,t){return xe.current.useInsertionEffect(e,t)};M.useLayoutEffect=function(e,t){return xe.current.useLayoutEffect(e,t)};M.useMemo=function(e,t){return xe.current.useMemo(e,t)};M.useReducer=function(e,t,n){return xe.current.useReducer(e,t,n)};M.useRef=function(e){return xe.current.useRef(e)};M.useState=function(e){return xe.current.useState(e)};M.useSyncExternalStore=function(e,t,n){return xe.current.useSyncExternalStore(e,t,n)};M.useTransition=function(){return xe.current.useTransition()};M.version="18.3.1";bu.exports=M;var P=bu.exports;const Pu=ff(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tf=P,Of=Symbol.for("react.element"),Rf=Symbol.for("react.fragment"),Af=Object.prototype.hasOwnProperty,Pf=Tf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,If={key:!0,ref:!0,__self:!0,__source:!0};function Iu(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Af.call(t,r)&&!If.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Of,type:e,key:i,ref:a,props:s,_owner:Pf.current}}Ni.Fragment=Rf;Ni.jsx=Iu;Ni.jsxs=Iu;Su.exports=Ni;var o=Su.exports,Oa={},Du={exports:{}},De={},$u={exports:{}},Lu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(k,b){var C=k.length;k.push(b);e:for(;0<C;){var L=C-1>>>1,$=k[L];if(0<s($,b))k[L]=b,k[C]=$,C=L;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var b=k[0],C=k.pop();if(C!==b){k[0]=C;e:for(var L=0,$=k.length,ke=$>>>1;L<ke;){var ee=2*(L+1)-1,et=k[ee],Vt=ee+1,hs=k[Vt];if(0>s(et,C))Vt<$&&0>s(hs,et)?(k[L]=hs,k[Vt]=C,L=Vt):(k[L]=et,k[ee]=C,L=ee);else if(Vt<$&&0>s(hs,C))k[L]=hs,k[Vt]=C,L=Vt;else break e}}return b}function s(k,b){var C=k.sortIndex-b.sortIndex;return C!==0?C:k.id-b.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,y=null,m=3,g=!1,v=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(k){for(var b=n(u);b!==null;){if(b.callback===null)r(u);else if(b.startTime<=k)r(u),b.sortIndex=b.expirationTime,t(c,b);else break;b=n(u)}}function _(k){if(w=!1,p(k),!v)if(n(c)!==null)v=!0,ar(E);else{var b=n(u);b!==null&&pn(_,b.startTime-k)}}function E(k,b){v=!1,w&&(w=!1,h(O),O=-1),g=!0;var C=m;try{for(p(b),y=n(c);y!==null&&(!(y.expirationTime>b)||k&&!Ce());){var L=y.callback;if(typeof L=="function"){y.callback=null,m=y.priorityLevel;var $=L(y.expirationTime<=b);b=e.unstable_now(),typeof $=="function"?y.callback=$:y===n(c)&&r(c),p(b)}else r(c);y=n(c)}if(y!==null)var ke=!0;else{var ee=n(u);ee!==null&&pn(_,ee.startTime-b),ke=!1}return ke}finally{y=null,m=C,g=!1}}var S=!1,j=null,O=-1,F=5,U=-1;function Ce(){return!(e.unstable_now()-U<F)}function Wt(){if(j!==null){var k=e.unstable_now();U=k;var b=!0;try{b=j(!0,k)}finally{b?Ht():(S=!1,j=null)}}else S=!1}var Ht;if(typeof f=="function")Ht=function(){f(Wt)};else if(typeof MessageChannel<"u"){var ds=new MessageChannel,Yi=ds.port2;ds.port1.onmessage=Wt,Ht=function(){Yi.postMessage(null)}}else Ht=function(){x(Wt,0)};function ar(k){j=k,S||(S=!0,Ht())}function pn(k,b){O=x(function(){k(e.unstable_now())},b)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,ar(E))},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(k){switch(m){case 1:case 2:case 3:var b=3;break;default:b=m}var C=m;m=b;try{return k()}finally{m=C}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(k,b){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var C=m;m=k;try{return b()}finally{m=C}},e.unstable_scheduleCallback=function(k,b,C){var L=e.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?L+C:L):C=L,k){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=C+$,k={id:d++,callback:b,priorityLevel:k,startTime:C,expirationTime:$,sortIndex:-1},C>L?(k.sortIndex=C,t(u,k),n(c)===null&&k===n(u)&&(w?(h(O),O=-1):w=!0,pn(_,C-L))):(k.sortIndex=$,t(c,k),v||g||(v=!0,ar(E))),k},e.unstable_shouldYield=Ce,e.unstable_wrapCallback=function(k){var b=m;return function(){var C=m;m=b;try{return k.apply(this,arguments)}finally{m=C}}}})(Lu);$u.exports=Lu;var Df=$u.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f=P,Ie=Df;function N(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Uu=new Set,Dr={};function hn(e,t){Vn(e,t),Vn(e+"Capture",t)}function Vn(e,t){for(Dr[e]=t,e=0;e<t.length;e++)Uu.add(t[e])}var ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ra=Object.prototype.hasOwnProperty,Lf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ul={},zl={};function Uf(e){return Ra.call(zl,e)?!0:Ra.call(Ul,e)?!1:Lf.test(e)?zl[e]=!0:(Ul[e]=!0,!1)}function zf(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Mf(e,t,n,r){if(t===null||typeof t>"u"||zf(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _e(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fe[e]=new _e(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fe[t]=new _e(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){fe[e]=new _e(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fe[e]=new _e(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fe[e]=new _e(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){fe[e]=new _e(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){fe[e]=new _e(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){fe[e]=new _e(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){fe[e]=new _e(e,5,!1,e.toLowerCase(),null,!1,!1)});var Fo=/[\-:]([a-z])/g;function Bo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Fo,Bo);fe[t]=new _e(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Fo,Bo);fe[t]=new _e(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Fo,Bo);fe[t]=new _e(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){fe[e]=new _e(e,1,!1,e.toLowerCase(),null,!1,!1)});fe.xlinkHref=new _e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){fe[e]=new _e(e,1,!1,e.toLowerCase(),null,!0,!0)});function Wo(e,t,n,r){var s=fe.hasOwnProperty(t)?fe[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Mf(t,n,s,r)&&(n=null),r||s===null?Uf(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var vt=$f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ps=Symbol.for("react.element"),jn=Symbol.for("react.portal"),En=Symbol.for("react.fragment"),Ho=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),zu=Symbol.for("react.provider"),Mu=Symbol.for("react.context"),Vo=Symbol.for("react.forward_ref"),Pa=Symbol.for("react.suspense"),Ia=Symbol.for("react.suspense_list"),qo=Symbol.for("react.memo"),kt=Symbol.for("react.lazy"),Fu=Symbol.for("react.offscreen"),Ml=Symbol.iterator;function or(e){return e===null||typeof e!="object"?null:(e=Ml&&e[Ml]||e["@@iterator"],typeof e=="function"?e:null)}var Q=Object.assign,Xi;function gr(e){if(Xi===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xi=t&&t[1]||""}return`
`+Xi+e}var Zi=!1;function ea(e,t){if(!e||Zi)return"";Zi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Zi=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?gr(e):""}function Ff(e){switch(e.tag){case 5:return gr(e.type);case 16:return gr("Lazy");case 13:return gr("Suspense");case 19:return gr("SuspenseList");case 0:case 2:case 15:return e=ea(e.type,!1),e;case 11:return e=ea(e.type.render,!1),e;case 1:return e=ea(e.type,!0),e;default:return""}}function Da(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case En:return"Fragment";case jn:return"Portal";case Aa:return"Profiler";case Ho:return"StrictMode";case Pa:return"Suspense";case Ia:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Mu:return(e.displayName||"Context")+".Consumer";case zu:return(e._context.displayName||"Context")+".Provider";case Vo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qo:return t=e.displayName||null,t!==null?t:Da(e.type)||"Memo";case kt:t=e._payload,e=e._init;try{return Da(e(t))}catch{}}return null}function Bf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Da(t);case 8:return t===Ho?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ut(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Bu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Wf(e){var t=Bu(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ms(e){e._valueTracker||(e._valueTracker=Wf(e))}function Wu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Bu(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Xs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $a(e,t){var n=t.checked;return Q({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Fl(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ut(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Hu(e,t){t=t.checked,t!=null&&Wo(e,"checked",t,!1)}function La(e,t){Hu(e,t);var n=Ut(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ua(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ua(e,t.type,Ut(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Bl(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ua(e,t,n){(t!=="number"||Xs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var yr=Array.isArray;function Un(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ut(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function za(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(N(91));return Q({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Wl(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(N(92));if(yr(n)){if(1<n.length)throw Error(N(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ut(n)}}function Vu(e,t){var n=Ut(t.value),r=Ut(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Hl(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function qu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ma(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?qu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var gs,Ku=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(gs=gs||document.createElement("div"),gs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=gs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $r(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var _r={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hf=["Webkit","ms","Moz","O"];Object.keys(_r).forEach(function(e){Hf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_r[t]=_r[e]})});function Gu(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||_r.hasOwnProperty(e)&&_r[e]?(""+t).trim():t+"px"}function Ju(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Gu(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Vf=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fa(e,t){if(t){if(Vf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(N(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(N(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(N(61))}if(t.style!=null&&typeof t.style!="object")throw Error(N(62))}}function Ba(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wa=null;function Ko(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ha=null,zn=null,Mn=null;function Vl(e){if(e=ls(e)){if(typeof Ha!="function")throw Error(N(280));var t=e.stateNode;t&&(t=Ai(t),Ha(e.stateNode,e.type,t))}}function Yu(e){zn?Mn?Mn.push(e):Mn=[e]:zn=e}function Qu(){if(zn){var e=zn,t=Mn;if(Mn=zn=null,Vl(e),t)for(e=0;e<t.length;e++)Vl(t[e])}}function Xu(e,t){return e(t)}function Zu(){}var ta=!1;function ed(e,t,n){if(ta)return e(t,n);ta=!0;try{return Xu(e,t,n)}finally{ta=!1,(zn!==null||Mn!==null)&&(Zu(),Qu())}}function Lr(e,t){var n=e.stateNode;if(n===null)return null;var r=Ai(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(N(231,t,typeof n));return n}var Va=!1;if(ft)try{var lr={};Object.defineProperty(lr,"passive",{get:function(){Va=!0}}),window.addEventListener("test",lr,lr),window.removeEventListener("test",lr,lr)}catch{Va=!1}function qf(e,t,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var kr=!1,Zs=null,ei=!1,qa=null,Kf={onError:function(e){kr=!0,Zs=e}};function Gf(e,t,n,r,s,i,a,l,c){kr=!1,Zs=null,qf.apply(Kf,arguments)}function Jf(e,t,n,r,s,i,a,l,c){if(Gf.apply(this,arguments),kr){if(kr){var u=Zs;kr=!1,Zs=null}else throw Error(N(198));ei||(ei=!0,qa=u)}}function fn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function td(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ql(e){if(fn(e)!==e)throw Error(N(188))}function Yf(e){var t=e.alternate;if(!t){if(t=fn(e),t===null)throw Error(N(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ql(s),e;if(i===r)return ql(s),t;i=i.sibling}throw Error(N(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(N(189))}}if(n.alternate!==r)throw Error(N(190))}if(n.tag!==3)throw Error(N(188));return n.stateNode.current===n?e:t}function nd(e){return e=Yf(e),e!==null?rd(e):null}function rd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rd(e);if(t!==null)return t;e=e.sibling}return null}var sd=Ie.unstable_scheduleCallback,Kl=Ie.unstable_cancelCallback,Qf=Ie.unstable_shouldYield,Xf=Ie.unstable_requestPaint,te=Ie.unstable_now,Zf=Ie.unstable_getCurrentPriorityLevel,Go=Ie.unstable_ImmediatePriority,id=Ie.unstable_UserBlockingPriority,ti=Ie.unstable_NormalPriority,ep=Ie.unstable_LowPriority,ad=Ie.unstable_IdlePriority,Ci=null,st=null;function tp(e){if(st&&typeof st.onCommitFiberRoot=="function")try{st.onCommitFiberRoot(Ci,e,void 0,(e.current.flags&128)===128)}catch{}}var Qe=Math.clz32?Math.clz32:sp,np=Math.log,rp=Math.LN2;function sp(e){return e>>>=0,e===0?32:31-(np(e)/rp|0)|0}var ys=64,vs=4194304;function vr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ni(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=vr(l):(i&=a,i!==0&&(r=vr(i)))}else a=n&~s,a!==0?r=vr(a):i!==0&&(r=vr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Qe(t),s=1<<n,r|=e[n],t&=~s;return r}function ip(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ap(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Qe(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=ip(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Ka(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function od(){var e=ys;return ys<<=1,!(ys&4194240)&&(ys=64),e}function na(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function as(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Qe(t),e[t]=n}function op(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Qe(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Jo(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Qe(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var W=0;function ld(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var cd,Yo,ud,dd,hd,Ga=!1,ws=[],Ot=null,Rt=null,At=null,Ur=new Map,zr=new Map,jt=[],lp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gl(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Ur.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zr.delete(t.pointerId)}}function cr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=ls(t),t!==null&&Yo(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function cp(e,t,n,r,s){switch(t){case"focusin":return Ot=cr(Ot,e,t,n,r,s),!0;case"dragenter":return Rt=cr(Rt,e,t,n,r,s),!0;case"mouseover":return At=cr(At,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ur.set(i,cr(Ur.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,zr.set(i,cr(zr.get(i)||null,e,t,n,r,s)),!0}return!1}function fd(e){var t=Zt(e.target);if(t!==null){var n=fn(t);if(n!==null){if(t=n.tag,t===13){if(t=td(n),t!==null){e.blockedOn=t,hd(e.priority,function(){ud(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ja(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Wa=r,n.target.dispatchEvent(r),Wa=null}else return t=ls(n),t!==null&&Yo(t),e.blockedOn=n,!1;t.shift()}return!0}function Jl(e,t,n){Fs(e)&&n.delete(t)}function up(){Ga=!1,Ot!==null&&Fs(Ot)&&(Ot=null),Rt!==null&&Fs(Rt)&&(Rt=null),At!==null&&Fs(At)&&(At=null),Ur.forEach(Jl),zr.forEach(Jl)}function ur(e,t){e.blockedOn===t&&(e.blockedOn=null,Ga||(Ga=!0,Ie.unstable_scheduleCallback(Ie.unstable_NormalPriority,up)))}function Mr(e){function t(s){return ur(s,e)}if(0<ws.length){ur(ws[0],e);for(var n=1;n<ws.length;n++){var r=ws[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ot!==null&&ur(Ot,e),Rt!==null&&ur(Rt,e),At!==null&&ur(At,e),Ur.forEach(t),zr.forEach(t),n=0;n<jt.length;n++)r=jt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<jt.length&&(n=jt[0],n.blockedOn===null);)fd(n),n.blockedOn===null&&jt.shift()}var Fn=vt.ReactCurrentBatchConfig,ri=!0;function dp(e,t,n,r){var s=W,i=Fn.transition;Fn.transition=null;try{W=1,Qo(e,t,n,r)}finally{W=s,Fn.transition=i}}function hp(e,t,n,r){var s=W,i=Fn.transition;Fn.transition=null;try{W=4,Qo(e,t,n,r)}finally{W=s,Fn.transition=i}}function Qo(e,t,n,r){if(ri){var s=Ja(e,t,n,r);if(s===null)ha(e,t,r,si,n),Gl(e,r);else if(cp(s,e,t,n,r))r.stopPropagation();else if(Gl(e,r),t&4&&-1<lp.indexOf(e)){for(;s!==null;){var i=ls(s);if(i!==null&&cd(i),i=Ja(e,t,n,r),i===null&&ha(e,t,r,si,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ha(e,t,r,null,n)}}var si=null;function Ja(e,t,n,r){if(si=null,e=Ko(r),e=Zt(e),e!==null)if(t=fn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=td(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return si=e,null}function pd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zf()){case Go:return 1;case id:return 4;case ti:case ep:return 16;case ad:return 536870912;default:return 16}default:return 16}}var Ct=null,Xo=null,Bs=null;function md(){if(Bs)return Bs;var e,t=Xo,n=t.length,r,s="value"in Ct?Ct.value:Ct.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return Bs=s.slice(e,1<r?1-r:void 0)}function Ws(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function xs(){return!0}function Yl(){return!1}function $e(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?xs:Yl,this.isPropagationStopped=Yl,this}return Q(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xs)},persist:function(){},isPersistent:xs}),t}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zo=$e(nr),os=Q({},nr,{view:0,detail:0}),fp=$e(os),ra,sa,dr,Ti=Q({},os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:el,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dr&&(dr&&e.type==="mousemove"?(ra=e.screenX-dr.screenX,sa=e.screenY-dr.screenY):sa=ra=0,dr=e),ra)},movementY:function(e){return"movementY"in e?e.movementY:sa}}),Ql=$e(Ti),pp=Q({},Ti,{dataTransfer:0}),mp=$e(pp),gp=Q({},os,{relatedTarget:0}),ia=$e(gp),yp=Q({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),vp=$e(yp),wp=Q({},nr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xp=$e(wp),_p=Q({},nr,{data:0}),Xl=$e(_p),kp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bp[e])?!!t[e]:!1}function el(){return jp}var Ep=Q({},os,{key:function(e){if(e.key){var t=kp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ws(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Sp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:el,charCode:function(e){return e.type==="keypress"?Ws(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ws(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Np=$e(Ep),Cp=Q({},Ti,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zl=$e(Cp),Tp=Q({},os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:el}),Op=$e(Tp),Rp=Q({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ap=$e(Rp),Pp=Q({},Ti,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ip=$e(Pp),Dp=[9,13,27,32],tl=ft&&"CompositionEvent"in window,Sr=null;ft&&"documentMode"in document&&(Sr=document.documentMode);var $p=ft&&"TextEvent"in window&&!Sr,gd=ft&&(!tl||Sr&&8<Sr&&11>=Sr),ec=String.fromCharCode(32),tc=!1;function yd(e,t){switch(e){case"keyup":return Dp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Nn=!1;function Lp(e,t){switch(e){case"compositionend":return vd(t);case"keypress":return t.which!==32?null:(tc=!0,ec);case"textInput":return e=t.data,e===ec&&tc?null:e;default:return null}}function Up(e,t){if(Nn)return e==="compositionend"||!tl&&yd(e,t)?(e=md(),Bs=Xo=Ct=null,Nn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gd&&t.locale!=="ko"?null:t.data;default:return null}}var zp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zp[e.type]:t==="textarea"}function wd(e,t,n,r){Yu(r),t=ii(t,"onChange"),0<t.length&&(n=new Zo("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var br=null,Fr=null;function Mp(e){Od(e,0)}function Oi(e){var t=On(e);if(Wu(t))return e}function Fp(e,t){if(e==="change")return t}var xd=!1;if(ft){var aa;if(ft){var oa="oninput"in document;if(!oa){var rc=document.createElement("div");rc.setAttribute("oninput","return;"),oa=typeof rc.oninput=="function"}aa=oa}else aa=!1;xd=aa&&(!document.documentMode||9<document.documentMode)}function sc(){br&&(br.detachEvent("onpropertychange",_d),Fr=br=null)}function _d(e){if(e.propertyName==="value"&&Oi(Fr)){var t=[];wd(t,Fr,e,Ko(e)),ed(Mp,t)}}function Bp(e,t,n){e==="focusin"?(sc(),br=t,Fr=n,br.attachEvent("onpropertychange",_d)):e==="focusout"&&sc()}function Wp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Oi(Fr)}function Hp(e,t){if(e==="click")return Oi(t)}function Vp(e,t){if(e==="input"||e==="change")return Oi(t)}function qp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ze=typeof Object.is=="function"?Object.is:qp;function Br(e,t){if(Ze(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ra.call(t,s)||!Ze(e[s],t[s]))return!1}return!0}function ic(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ac(e,t){var n=ic(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ic(n)}}function kd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Sd(){for(var e=window,t=Xs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Xs(e.document)}return t}function nl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Kp(e){var t=Sd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&kd(n.ownerDocument.documentElement,n)){if(r!==null&&nl(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=ac(n,i);var a=ac(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Gp=ft&&"documentMode"in document&&11>=document.documentMode,Cn=null,Ya=null,jr=null,Qa=!1;function oc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qa||Cn==null||Cn!==Xs(r)||(r=Cn,"selectionStart"in r&&nl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),jr&&Br(jr,r)||(jr=r,r=ii(Ya,"onSelect"),0<r.length&&(t=new Zo("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Cn)))}function _s(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Tn={animationend:_s("Animation","AnimationEnd"),animationiteration:_s("Animation","AnimationIteration"),animationstart:_s("Animation","AnimationStart"),transitionend:_s("Transition","TransitionEnd")},la={},bd={};ft&&(bd=document.createElement("div").style,"AnimationEvent"in window||(delete Tn.animationend.animation,delete Tn.animationiteration.animation,delete Tn.animationstart.animation),"TransitionEvent"in window||delete Tn.transitionend.transition);function Ri(e){if(la[e])return la[e];if(!Tn[e])return e;var t=Tn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in bd)return la[e]=t[n];return e}var jd=Ri("animationend"),Ed=Ri("animationiteration"),Nd=Ri("animationstart"),Cd=Ri("transitionend"),Td=new Map,lc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mt(e,t){Td.set(e,t),hn(t,[e])}for(var ca=0;ca<lc.length;ca++){var ua=lc[ca],Jp=ua.toLowerCase(),Yp=ua[0].toUpperCase()+ua.slice(1);Mt(Jp,"on"+Yp)}Mt(jd,"onAnimationEnd");Mt(Ed,"onAnimationIteration");Mt(Nd,"onAnimationStart");Mt("dblclick","onDoubleClick");Mt("focusin","onFocus");Mt("focusout","onBlur");Mt(Cd,"onTransitionEnd");Vn("onMouseEnter",["mouseout","mouseover"]);Vn("onMouseLeave",["mouseout","mouseover"]);Vn("onPointerEnter",["pointerout","pointerover"]);Vn("onPointerLeave",["pointerout","pointerover"]);hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hn("onBeforeInput",["compositionend","keypress","textInput","paste"]);hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qp=new Set("cancel close invalid load scroll toggle".split(" ").concat(wr));function cc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Jf(r,t,void 0,e),e.currentTarget=null}function Od(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;cc(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;cc(s,l,u),i=c}}}if(ei)throw e=qa,ei=!1,qa=null,e}function q(e,t){var n=t[no];n===void 0&&(n=t[no]=new Set);var r=e+"__bubble";n.has(r)||(Rd(t,e,2,!1),n.add(r))}function da(e,t,n){var r=0;t&&(r|=4),Rd(n,e,r,t)}var ks="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[ks]){e[ks]=!0,Uu.forEach(function(n){n!=="selectionchange"&&(Qp.has(n)||da(n,!1,e),da(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ks]||(t[ks]=!0,da("selectionchange",!1,t))}}function Rd(e,t,n,r){switch(pd(t)){case 1:var s=dp;break;case 4:s=hp;break;default:s=Qo}n=s.bind(null,t,n,e),s=void 0,!Va||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ha(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Zt(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}ed(function(){var u=i,d=Ko(n),y=[];e:{var m=Td.get(e);if(m!==void 0){var g=Zo,v=e;switch(e){case"keypress":if(Ws(n)===0)break e;case"keydown":case"keyup":g=Np;break;case"focusin":v="focus",g=ia;break;case"focusout":v="blur",g=ia;break;case"beforeblur":case"afterblur":g=ia;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Ql;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=mp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Op;break;case jd:case Ed:case Nd:g=vp;break;case Cd:g=Ap;break;case"scroll":g=fp;break;case"wheel":g=Ip;break;case"copy":case"cut":case"paste":g=xp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Zl}var w=(t&4)!==0,x=!w&&e==="scroll",h=w?m!==null?m+"Capture":null:m;w=[];for(var f=u,p;f!==null;){p=f;var _=p.stateNode;if(p.tag===5&&_!==null&&(p=_,h!==null&&(_=Lr(f,h),_!=null&&w.push(Hr(f,_,p)))),x)break;f=f.return}0<w.length&&(m=new g(m,v,null,n,d),y.push({event:m,listeners:w}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&n!==Wa&&(v=n.relatedTarget||n.fromElement)&&(Zt(v)||v[pt]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?Zt(v):null,v!==null&&(x=fn(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(w=Ql,_="onMouseLeave",h="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(w=Zl,_="onPointerLeave",h="onPointerEnter",f="pointer"),x=g==null?m:On(g),p=v==null?m:On(v),m=new w(_,f+"leave",g,n,d),m.target=x,m.relatedTarget=p,_=null,Zt(d)===u&&(w=new w(h,f+"enter",v,n,d),w.target=p,w.relatedTarget=x,_=w),x=_,g&&v)t:{for(w=g,h=v,f=0,p=w;p;p=mn(p))f++;for(p=0,_=h;_;_=mn(_))p++;for(;0<f-p;)w=mn(w),f--;for(;0<p-f;)h=mn(h),p--;for(;f--;){if(w===h||h!==null&&w===h.alternate)break t;w=mn(w),h=mn(h)}w=null}else w=null;g!==null&&uc(y,m,g,w,!1),v!==null&&x!==null&&uc(y,x,v,w,!0)}}e:{if(m=u?On(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var E=Fp;else if(nc(m))if(xd)E=Vp;else{E=Wp;var S=Bp}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(E=Hp);if(E&&(E=E(e,u))){wd(y,E,n,d);break e}S&&S(e,m,u),e==="focusout"&&(S=m._wrapperState)&&S.controlled&&m.type==="number"&&Ua(m,"number",m.value)}switch(S=u?On(u):window,e){case"focusin":(nc(S)||S.contentEditable==="true")&&(Cn=S,Ya=u,jr=null);break;case"focusout":jr=Ya=Cn=null;break;case"mousedown":Qa=!0;break;case"contextmenu":case"mouseup":case"dragend":Qa=!1,oc(y,n,d);break;case"selectionchange":if(Gp)break;case"keydown":case"keyup":oc(y,n,d)}var j;if(tl)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Nn?yd(e,n)&&(O="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(gd&&n.locale!=="ko"&&(Nn||O!=="onCompositionStart"?O==="onCompositionEnd"&&Nn&&(j=md()):(Ct=d,Xo="value"in Ct?Ct.value:Ct.textContent,Nn=!0)),S=ii(u,O),0<S.length&&(O=new Xl(O,e,null,n,d),y.push({event:O,listeners:S}),j?O.data=j:(j=vd(n),j!==null&&(O.data=j)))),(j=$p?Lp(e,n):Up(e,n))&&(u=ii(u,"onBeforeInput"),0<u.length&&(d=new Xl("onBeforeInput","beforeinput",null,n,d),y.push({event:d,listeners:u}),d.data=j))}Od(y,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ii(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Lr(e,n),i!=null&&r.unshift(Hr(e,i,s)),i=Lr(e,t),i!=null&&r.push(Hr(e,i,s))),e=e.return}return r}function mn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function uc(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Lr(n,i),c!=null&&a.unshift(Hr(n,c,l))):s||(c=Lr(n,i),c!=null&&a.push(Hr(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Xp=/\r\n?/g,Zp=/\u0000|\uFFFD/g;function dc(e){return(typeof e=="string"?e:""+e).replace(Xp,`
`).replace(Zp,"")}function Ss(e,t,n){if(t=dc(t),dc(e)!==t&&n)throw Error(N(425))}function ai(){}var Xa=null,Za=null;function eo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var to=typeof setTimeout=="function"?setTimeout:void 0,em=typeof clearTimeout=="function"?clearTimeout:void 0,hc=typeof Promise=="function"?Promise:void 0,tm=typeof queueMicrotask=="function"?queueMicrotask:typeof hc<"u"?function(e){return hc.resolve(null).then(e).catch(nm)}:to;function nm(e){setTimeout(function(){throw e})}function fa(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Mr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Mr(t)}function Pt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function fc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var rr=Math.random().toString(36).slice(2),rt="__reactFiber$"+rr,Vr="__reactProps$"+rr,pt="__reactContainer$"+rr,no="__reactEvents$"+rr,rm="__reactListeners$"+rr,sm="__reactHandles$"+rr;function Zt(e){var t=e[rt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pt]||n[rt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=fc(e);e!==null;){if(n=e[rt])return n;e=fc(e)}return t}e=n,n=e.parentNode}return null}function ls(e){return e=e[rt]||e[pt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function On(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(N(33))}function Ai(e){return e[Vr]||null}var ro=[],Rn=-1;function Ft(e){return{current:e}}function K(e){0>Rn||(e.current=ro[Rn],ro[Rn]=null,Rn--)}function V(e,t){Rn++,ro[Rn]=e.current,e.current=t}var zt={},ye=Ft(zt),je=Ft(!1),an=zt;function qn(e,t){var n=e.type.contextTypes;if(!n)return zt;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ee(e){return e=e.childContextTypes,e!=null}function oi(){K(je),K(ye)}function pc(e,t,n){if(ye.current!==zt)throw Error(N(168));V(ye,t),V(je,n)}function Ad(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(N(108,Bf(e)||"Unknown",s));return Q({},n,r)}function li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||zt,an=ye.current,V(ye,e),V(je,je.current),!0}function mc(e,t,n){var r=e.stateNode;if(!r)throw Error(N(169));n?(e=Ad(e,t,an),r.__reactInternalMemoizedMergedChildContext=e,K(je),K(ye),V(ye,e)):K(je),V(je,n)}var ct=null,Pi=!1,pa=!1;function Pd(e){ct===null?ct=[e]:ct.push(e)}function im(e){Pi=!0,Pd(e)}function Bt(){if(!pa&&ct!==null){pa=!0;var e=0,t=W;try{var n=ct;for(W=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ct=null,Pi=!1}catch(s){throw ct!==null&&(ct=ct.slice(e+1)),sd(Go,Bt),s}finally{W=t,pa=!1}}return null}var An=[],Pn=0,ci=null,ui=0,Ue=[],ze=0,on=null,ut=1,dt="";function Gt(e,t){An[Pn++]=ui,An[Pn++]=ci,ci=e,ui=t}function Id(e,t,n){Ue[ze++]=ut,Ue[ze++]=dt,Ue[ze++]=on,on=e;var r=ut;e=dt;var s=32-Qe(r)-1;r&=~(1<<s),n+=1;var i=32-Qe(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,ut=1<<32-Qe(t)+s|n<<s|r,dt=i+e}else ut=1<<i|n<<s|r,dt=e}function rl(e){e.return!==null&&(Gt(e,1),Id(e,1,0))}function sl(e){for(;e===ci;)ci=An[--Pn],An[Pn]=null,ui=An[--Pn],An[Pn]=null;for(;e===on;)on=Ue[--ze],Ue[ze]=null,dt=Ue[--ze],Ue[ze]=null,ut=Ue[--ze],Ue[ze]=null}var Pe=null,Ae=null,G=!1,Ye=null;function Dd(e,t){var n=Me(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function gc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Pe=e,Ae=Pt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Pe=e,Ae=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=on!==null?{id:ut,overflow:dt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Me(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Pe=e,Ae=null,!0):!1;default:return!1}}function so(e){return(e.mode&1)!==0&&(e.flags&128)===0}function io(e){if(G){var t=Ae;if(t){var n=t;if(!gc(e,t)){if(so(e))throw Error(N(418));t=Pt(n.nextSibling);var r=Pe;t&&gc(e,t)?Dd(r,n):(e.flags=e.flags&-4097|2,G=!1,Pe=e)}}else{if(so(e))throw Error(N(418));e.flags=e.flags&-4097|2,G=!1,Pe=e}}}function yc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pe=e}function bs(e){if(e!==Pe)return!1;if(!G)return yc(e),G=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!eo(e.type,e.memoizedProps)),t&&(t=Ae)){if(so(e))throw $d(),Error(N(418));for(;t;)Dd(e,t),t=Pt(t.nextSibling)}if(yc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(N(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ae=Pt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ae=null}}else Ae=Pe?Pt(e.stateNode.nextSibling):null;return!0}function $d(){for(var e=Ae;e;)e=Pt(e.nextSibling)}function Kn(){Ae=Pe=null,G=!1}function il(e){Ye===null?Ye=[e]:Ye.push(e)}var am=vt.ReactCurrentBatchConfig;function hr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(N(309));var r=n.stateNode}if(!r)throw Error(N(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(N(284));if(!n._owner)throw Error(N(290,e))}return e}function js(e,t){throw e=Object.prototype.toString.call(t),Error(N(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vc(e){var t=e._init;return t(e._payload)}function Ld(e){function t(h,f){if(e){var p=h.deletions;p===null?(h.deletions=[f],h.flags|=16):p.push(f)}}function n(h,f){if(!e)return null;for(;f!==null;)t(h,f),f=f.sibling;return null}function r(h,f){for(h=new Map;f!==null;)f.key!==null?h.set(f.key,f):h.set(f.index,f),f=f.sibling;return h}function s(h,f){return h=Lt(h,f),h.index=0,h.sibling=null,h}function i(h,f,p){return h.index=p,e?(p=h.alternate,p!==null?(p=p.index,p<f?(h.flags|=2,f):p):(h.flags|=2,f)):(h.flags|=1048576,f)}function a(h){return e&&h.alternate===null&&(h.flags|=2),h}function l(h,f,p,_){return f===null||f.tag!==6?(f=_a(p,h.mode,_),f.return=h,f):(f=s(f,p),f.return=h,f)}function c(h,f,p,_){var E=p.type;return E===En?d(h,f,p.props.children,_,p.key):f!==null&&(f.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===kt&&vc(E)===f.type)?(_=s(f,p.props),_.ref=hr(h,f,p),_.return=h,_):(_=Ys(p.type,p.key,p.props,null,h.mode,_),_.ref=hr(h,f,p),_.return=h,_)}function u(h,f,p,_){return f===null||f.tag!==4||f.stateNode.containerInfo!==p.containerInfo||f.stateNode.implementation!==p.implementation?(f=ka(p,h.mode,_),f.return=h,f):(f=s(f,p.children||[]),f.return=h,f)}function d(h,f,p,_,E){return f===null||f.tag!==7?(f=sn(p,h.mode,_,E),f.return=h,f):(f=s(f,p),f.return=h,f)}function y(h,f,p){if(typeof f=="string"&&f!==""||typeof f=="number")return f=_a(""+f,h.mode,p),f.return=h,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ps:return p=Ys(f.type,f.key,f.props,null,h.mode,p),p.ref=hr(h,null,f),p.return=h,p;case jn:return f=ka(f,h.mode,p),f.return=h,f;case kt:var _=f._init;return y(h,_(f._payload),p)}if(yr(f)||or(f))return f=sn(f,h.mode,p,null),f.return=h,f;js(h,f)}return null}function m(h,f,p,_){var E=f!==null?f.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return E!==null?null:l(h,f,""+p,_);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ps:return p.key===E?c(h,f,p,_):null;case jn:return p.key===E?u(h,f,p,_):null;case kt:return E=p._init,m(h,f,E(p._payload),_)}if(yr(p)||or(p))return E!==null?null:d(h,f,p,_,null);js(h,p)}return null}function g(h,f,p,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return h=h.get(p)||null,l(f,h,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ps:return h=h.get(_.key===null?p:_.key)||null,c(f,h,_,E);case jn:return h=h.get(_.key===null?p:_.key)||null,u(f,h,_,E);case kt:var S=_._init;return g(h,f,p,S(_._payload),E)}if(yr(_)||or(_))return h=h.get(p)||null,d(f,h,_,E,null);js(f,_)}return null}function v(h,f,p,_){for(var E=null,S=null,j=f,O=f=0,F=null;j!==null&&O<p.length;O++){j.index>O?(F=j,j=null):F=j.sibling;var U=m(h,j,p[O],_);if(U===null){j===null&&(j=F);break}e&&j&&U.alternate===null&&t(h,j),f=i(U,f,O),S===null?E=U:S.sibling=U,S=U,j=F}if(O===p.length)return n(h,j),G&&Gt(h,O),E;if(j===null){for(;O<p.length;O++)j=y(h,p[O],_),j!==null&&(f=i(j,f,O),S===null?E=j:S.sibling=j,S=j);return G&&Gt(h,O),E}for(j=r(h,j);O<p.length;O++)F=g(j,h,O,p[O],_),F!==null&&(e&&F.alternate!==null&&j.delete(F.key===null?O:F.key),f=i(F,f,O),S===null?E=F:S.sibling=F,S=F);return e&&j.forEach(function(Ce){return t(h,Ce)}),G&&Gt(h,O),E}function w(h,f,p,_){var E=or(p);if(typeof E!="function")throw Error(N(150));if(p=E.call(p),p==null)throw Error(N(151));for(var S=E=null,j=f,O=f=0,F=null,U=p.next();j!==null&&!U.done;O++,U=p.next()){j.index>O?(F=j,j=null):F=j.sibling;var Ce=m(h,j,U.value,_);if(Ce===null){j===null&&(j=F);break}e&&j&&Ce.alternate===null&&t(h,j),f=i(Ce,f,O),S===null?E=Ce:S.sibling=Ce,S=Ce,j=F}if(U.done)return n(h,j),G&&Gt(h,O),E;if(j===null){for(;!U.done;O++,U=p.next())U=y(h,U.value,_),U!==null&&(f=i(U,f,O),S===null?E=U:S.sibling=U,S=U);return G&&Gt(h,O),E}for(j=r(h,j);!U.done;O++,U=p.next())U=g(j,h,O,U.value,_),U!==null&&(e&&U.alternate!==null&&j.delete(U.key===null?O:U.key),f=i(U,f,O),S===null?E=U:S.sibling=U,S=U);return e&&j.forEach(function(Wt){return t(h,Wt)}),G&&Gt(h,O),E}function x(h,f,p,_){if(typeof p=="object"&&p!==null&&p.type===En&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case ps:e:{for(var E=p.key,S=f;S!==null;){if(S.key===E){if(E=p.type,E===En){if(S.tag===7){n(h,S.sibling),f=s(S,p.props.children),f.return=h,h=f;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===kt&&vc(E)===S.type){n(h,S.sibling),f=s(S,p.props),f.ref=hr(h,S,p),f.return=h,h=f;break e}n(h,S);break}else t(h,S);S=S.sibling}p.type===En?(f=sn(p.props.children,h.mode,_,p.key),f.return=h,h=f):(_=Ys(p.type,p.key,p.props,null,h.mode,_),_.ref=hr(h,f,p),_.return=h,h=_)}return a(h);case jn:e:{for(S=p.key;f!==null;){if(f.key===S)if(f.tag===4&&f.stateNode.containerInfo===p.containerInfo&&f.stateNode.implementation===p.implementation){n(h,f.sibling),f=s(f,p.children||[]),f.return=h,h=f;break e}else{n(h,f);break}else t(h,f);f=f.sibling}f=ka(p,h.mode,_),f.return=h,h=f}return a(h);case kt:return S=p._init,x(h,f,S(p._payload),_)}if(yr(p))return v(h,f,p,_);if(or(p))return w(h,f,p,_);js(h,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,f!==null&&f.tag===6?(n(h,f.sibling),f=s(f,p),f.return=h,h=f):(n(h,f),f=_a(p,h.mode,_),f.return=h,h=f),a(h)):n(h,f)}return x}var Gn=Ld(!0),Ud=Ld(!1),di=Ft(null),hi=null,In=null,al=null;function ol(){al=In=hi=null}function ll(e){var t=di.current;K(di),e._currentValue=t}function ao(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Bn(e,t){hi=e,al=In=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(be=!0),e.firstContext=null)}function Be(e){var t=e._currentValue;if(al!==e)if(e={context:e,memoizedValue:t,next:null},In===null){if(hi===null)throw Error(N(308));In=e,hi.dependencies={lanes:0,firstContext:e}}else In=In.next=e;return t}var en=null;function cl(e){en===null?en=[e]:en.push(e)}function zd(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,cl(t)):(n.next=s.next,s.next=n),t.interleaved=n,mt(e,r)}function mt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var St=!1;function ul(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Md(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ht(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function It(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,B&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,mt(e,n)}return s=r.interleaved,s===null?(t.next=t,cl(r)):(t.next=s.next,s.next=t),r.interleaved=t,mt(e,n)}function Hs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Jo(e,n)}}function wc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fi(e,t,n,r){var s=e.updateQueue;St=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var y=s.baseState;a=0,d=u=c=null,l=i;do{var m=l.lane,g=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,w=l;switch(m=t,g=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){y=v.call(g,y,m);break e}y=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,m=typeof v=="function"?v.call(g,y,m):v,m==null)break e;y=Q({},y,m);break e;case 2:St=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=y):d=d.next=g,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(1);if(d===null&&(c=y),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);cn|=a,e.lanes=a,e.memoizedState=y}}function xc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(N(191,s));s.call(r)}}}var cs={},it=Ft(cs),qr=Ft(cs),Kr=Ft(cs);function tn(e){if(e===cs)throw Error(N(174));return e}function dl(e,t){switch(V(Kr,t),V(qr,e),V(it,cs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ma(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ma(t,e)}K(it),V(it,t)}function Jn(){K(it),K(qr),K(Kr)}function Fd(e){tn(Kr.current);var t=tn(it.current),n=Ma(t,e.type);t!==n&&(V(qr,e),V(it,n))}function hl(e){qr.current===e&&(K(it),K(qr))}var J=Ft(0);function pi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ma=[];function fl(){for(var e=0;e<ma.length;e++)ma[e]._workInProgressVersionPrimary=null;ma.length=0}var Vs=vt.ReactCurrentDispatcher,ga=vt.ReactCurrentBatchConfig,ln=0,Y=null,ie=null,oe=null,mi=!1,Er=!1,Gr=0,om=0;function pe(){throw Error(N(321))}function pl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ze(e[n],t[n]))return!1;return!0}function ml(e,t,n,r,s,i){if(ln=i,Y=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Vs.current=e===null||e.memoizedState===null?dm:hm,e=n(r,s),Er){i=0;do{if(Er=!1,Gr=0,25<=i)throw Error(N(301));i+=1,oe=ie=null,t.updateQueue=null,Vs.current=fm,e=n(r,s)}while(Er)}if(Vs.current=gi,t=ie!==null&&ie.next!==null,ln=0,oe=ie=Y=null,mi=!1,t)throw Error(N(300));return e}function gl(){var e=Gr!==0;return Gr=0,e}function nt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oe===null?Y.memoizedState=oe=e:oe=oe.next=e,oe}function We(){if(ie===null){var e=Y.alternate;e=e!==null?e.memoizedState:null}else e=ie.next;var t=oe===null?Y.memoizedState:oe.next;if(t!==null)oe=t,ie=e;else{if(e===null)throw Error(N(310));ie=e,e={memoizedState:ie.memoizedState,baseState:ie.baseState,baseQueue:ie.baseQueue,queue:ie.queue,next:null},oe===null?Y.memoizedState=oe=e:oe=oe.next=e}return oe}function Jr(e,t){return typeof t=="function"?t(e):t}function ya(e){var t=We(),n=t.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=e;var r=ie,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((ln&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var y={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=y,a=r):c=c.next=y,Y.lanes|=d,cn|=d}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,Ze(r,t.memoizedState)||(be=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Y.lanes|=i,cn|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function va(e){var t=We(),n=t.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Ze(i,t.memoizedState)||(be=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Bd(){}function Wd(e,t){var n=Y,r=We(),s=t(),i=!Ze(r.memoizedState,s);if(i&&(r.memoizedState=s,be=!0),r=r.queue,yl(qd.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||oe!==null&&oe.memoizedState.tag&1){if(n.flags|=2048,Yr(9,Vd.bind(null,n,r,s,t),void 0,null),le===null)throw Error(N(349));ln&30||Hd(n,t,s)}return s}function Hd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Y.updateQueue,t===null?(t={lastEffect:null,stores:null},Y.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Vd(e,t,n,r){t.value=n,t.getSnapshot=r,Kd(t)&&Gd(e)}function qd(e,t,n){return n(function(){Kd(t)&&Gd(e)})}function Kd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ze(e,n)}catch{return!0}}function Gd(e){var t=mt(e,1);t!==null&&Xe(t,e,1,-1)}function _c(e){var t=nt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:e},t.queue=e,e=e.dispatch=um.bind(null,Y,e),[t.memoizedState,e]}function Yr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Y.updateQueue,t===null?(t={lastEffect:null,stores:null},Y.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Jd(){return We().memoizedState}function qs(e,t,n,r){var s=nt();Y.flags|=e,s.memoizedState=Yr(1|t,n,void 0,r===void 0?null:r)}function Ii(e,t,n,r){var s=We();r=r===void 0?null:r;var i=void 0;if(ie!==null){var a=ie.memoizedState;if(i=a.destroy,r!==null&&pl(r,a.deps)){s.memoizedState=Yr(t,n,i,r);return}}Y.flags|=e,s.memoizedState=Yr(1|t,n,i,r)}function kc(e,t){return qs(8390656,8,e,t)}function yl(e,t){return Ii(2048,8,e,t)}function Yd(e,t){return Ii(4,2,e,t)}function Qd(e,t){return Ii(4,4,e,t)}function Xd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Zd(e,t,n){return n=n!=null?n.concat([e]):null,Ii(4,4,Xd.bind(null,t,e),n)}function vl(){}function eh(e,t){var n=We();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&pl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function th(e,t){var n=We();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&pl(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function nh(e,t,n){return ln&21?(Ze(n,t)||(n=od(),Y.lanes|=n,cn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,be=!0),e.memoizedState=n)}function lm(e,t){var n=W;W=n!==0&&4>n?n:4,e(!0);var r=ga.transition;ga.transition={};try{e(!1),t()}finally{W=n,ga.transition=r}}function rh(){return We().memoizedState}function cm(e,t,n){var r=$t(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sh(e))ih(t,n);else if(n=zd(e,t,n,r),n!==null){var s=we();Xe(n,e,r,s),ah(n,t,r)}}function um(e,t,n){var r=$t(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sh(e))ih(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Ze(l,a)){var c=t.interleaved;c===null?(s.next=s,cl(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=zd(e,t,s,r),n!==null&&(s=we(),Xe(n,e,r,s),ah(n,t,r))}}function sh(e){var t=e.alternate;return e===Y||t!==null&&t===Y}function ih(e,t){Er=mi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ah(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Jo(e,n)}}var gi={readContext:Be,useCallback:pe,useContext:pe,useEffect:pe,useImperativeHandle:pe,useInsertionEffect:pe,useLayoutEffect:pe,useMemo:pe,useReducer:pe,useRef:pe,useState:pe,useDebugValue:pe,useDeferredValue:pe,useTransition:pe,useMutableSource:pe,useSyncExternalStore:pe,useId:pe,unstable_isNewReconciler:!1},dm={readContext:Be,useCallback:function(e,t){return nt().memoizedState=[e,t===void 0?null:t],e},useContext:Be,useEffect:kc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,qs(4194308,4,Xd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qs(4194308,4,e,t)},useInsertionEffect:function(e,t){return qs(4,2,e,t)},useMemo:function(e,t){var n=nt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=nt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=cm.bind(null,Y,e),[r.memoizedState,e]},useRef:function(e){var t=nt();return e={current:e},t.memoizedState=e},useState:_c,useDebugValue:vl,useDeferredValue:function(e){return nt().memoizedState=e},useTransition:function(){var e=_c(!1),t=e[0];return e=lm.bind(null,e[1]),nt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Y,s=nt();if(G){if(n===void 0)throw Error(N(407));n=n()}else{if(n=t(),le===null)throw Error(N(349));ln&30||Hd(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,kc(qd.bind(null,r,i,e),[e]),r.flags|=2048,Yr(9,Vd.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=nt(),t=le.identifierPrefix;if(G){var n=dt,r=ut;n=(r&~(1<<32-Qe(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Gr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=om++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hm={readContext:Be,useCallback:eh,useContext:Be,useEffect:yl,useImperativeHandle:Zd,useInsertionEffect:Yd,useLayoutEffect:Qd,useMemo:th,useReducer:ya,useRef:Jd,useState:function(){return ya(Jr)},useDebugValue:vl,useDeferredValue:function(e){var t=We();return nh(t,ie.memoizedState,e)},useTransition:function(){var e=ya(Jr)[0],t=We().memoizedState;return[e,t]},useMutableSource:Bd,useSyncExternalStore:Wd,useId:rh,unstable_isNewReconciler:!1},fm={readContext:Be,useCallback:eh,useContext:Be,useEffect:yl,useImperativeHandle:Zd,useInsertionEffect:Yd,useLayoutEffect:Qd,useMemo:th,useReducer:va,useRef:Jd,useState:function(){return va(Jr)},useDebugValue:vl,useDeferredValue:function(e){var t=We();return ie===null?t.memoizedState=e:nh(t,ie.memoizedState,e)},useTransition:function(){var e=va(Jr)[0],t=We().memoizedState;return[e,t]},useMutableSource:Bd,useSyncExternalStore:Wd,useId:rh,unstable_isNewReconciler:!1};function qe(e,t){if(e&&e.defaultProps){t=Q({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function oo(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Q({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Di={isMounted:function(e){return(e=e._reactInternals)?fn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=we(),s=$t(e),i=ht(r,s);i.payload=t,n!=null&&(i.callback=n),t=It(e,i,s),t!==null&&(Xe(t,e,s,r),Hs(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=we(),s=$t(e),i=ht(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=It(e,i,s),t!==null&&(Xe(t,e,s,r),Hs(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=we(),r=$t(e),s=ht(n,r);s.tag=2,t!=null&&(s.callback=t),t=It(e,s,r),t!==null&&(Xe(t,e,r,n),Hs(t,e,r))}};function Sc(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Br(n,r)||!Br(s,i):!0}function oh(e,t,n){var r=!1,s=zt,i=t.contextType;return typeof i=="object"&&i!==null?i=Be(i):(s=Ee(t)?an:ye.current,r=t.contextTypes,i=(r=r!=null)?qn(e,s):zt),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Di,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function bc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Di.enqueueReplaceState(t,t.state,null)}function lo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ul(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Be(i):(i=Ee(t)?an:ye.current,s.context=qn(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(oo(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Di.enqueueReplaceState(s,s.state,null),fi(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Yn(e,t){try{var n="",r=t;do n+=Ff(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function wa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function co(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pm=typeof WeakMap=="function"?WeakMap:Map;function lh(e,t,n){n=ht(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){vi||(vi=!0,xo=r),co(e,t)},n}function ch(e,t,n){n=ht(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){co(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){co(e,t),typeof r!="function"&&(Dt===null?Dt=new Set([this]):Dt.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function jc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new pm;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Cm.bind(null,e,t,n),t.then(e,e))}function Ec(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Nc(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ht(-1,1),t.tag=2,It(n,t,1))),n.lanes|=1),e)}var mm=vt.ReactCurrentOwner,be=!1;function ve(e,t,n,r){t.child=e===null?Ud(t,null,n,r):Gn(t,e.child,n,r)}function Cc(e,t,n,r,s){n=n.render;var i=t.ref;return Bn(t,s),r=ml(e,t,n,r,i,s),n=gl(),e!==null&&!be?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,gt(e,t,s)):(G&&n&&rl(t),t.flags|=1,ve(e,t,r,s),t.child)}function Tc(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!El(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,uh(e,t,i,r,s)):(e=Ys(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Br,n(a,r)&&e.ref===t.ref)return gt(e,t,s)}return t.flags|=1,e=Lt(i,r),e.ref=t.ref,e.return=t,t.child=e}function uh(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Br(i,r)&&e.ref===t.ref)if(be=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(be=!0);else return t.lanes=e.lanes,gt(e,t,s)}return uo(e,t,n,r,s)}function dh(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},V($n,Oe),Oe|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,V($n,Oe),Oe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,V($n,Oe),Oe|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,V($n,Oe),Oe|=r;return ve(e,t,s,n),t.child}function hh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function uo(e,t,n,r,s){var i=Ee(n)?an:ye.current;return i=qn(t,i),Bn(t,s),n=ml(e,t,n,r,i,s),r=gl(),e!==null&&!be?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,gt(e,t,s)):(G&&r&&rl(t),t.flags|=1,ve(e,t,n,s),t.child)}function Oc(e,t,n,r,s){if(Ee(n)){var i=!0;li(t)}else i=!1;if(Bn(t,s),t.stateNode===null)Ks(e,t),oh(t,n,r),lo(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Be(u):(u=Ee(n)?an:ye.current,u=qn(t,u));var d=n.getDerivedStateFromProps,y=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&bc(t,a,r,u),St=!1;var m=t.memoizedState;a.state=m,fi(t,r,a,s),c=t.memoizedState,l!==r||m!==c||je.current||St?(typeof d=="function"&&(oo(t,n,d,r),c=t.memoizedState),(l=St||Sc(t,n,l,r,m,c,u))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Md(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:qe(t.type,l),a.props=u,y=t.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Be(c):(c=Ee(n)?an:ye.current,c=qn(t,c));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==y||m!==c)&&bc(t,a,r,c),St=!1,m=t.memoizedState,a.state=m,fi(t,r,a,s);var v=t.memoizedState;l!==y||m!==v||je.current||St?(typeof g=="function"&&(oo(t,n,g,r),v=t.memoizedState),(u=St||Sc(t,n,u,r,m,v,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),a.props=r,a.state=v,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return ho(e,t,n,r,i,s)}function ho(e,t,n,r,s,i){hh(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&mc(t,n,!1),gt(e,t,i);r=t.stateNode,mm.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Gn(t,e.child,null,i),t.child=Gn(t,null,l,i)):ve(e,t,l,i),t.memoizedState=r.state,s&&mc(t,n,!0),t.child}function fh(e){var t=e.stateNode;t.pendingContext?pc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&pc(e,t.context,!1),dl(e,t.containerInfo)}function Rc(e,t,n,r,s){return Kn(),il(s),t.flags|=256,ve(e,t,n,r),t.child}var fo={dehydrated:null,treeContext:null,retryLane:0};function po(e){return{baseLanes:e,cachePool:null,transitions:null}}function ph(e,t,n){var r=t.pendingProps,s=J.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),V(J,s&1),e===null)return io(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Ui(a,r,0,null),e=sn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=po(n),t.memoizedState=fo,e):wl(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return gm(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Lt(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Lt(l,i):(i=sn(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?po(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=fo,r}return i=e.child,e=i.sibling,r=Lt(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function wl(e,t){return t=Ui({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Es(e,t,n,r){return r!==null&&il(r),Gn(t,e.child,null,n),e=wl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function gm(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=wa(Error(N(422))),Es(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Ui({mode:"visible",children:r.children},s,0,null),i=sn(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Gn(t,e.child,null,a),t.child.memoizedState=po(a),t.memoizedState=fo,i);if(!(t.mode&1))return Es(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(N(419)),r=wa(i,r,void 0),Es(e,t,a,r)}if(l=(a&e.childLanes)!==0,be||l){if(r=le,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,mt(e,s),Xe(r,e,s,-1))}return jl(),r=wa(Error(N(421))),Es(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Tm.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ae=Pt(s.nextSibling),Pe=t,G=!0,Ye=null,e!==null&&(Ue[ze++]=ut,Ue[ze++]=dt,Ue[ze++]=on,ut=e.id,dt=e.overflow,on=t),t=wl(t,r.children),t.flags|=4096,t)}function Ac(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ao(e.return,t,n)}function xa(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function mh(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(ve(e,t,r.children,n),r=J.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ac(e,n,t);else if(e.tag===19)Ac(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(V(J,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&pi(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),xa(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&pi(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}xa(t,!0,n,null,i);break;case"together":xa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ks(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),cn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(N(153));if(t.child!==null){for(e=t.child,n=Lt(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Lt(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ym(e,t,n){switch(t.tag){case 3:fh(t),Kn();break;case 5:Fd(t);break;case 1:Ee(t.type)&&li(t);break;case 4:dl(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;V(di,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(V(J,J.current&1),t.flags|=128,null):n&t.child.childLanes?ph(e,t,n):(V(J,J.current&1),e=gt(e,t,n),e!==null?e.sibling:null);V(J,J.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return mh(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),V(J,J.current),r)break;return null;case 22:case 23:return t.lanes=0,dh(e,t,n)}return gt(e,t,n)}var gh,mo,yh,vh;gh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mo=function(){};yh=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,tn(it.current);var i=null;switch(n){case"input":s=$a(e,s),r=$a(e,r),i=[];break;case"select":s=Q({},s,{value:void 0}),r=Q({},r,{value:void 0}),i=[];break;case"textarea":s=za(e,s),r=za(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ai)}Fa(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Dr.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Dr.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&q("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};vh=function(e,t,n,r){n!==r&&(t.flags|=4)};function fr(e,t){if(!G)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function me(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vm(e,t,n){var r=t.pendingProps;switch(sl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return me(t),null;case 1:return Ee(t.type)&&oi(),me(t),null;case 3:return r=t.stateNode,Jn(),K(je),K(ye),fl(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(bs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ye!==null&&(So(Ye),Ye=null))),mo(e,t),me(t),null;case 5:hl(t);var s=tn(Kr.current);if(n=t.type,e!==null&&t.stateNode!=null)yh(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(N(166));return me(t),null}if(e=tn(it.current),bs(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[rt]=t,r[Vr]=i,e=(t.mode&1)!==0,n){case"dialog":q("cancel",r),q("close",r);break;case"iframe":case"object":case"embed":q("load",r);break;case"video":case"audio":for(s=0;s<wr.length;s++)q(wr[s],r);break;case"source":q("error",r);break;case"img":case"image":case"link":q("error",r),q("load",r);break;case"details":q("toggle",r);break;case"input":Fl(r,i),q("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},q("invalid",r);break;case"textarea":Wl(r,i),q("invalid",r)}Fa(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ss(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ss(r.textContent,l,e),s=["children",""+l]):Dr.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&q("scroll",r)}switch(n){case"input":ms(r),Bl(r,i,!0);break;case"textarea":ms(r),Hl(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ai)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=qu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[rt]=t,e[Vr]=r,gh(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ba(n,r),n){case"dialog":q("cancel",e),q("close",e),s=r;break;case"iframe":case"object":case"embed":q("load",e),s=r;break;case"video":case"audio":for(s=0;s<wr.length;s++)q(wr[s],e);s=r;break;case"source":q("error",e),s=r;break;case"img":case"image":case"link":q("error",e),q("load",e),s=r;break;case"details":q("toggle",e),s=r;break;case"input":Fl(e,r),s=$a(e,r),q("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Q({},r,{value:void 0}),q("invalid",e);break;case"textarea":Wl(e,r),s=za(e,r),q("invalid",e);break;default:s=r}Fa(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Ju(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ku(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&$r(e,c):typeof c=="number"&&$r(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Dr.hasOwnProperty(i)?c!=null&&i==="onScroll"&&q("scroll",e):c!=null&&Wo(e,i,c,a))}switch(n){case"input":ms(e),Bl(e,r,!1);break;case"textarea":ms(e),Hl(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ut(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Un(e,!!r.multiple,i,!1):r.defaultValue!=null&&Un(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ai)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return me(t),null;case 6:if(e&&t.stateNode!=null)vh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(N(166));if(n=tn(Kr.current),tn(it.current),bs(t)){if(r=t.stateNode,n=t.memoizedProps,r[rt]=t,(i=r.nodeValue!==n)&&(e=Pe,e!==null))switch(e.tag){case 3:Ss(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ss(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rt]=t,t.stateNode=r}return me(t),null;case 13:if(K(J),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(G&&Ae!==null&&t.mode&1&&!(t.flags&128))$d(),Kn(),t.flags|=98560,i=!1;else if(i=bs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(N(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(N(317));i[rt]=t}else Kn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;me(t),i=!1}else Ye!==null&&(So(Ye),Ye=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||J.current&1?ae===0&&(ae=3):jl())),t.updateQueue!==null&&(t.flags|=4),me(t),null);case 4:return Jn(),mo(e,t),e===null&&Wr(t.stateNode.containerInfo),me(t),null;case 10:return ll(t.type._context),me(t),null;case 17:return Ee(t.type)&&oi(),me(t),null;case 19:if(K(J),i=t.memoizedState,i===null)return me(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)fr(i,!1);else{if(ae!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=pi(e),a!==null){for(t.flags|=128,fr(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return V(J,J.current&1|2),t.child}e=e.sibling}i.tail!==null&&te()>Qn&&(t.flags|=128,r=!0,fr(i,!1),t.lanes=4194304)}else{if(!r)if(e=pi(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),fr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!G)return me(t),null}else 2*te()-i.renderingStartTime>Qn&&n!==1073741824&&(t.flags|=128,r=!0,fr(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,n=J.current,V(J,r?n&1|2:n&1),t):(me(t),null);case 22:case 23:return bl(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Oe&1073741824&&(me(t),t.subtreeFlags&6&&(t.flags|=8192)):me(t),null;case 24:return null;case 25:return null}throw Error(N(156,t.tag))}function wm(e,t){switch(sl(t),t.tag){case 1:return Ee(t.type)&&oi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jn(),K(je),K(ye),fl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return hl(t),null;case 13:if(K(J),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(N(340));Kn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return K(J),null;case 4:return Jn(),null;case 10:return ll(t.type._context),null;case 22:case 23:return bl(),null;case 24:return null;default:return null}}var Ns=!1,ge=!1,xm=typeof WeakSet=="function"?WeakSet:Set,T=null;function Dn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Z(e,t,r)}else n.current=null}function go(e,t,n){try{n()}catch(r){Z(e,t,r)}}var Pc=!1;function _m(e,t){if(Xa=ri,e=Sd(),nl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,y=e,m=null;t:for(;;){for(var g;y!==n||s!==0&&y.nodeType!==3||(l=a+s),y!==i||r!==0&&y.nodeType!==3||(c=a+r),y.nodeType===3&&(a+=y.nodeValue.length),(g=y.firstChild)!==null;)m=y,y=g;for(;;){if(y===e)break t;if(m===n&&++u===s&&(l=a),m===i&&++d===r&&(c=a),(g=y.nextSibling)!==null)break;y=m,m=y.parentNode}y=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Za={focusedElem:e,selectionRange:n},ri=!1,T=t;T!==null;)if(t=T,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,T=e;else for(;T!==null;){t=T;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,x=v.memoizedState,h=t.stateNode,f=h.getSnapshotBeforeUpdate(t.elementType===t.type?w:qe(t.type,w),x);h.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(_){Z(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,T=e;break}T=t.return}return v=Pc,Pc=!1,v}function Nr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&go(t,n,i)}s=s.next}while(s!==r)}}function $i(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function yo(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function wh(e){var t=e.alternate;t!==null&&(e.alternate=null,wh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rt],delete t[Vr],delete t[no],delete t[rm],delete t[sm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xh(e){return e.tag===5||e.tag===3||e.tag===4}function Ic(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vo(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ai));else if(r!==4&&(e=e.child,e!==null))for(vo(e,t,n),e=e.sibling;e!==null;)vo(e,t,n),e=e.sibling}function wo(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(wo(e,t,n),e=e.sibling;e!==null;)wo(e,t,n),e=e.sibling}var de=null,Ge=!1;function xt(e,t,n){for(n=n.child;n!==null;)_h(e,t,n),n=n.sibling}function _h(e,t,n){if(st&&typeof st.onCommitFiberUnmount=="function")try{st.onCommitFiberUnmount(Ci,n)}catch{}switch(n.tag){case 5:ge||Dn(n,t);case 6:var r=de,s=Ge;de=null,xt(e,t,n),de=r,Ge=s,de!==null&&(Ge?(e=de,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):de.removeChild(n.stateNode));break;case 18:de!==null&&(Ge?(e=de,n=n.stateNode,e.nodeType===8?fa(e.parentNode,n):e.nodeType===1&&fa(e,n),Mr(e)):fa(de,n.stateNode));break;case 4:r=de,s=Ge,de=n.stateNode.containerInfo,Ge=!0,xt(e,t,n),de=r,Ge=s;break;case 0:case 11:case 14:case 15:if(!ge&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&go(n,t,a),s=s.next}while(s!==r)}xt(e,t,n);break;case 1:if(!ge&&(Dn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Z(n,t,l)}xt(e,t,n);break;case 21:xt(e,t,n);break;case 22:n.mode&1?(ge=(r=ge)||n.memoizedState!==null,xt(e,t,n),ge=r):xt(e,t,n);break;default:xt(e,t,n)}}function Dc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new xm),t.forEach(function(r){var s=Om.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function He(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:de=l.stateNode,Ge=!1;break e;case 3:de=l.stateNode.containerInfo,Ge=!0;break e;case 4:de=l.stateNode.containerInfo,Ge=!0;break e}l=l.return}if(de===null)throw Error(N(160));_h(i,a,s),de=null,Ge=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Z(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kh(t,e),t=t.sibling}function kh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(He(t,e),tt(e),r&4){try{Nr(3,e,e.return),$i(3,e)}catch(w){Z(e,e.return,w)}try{Nr(5,e,e.return)}catch(w){Z(e,e.return,w)}}break;case 1:He(t,e),tt(e),r&512&&n!==null&&Dn(n,n.return);break;case 5:if(He(t,e),tt(e),r&512&&n!==null&&Dn(n,n.return),e.flags&32){var s=e.stateNode;try{$r(s,"")}catch(w){Z(e,e.return,w)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Hu(s,i),Ba(l,a);var u=Ba(l,i);for(a=0;a<c.length;a+=2){var d=c[a],y=c[a+1];d==="style"?Ju(s,y):d==="dangerouslySetInnerHTML"?Ku(s,y):d==="children"?$r(s,y):Wo(s,d,y,u)}switch(l){case"input":La(s,i);break;case"textarea":Vu(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Un(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?Un(s,!!i.multiple,i.defaultValue,!0):Un(s,!!i.multiple,i.multiple?[]:"",!1))}s[Vr]=i}catch(w){Z(e,e.return,w)}}break;case 6:if(He(t,e),tt(e),r&4){if(e.stateNode===null)throw Error(N(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){Z(e,e.return,w)}}break;case 3:if(He(t,e),tt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Mr(t.containerInfo)}catch(w){Z(e,e.return,w)}break;case 4:He(t,e),tt(e);break;case 13:He(t,e),tt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(kl=te())),r&4&&Dc(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(ge=(u=ge)||d,He(t,e),ge=u):He(t,e),tt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(T=e,d=e.child;d!==null;){for(y=T=d;T!==null;){switch(m=T,g=m.child,m.tag){case 0:case 11:case 14:case 15:Nr(4,m,m.return);break;case 1:Dn(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(w){Z(r,n,w)}}break;case 5:Dn(m,m.return);break;case 22:if(m.memoizedState!==null){Lc(y);continue}}g!==null?(g.return=m,T=g):Lc(y)}d=d.sibling}e:for(d=null,y=e;;){if(y.tag===5){if(d===null){d=y;try{s=y.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=y.stateNode,c=y.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Gu("display",a))}catch(w){Z(e,e.return,w)}}}else if(y.tag===6){if(d===null)try{y.stateNode.nodeValue=u?"":y.memoizedProps}catch(w){Z(e,e.return,w)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;d===y&&(d=null),y=y.return}d===y&&(d=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:He(t,e),tt(e),r&4&&Dc(e);break;case 21:break;default:He(t,e),tt(e)}}function tt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(xh(n)){var r=n;break e}n=n.return}throw Error(N(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&($r(s,""),r.flags&=-33);var i=Ic(e);wo(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Ic(e);vo(e,l,a);break;default:throw Error(N(161))}}catch(c){Z(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function km(e,t,n){T=e,Sh(e)}function Sh(e,t,n){for(var r=(e.mode&1)!==0;T!==null;){var s=T,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Ns;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ge;l=Ns;var u=ge;if(Ns=a,(ge=c)&&!u)for(T=s;T!==null;)a=T,c=a.child,a.tag===22&&a.memoizedState!==null?Uc(s):c!==null?(c.return=a,T=c):Uc(s);for(;i!==null;)T=i,Sh(i),i=i.sibling;T=s,Ns=l,ge=u}$c(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,T=i):$c(e)}}function $c(e){for(;T!==null;){var t=T;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ge||$i(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ge)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:qe(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&xc(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}xc(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var y=d.dehydrated;y!==null&&Mr(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}ge||t.flags&512&&yo(t)}catch(m){Z(t,t.return,m)}}if(t===e){T=null;break}if(n=t.sibling,n!==null){n.return=t.return,T=n;break}T=t.return}}function Lc(e){for(;T!==null;){var t=T;if(t===e){T=null;break}var n=t.sibling;if(n!==null){n.return=t.return,T=n;break}T=t.return}}function Uc(e){for(;T!==null;){var t=T;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$i(4,t)}catch(c){Z(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Z(t,s,c)}}var i=t.return;try{yo(t)}catch(c){Z(t,i,c)}break;case 5:var a=t.return;try{yo(t)}catch(c){Z(t,a,c)}}}catch(c){Z(t,t.return,c)}if(t===e){T=null;break}var l=t.sibling;if(l!==null){l.return=t.return,T=l;break}T=t.return}}var Sm=Math.ceil,yi=vt.ReactCurrentDispatcher,xl=vt.ReactCurrentOwner,Fe=vt.ReactCurrentBatchConfig,B=0,le=null,re=null,he=0,Oe=0,$n=Ft(0),ae=0,Qr=null,cn=0,Li=0,_l=0,Cr=null,Se=null,kl=0,Qn=1/0,ot=null,vi=!1,xo=null,Dt=null,Cs=!1,Tt=null,wi=0,Tr=0,_o=null,Gs=-1,Js=0;function we(){return B&6?te():Gs!==-1?Gs:Gs=te()}function $t(e){return e.mode&1?B&2&&he!==0?he&-he:am.transition!==null?(Js===0&&(Js=od()),Js):(e=W,e!==0||(e=window.event,e=e===void 0?16:pd(e.type)),e):1}function Xe(e,t,n,r){if(50<Tr)throw Tr=0,_o=null,Error(N(185));as(e,n,r),(!(B&2)||e!==le)&&(e===le&&(!(B&2)&&(Li|=n),ae===4&&Et(e,he)),Ne(e,r),n===1&&B===0&&!(t.mode&1)&&(Qn=te()+500,Pi&&Bt()))}function Ne(e,t){var n=e.callbackNode;ap(e,t);var r=ni(e,e===le?he:0);if(r===0)n!==null&&Kl(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Kl(n),t===1)e.tag===0?im(zc.bind(null,e)):Pd(zc.bind(null,e)),tm(function(){!(B&6)&&Bt()}),n=null;else{switch(ld(r)){case 1:n=Go;break;case 4:n=id;break;case 16:n=ti;break;case 536870912:n=ad;break;default:n=ti}n=Rh(n,bh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function bh(e,t){if(Gs=-1,Js=0,B&6)throw Error(N(327));var n=e.callbackNode;if(Wn()&&e.callbackNode!==n)return null;var r=ni(e,e===le?he:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=xi(e,r);else{t=r;var s=B;B|=2;var i=Eh();(le!==e||he!==t)&&(ot=null,Qn=te()+500,rn(e,t));do try{Em();break}catch(l){jh(e,l)}while(1);ol(),yi.current=i,B=s,re!==null?t=0:(le=null,he=0,t=ae)}if(t!==0){if(t===2&&(s=Ka(e),s!==0&&(r=s,t=ko(e,s))),t===1)throw n=Qr,rn(e,0),Et(e,r),Ne(e,te()),n;if(t===6)Et(e,r);else{if(s=e.current.alternate,!(r&30)&&!bm(s)&&(t=xi(e,r),t===2&&(i=Ka(e),i!==0&&(r=i,t=ko(e,i))),t===1))throw n=Qr,rn(e,0),Et(e,r),Ne(e,te()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(N(345));case 2:Jt(e,Se,ot);break;case 3:if(Et(e,r),(r&130023424)===r&&(t=kl+500-te(),10<t)){if(ni(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){we(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=to(Jt.bind(null,e,Se,ot),t);break}Jt(e,Se,ot);break;case 4:if(Et(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Qe(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=te()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sm(r/1960))-r,10<r){e.timeoutHandle=to(Jt.bind(null,e,Se,ot),r);break}Jt(e,Se,ot);break;case 5:Jt(e,Se,ot);break;default:throw Error(N(329))}}}return Ne(e,te()),e.callbackNode===n?bh.bind(null,e):null}function ko(e,t){var n=Cr;return e.current.memoizedState.isDehydrated&&(rn(e,t).flags|=256),e=xi(e,t),e!==2&&(t=Se,Se=n,t!==null&&So(t)),e}function So(e){Se===null?Se=e:Se.push.apply(Se,e)}function bm(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ze(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Et(e,t){for(t&=~_l,t&=~Li,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Qe(t),r=1<<n;e[n]=-1,t&=~r}}function zc(e){if(B&6)throw Error(N(327));Wn();var t=ni(e,0);if(!(t&1))return Ne(e,te()),null;var n=xi(e,t);if(e.tag!==0&&n===2){var r=Ka(e);r!==0&&(t=r,n=ko(e,r))}if(n===1)throw n=Qr,rn(e,0),Et(e,t),Ne(e,te()),n;if(n===6)throw Error(N(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Jt(e,Se,ot),Ne(e,te()),null}function Sl(e,t){var n=B;B|=1;try{return e(t)}finally{B=n,B===0&&(Qn=te()+500,Pi&&Bt())}}function un(e){Tt!==null&&Tt.tag===0&&!(B&6)&&Wn();var t=B;B|=1;var n=Fe.transition,r=W;try{if(Fe.transition=null,W=1,e)return e()}finally{W=r,Fe.transition=n,B=t,!(B&6)&&Bt()}}function bl(){Oe=$n.current,K($n)}function rn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,em(n)),re!==null)for(n=re.return;n!==null;){var r=n;switch(sl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oi();break;case 3:Jn(),K(je),K(ye),fl();break;case 5:hl(r);break;case 4:Jn();break;case 13:K(J);break;case 19:K(J);break;case 10:ll(r.type._context);break;case 22:case 23:bl()}n=n.return}if(le=e,re=e=Lt(e.current,null),he=Oe=t,ae=0,Qr=null,_l=Li=cn=0,Se=Cr=null,en!==null){for(t=0;t<en.length;t++)if(n=en[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}en=null}return e}function jh(e,t){do{var n=re;try{if(ol(),Vs.current=gi,mi){for(var r=Y.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}mi=!1}if(ln=0,oe=ie=Y=null,Er=!1,Gr=0,xl.current=null,n===null||n.return===null){ae=1,Qr=t,re=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=he,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,y=d.tag;if(!(d.mode&1)&&(y===0||y===11||y===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Ec(a);if(g!==null){g.flags&=-257,Nc(g,a,l,i,t),g.mode&1&&jc(i,u,t),t=g,c=u;var v=t.updateQueue;if(v===null){var w=new Set;w.add(c),t.updateQueue=w}else v.add(c);break e}else{if(!(t&1)){jc(i,u,t),jl();break e}c=Error(N(426))}}else if(G&&l.mode&1){var x=Ec(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Nc(x,a,l,i,t),il(Yn(c,l));break e}}i=c=Yn(c,l),ae!==4&&(ae=2),Cr===null?Cr=[i]:Cr.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var h=lh(i,c,t);wc(i,h);break e;case 1:l=c;var f=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Dt===null||!Dt.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=ch(i,l,t);wc(i,_);break e}}i=i.return}while(i!==null)}Ch(n)}catch(E){t=E,re===n&&n!==null&&(re=n=n.return);continue}break}while(1)}function Eh(){var e=yi.current;return yi.current=gi,e===null?gi:e}function jl(){(ae===0||ae===3||ae===2)&&(ae=4),le===null||!(cn&268435455)&&!(Li&268435455)||Et(le,he)}function xi(e,t){var n=B;B|=2;var r=Eh();(le!==e||he!==t)&&(ot=null,rn(e,t));do try{jm();break}catch(s){jh(e,s)}while(1);if(ol(),B=n,yi.current=r,re!==null)throw Error(N(261));return le=null,he=0,ae}function jm(){for(;re!==null;)Nh(re)}function Em(){for(;re!==null&&!Qf();)Nh(re)}function Nh(e){var t=Oh(e.alternate,e,Oe);e.memoizedProps=e.pendingProps,t===null?Ch(e):re=t,xl.current=null}function Ch(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=wm(n,t),n!==null){n.flags&=32767,re=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ae=6,re=null;return}}else if(n=vm(n,t,Oe),n!==null){re=n;return}if(t=t.sibling,t!==null){re=t;return}re=t=e}while(t!==null);ae===0&&(ae=5)}function Jt(e,t,n){var r=W,s=Fe.transition;try{Fe.transition=null,W=1,Nm(e,t,n,r)}finally{Fe.transition=s,W=r}return null}function Nm(e,t,n,r){do Wn();while(Tt!==null);if(B&6)throw Error(N(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(N(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(op(e,i),e===le&&(re=le=null,he=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Cs||(Cs=!0,Rh(ti,function(){return Wn(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Fe.transition,Fe.transition=null;var a=W;W=1;var l=B;B|=4,xl.current=null,_m(e,n),kh(n,e),Kp(Za),ri=!!Xa,Za=Xa=null,e.current=n,km(n),Xf(),B=l,W=a,Fe.transition=i}else e.current=n;if(Cs&&(Cs=!1,Tt=e,wi=s),i=e.pendingLanes,i===0&&(Dt=null),tp(n.stateNode),Ne(e,te()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(vi)throw vi=!1,e=xo,xo=null,e;return wi&1&&e.tag!==0&&Wn(),i=e.pendingLanes,i&1?e===_o?Tr++:(Tr=0,_o=e):Tr=0,Bt(),null}function Wn(){if(Tt!==null){var e=ld(wi),t=Fe.transition,n=W;try{if(Fe.transition=null,W=16>e?16:e,Tt===null)var r=!1;else{if(e=Tt,Tt=null,wi=0,B&6)throw Error(N(331));var s=B;for(B|=4,T=e.current;T!==null;){var i=T,a=i.child;if(T.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(T=u;T!==null;){var d=T;switch(d.tag){case 0:case 11:case 15:Nr(8,d,i)}var y=d.child;if(y!==null)y.return=d,T=y;else for(;T!==null;){d=T;var m=d.sibling,g=d.return;if(wh(d),d===u){T=null;break}if(m!==null){m.return=g,T=m;break}T=g}}}var v=i.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}T=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,T=a;else e:for(;T!==null;){if(i=T,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Nr(9,i,i.return)}var h=i.sibling;if(h!==null){h.return=i.return,T=h;break e}T=i.return}}var f=e.current;for(T=f;T!==null;){a=T;var p=a.child;if(a.subtreeFlags&2064&&p!==null)p.return=a,T=p;else e:for(a=f;T!==null;){if(l=T,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$i(9,l)}}catch(E){Z(l,l.return,E)}if(l===a){T=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,T=_;break e}T=l.return}}if(B=s,Bt(),st&&typeof st.onPostCommitFiberRoot=="function")try{st.onPostCommitFiberRoot(Ci,e)}catch{}r=!0}return r}finally{W=n,Fe.transition=t}}return!1}function Mc(e,t,n){t=Yn(n,t),t=lh(e,t,1),e=It(e,t,1),t=we(),e!==null&&(as(e,1,t),Ne(e,t))}function Z(e,t,n){if(e.tag===3)Mc(e,e,n);else for(;t!==null;){if(t.tag===3){Mc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Dt===null||!Dt.has(r))){e=Yn(n,e),e=ch(t,e,1),t=It(t,e,1),e=we(),t!==null&&(as(t,1,e),Ne(t,e));break}}t=t.return}}function Cm(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=we(),e.pingedLanes|=e.suspendedLanes&n,le===e&&(he&n)===n&&(ae===4||ae===3&&(he&130023424)===he&&500>te()-kl?rn(e,0):_l|=n),Ne(e,t)}function Th(e,t){t===0&&(e.mode&1?(t=vs,vs<<=1,!(vs&130023424)&&(vs=4194304)):t=1);var n=we();e=mt(e,t),e!==null&&(as(e,t,n),Ne(e,n))}function Tm(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Th(e,n)}function Om(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(N(314))}r!==null&&r.delete(t),Th(e,n)}var Oh;Oh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||je.current)be=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return be=!1,ym(e,t,n);be=!!(e.flags&131072)}else be=!1,G&&t.flags&1048576&&Id(t,ui,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ks(e,t),e=t.pendingProps;var s=qn(t,ye.current);Bn(t,n),s=ml(null,t,r,e,s,n);var i=gl();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ee(r)?(i=!0,li(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ul(t),s.updater=Di,t.stateNode=s,s._reactInternals=t,lo(t,r,e,n),t=ho(null,t,r,!0,i,n)):(t.tag=0,G&&i&&rl(t),ve(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ks(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Am(r),e=qe(r,e),s){case 0:t=uo(null,t,r,e,n);break e;case 1:t=Oc(null,t,r,e,n);break e;case 11:t=Cc(null,t,r,e,n);break e;case 14:t=Tc(null,t,r,qe(r.type,e),n);break e}throw Error(N(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qe(r,s),uo(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qe(r,s),Oc(e,t,r,s,n);case 3:e:{if(fh(t),e===null)throw Error(N(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Md(e,t),fi(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Yn(Error(N(423)),t),t=Rc(e,t,r,n,s);break e}else if(r!==s){s=Yn(Error(N(424)),t),t=Rc(e,t,r,n,s);break e}else for(Ae=Pt(t.stateNode.containerInfo.firstChild),Pe=t,G=!0,Ye=null,n=Ud(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Kn(),r===s){t=gt(e,t,n);break e}ve(e,t,r,n)}t=t.child}return t;case 5:return Fd(t),e===null&&io(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,eo(r,s)?a=null:i!==null&&eo(r,i)&&(t.flags|=32),hh(e,t),ve(e,t,a,n),t.child;case 6:return e===null&&io(t),null;case 13:return ph(e,t,n);case 4:return dl(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Gn(t,null,r,n):ve(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qe(r,s),Cc(e,t,r,s,n);case 7:return ve(e,t,t.pendingProps,n),t.child;case 8:return ve(e,t,t.pendingProps.children,n),t.child;case 12:return ve(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,V(di,r._currentValue),r._currentValue=a,i!==null)if(Ze(i.value,a)){if(i.children===s.children&&!je.current){t=gt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=ht(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ao(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(N(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),ao(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}ve(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Bn(t,n),s=Be(s),r=r(s),t.flags|=1,ve(e,t,r,n),t.child;case 14:return r=t.type,s=qe(r,t.pendingProps),s=qe(r.type,s),Tc(e,t,r,s,n);case 15:return uh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qe(r,s),Ks(e,t),t.tag=1,Ee(r)?(e=!0,li(t)):e=!1,Bn(t,n),oh(t,r,s),lo(t,r,s,n),ho(null,t,r,!0,e,n);case 19:return mh(e,t,n);case 22:return dh(e,t,n)}throw Error(N(156,t.tag))};function Rh(e,t){return sd(e,t)}function Rm(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Me(e,t,n,r){return new Rm(e,t,n,r)}function El(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Am(e){if(typeof e=="function")return El(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Vo)return 11;if(e===qo)return 14}return 2}function Lt(e,t){var n=e.alternate;return n===null?(n=Me(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ys(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")El(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case En:return sn(n.children,s,i,t);case Ho:a=8,s|=8;break;case Aa:return e=Me(12,n,t,s|2),e.elementType=Aa,e.lanes=i,e;case Pa:return e=Me(13,n,t,s),e.elementType=Pa,e.lanes=i,e;case Ia:return e=Me(19,n,t,s),e.elementType=Ia,e.lanes=i,e;case Fu:return Ui(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case zu:a=10;break e;case Mu:a=9;break e;case Vo:a=11;break e;case qo:a=14;break e;case kt:a=16,r=null;break e}throw Error(N(130,e==null?e:typeof e,""))}return t=Me(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function sn(e,t,n,r){return e=Me(7,e,r,t),e.lanes=n,e}function Ui(e,t,n,r){return e=Me(22,e,r,t),e.elementType=Fu,e.lanes=n,e.stateNode={isHidden:!1},e}function _a(e,t,n){return e=Me(6,e,null,t),e.lanes=n,e}function ka(e,t,n){return t=Me(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Pm(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=na(0),this.expirationTimes=na(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=na(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Nl(e,t,n,r,s,i,a,l,c){return e=new Pm(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Me(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ul(i),e}function Im(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ah(e){if(!e)return zt;e=e._reactInternals;e:{if(fn(e)!==e||e.tag!==1)throw Error(N(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ee(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(N(171))}if(e.tag===1){var n=e.type;if(Ee(n))return Ad(e,n,t)}return t}function Ph(e,t,n,r,s,i,a,l,c){return e=Nl(n,r,!0,e,s,i,a,l,c),e.context=Ah(null),n=e.current,r=we(),s=$t(n),i=ht(r,s),i.callback=t??null,It(n,i,s),e.current.lanes=s,as(e,s,r),Ne(e,r),e}function zi(e,t,n,r){var s=t.current,i=we(),a=$t(s);return n=Ah(n),t.context===null?t.context=n:t.pendingContext=n,t=ht(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=It(s,t,a),e!==null&&(Xe(e,s,a,i),Hs(e,s,a)),a}function _i(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Fc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Cl(e,t){Fc(e,t),(e=e.alternate)&&Fc(e,t)}function Dm(){return null}var Ih=typeof reportError=="function"?reportError:function(e){console.error(e)};function Tl(e){this._internalRoot=e}Mi.prototype.render=Tl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(N(409));zi(e,t,null,null)};Mi.prototype.unmount=Tl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;un(function(){zi(null,e,null,null)}),t[pt]=null}};function Mi(e){this._internalRoot=e}Mi.prototype.unstable_scheduleHydration=function(e){if(e){var t=dd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<jt.length&&t!==0&&t<jt[n].priority;n++);jt.splice(n,0,e),n===0&&fd(e)}};function Ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Bc(){}function $m(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=_i(a);i.call(u)}}var a=Ph(t,r,e,0,null,!1,!1,"",Bc);return e._reactRootContainer=a,e[pt]=a.current,Wr(e.nodeType===8?e.parentNode:e),un(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=_i(c);l.call(u)}}var c=Nl(e,0,!1,null,null,!1,!1,"",Bc);return e._reactRootContainer=c,e[pt]=c.current,Wr(e.nodeType===8?e.parentNode:e),un(function(){zi(t,c,n,r)}),c}function Bi(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=_i(a);l.call(c)}}zi(t,a,e,s)}else a=$m(n,t,e,s,r);return _i(a)}cd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=vr(t.pendingLanes);n!==0&&(Jo(t,n|1),Ne(t,te()),!(B&6)&&(Qn=te()+500,Bt()))}break;case 13:un(function(){var r=mt(e,1);if(r!==null){var s=we();Xe(r,e,1,s)}}),Cl(e,1)}};Yo=function(e){if(e.tag===13){var t=mt(e,134217728);if(t!==null){var n=we();Xe(t,e,134217728,n)}Cl(e,134217728)}};ud=function(e){if(e.tag===13){var t=$t(e),n=mt(e,t);if(n!==null){var r=we();Xe(n,e,t,r)}Cl(e,t)}};dd=function(){return W};hd=function(e,t){var n=W;try{return W=e,t()}finally{W=n}};Ha=function(e,t,n){switch(t){case"input":if(La(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Ai(r);if(!s)throw Error(N(90));Wu(r),La(r,s)}}}break;case"textarea":Vu(e,n);break;case"select":t=n.value,t!=null&&Un(e,!!n.multiple,t,!1)}};Xu=Sl;Zu=un;var Lm={usingClientEntryPoint:!1,Events:[ls,On,Ai,Yu,Qu,Sl]},pr={findFiberByHostInstance:Zt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Um={bundleType:pr.bundleType,version:pr.version,rendererPackageName:pr.rendererPackageName,rendererConfig:pr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nd(e),e===null?null:e.stateNode},findFiberByHostInstance:pr.findFiberByHostInstance||Dm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ts=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ts.isDisabled&&Ts.supportsFiber)try{Ci=Ts.inject(Um),st=Ts}catch{}}De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lm;De.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ol(t))throw Error(N(200));return Im(e,t,null,n)};De.createRoot=function(e,t){if(!Ol(e))throw Error(N(299));var n=!1,r="",s=Ih;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Nl(e,1,!1,null,null,n,!1,r,s),e[pt]=t.current,Wr(e.nodeType===8?e.parentNode:e),new Tl(t)};De.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(N(188)):(e=Object.keys(e).join(","),Error(N(268,e)));return e=nd(t),e=e===null?null:e.stateNode,e};De.flushSync=function(e){return un(e)};De.hydrate=function(e,t,n){if(!Fi(t))throw Error(N(200));return Bi(null,e,t,!0,n)};De.hydrateRoot=function(e,t,n){if(!Ol(e))throw Error(N(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Ih;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Ph(t,null,e,1,n??null,s,!1,i,a),e[pt]=t.current,Wr(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Mi(t)};De.render=function(e,t,n){if(!Fi(t))throw Error(N(200));return Bi(null,e,t,!1,n)};De.unmountComponentAtNode=function(e){if(!Fi(e))throw Error(N(40));return e._reactRootContainer?(un(function(){Bi(null,null,e,!1,function(){e._reactRootContainer=null,e[pt]=null})}),!0):!1};De.unstable_batchedUpdates=Sl;De.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Fi(n))throw Error(N(200));if(e==null||e._reactInternals===void 0)throw Error(N(38));return Bi(e,t,n,!1,r)};De.version="18.3.1-next-f1338f8080-20240426";function Dh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dh)}catch(e){console.error(e)}}Dh(),Du.exports=De;var zm=Du.exports,Wc=zm;Oa.createRoot=Wc.createRoot,Oa.hydrateRoot=Wc.hydrateRoot;var Mm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Fm=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Bm=(e,t)=>{const n=P.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,children:l,...c},u)=>P.createElement("svg",{ref:u,...Mm,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:`lucide lucide-${Fm(e)}`,...c},[...t.map(([d,y])=>P.createElement(d,y)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${e}`,n};var A=Bm;const $h=A("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Wi=A("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),bo=A("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Wm=A("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Hm=A("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Vm=A("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),Lh=A("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),qm=A("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),Xn=A("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Km=A("Car",[["path",{d:"M14 16H9m10 0h3v-3.15a1 1 0 0 0-.84-.99L16 11l-2.7-3.6a1 1 0 0 0-.8-.4H5.24a2 2 0 0 0-1.8 1.1l-.8 1.63A6 6 0 0 0 2 12.42V16h2",key:"l5np60"}],["circle",{cx:"6.5",cy:"16.5",r:"2.5",key:"ae40ju"}],["circle",{cx:"16.5",cy:"16.5",r:"2.5",key:"1smtlt"}]]),Gm=A("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Jm=A("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Ym=A("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Qm=A("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]),Xm=A("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),Zm=A("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),yt=A("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Or=A("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),eg=A("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]),tg=A("Film",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"2.18",ry:"2.18",key:"vury4c"}],["line",{x1:"7",x2:"7",y1:"2",y2:"22",key:"t1e4qh"}],["line",{x1:"17",x2:"17",y1:"2",y2:"22",key:"1tliql"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"2",x2:"7",y1:"7",y2:"7",key:"1wdzzh"}],["line",{x1:"2",x2:"7",y1:"17",y2:"17",key:"2fufxq"}],["line",{x1:"17",x2:"22",y1:"17",y2:"17",key:"1xg577"}],["line",{x1:"17",x2:"22",y1:"7",y2:"7",key:"acrv2l"}]]),ng=A("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),rg=A("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),sg=A("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),ig=A("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Uh=A("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),ag=A("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Qs=A("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),zh=A("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),og=A("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),lg=A("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),cg=A("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),ug=A("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Hc=A("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),dg=A("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),hg=A("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),Rr=A("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),fg=A("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]),ki=A("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Zn=A("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),pg=A("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Mh=A("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),mg=A("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]),gg=A("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Vc=A("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),yg=A("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),vg=A("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Si=A("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Ar=A("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),jo=A("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),er=A("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),dn=A("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),qc=A("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),wg=A("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),xg=A("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),_g=A("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),sr=A("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),kg=A("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);class Kc extends Pu.Component{constructor(n){super(n);Il(this,"handleReset",()=>{this.setState({hasError:!1,error:null}),window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Error caught by boundary:",n,r)}render(){return this.state.hasError?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-orange-50",children:o.jsxs("div",{className:"card max-w-md text-center",children:[o.jsx("div",{className:"text-red-500 mb-4 flex justify-center",children:o.jsx(bo,{size:64})}),o.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Oops! Something went wrong"}),o.jsx("p",{className:"text-slate-600 mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),o.jsxs("button",{onClick:this.handleReset,className:"btn btn-primary",children:[o.jsx(Zn,{size:18}),"Refresh Page"]})]})}):this.props.children}}const Sg=({isDark:e,onToggle:t})=>o.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",title:e?"Switch to light mode":"Switch to dark mode",children:e?o.jsx(vg,{size:20,className:"text-amber-500"}):o.jsx(dg,{size:20,className:"text-slate-600"})});function Hi(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function bg(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(y){a(y)}}function c(d){try{u(r.throw(d))}catch(y){a(y)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})}const jg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Rl extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Eg extends Rl{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Gc extends Rl{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Jc extends Rl{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Eo;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Eo||(Eo={}));class Ng{constructor(t,{headers:n={},customFetch:r,region:s=Eo.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=jg(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return bg(this,arguments,void 0,function*(n,r={}){var s;let i,a;try{const{headers:l,method:c,body:u,signal:d,timeout:y}=r;let m={},{region:g}=r;g||(g=this.region);const v=new URL(`${this.url}/${n}`);g&&g!=="any"&&(m["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let w;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",w=u):typeof u=="string"?(m["Content-Type"]="text/plain",w=u):typeof FormData<"u"&&u instanceof FormData?w=u:(m["Content-Type"]="application/json",w=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?w=JSON.stringify(u):w=u;let x=d;y&&(a=new AbortController,i=setTimeout(()=>a.abort(),y),d?(x=a.signal,d.addEventListener("abort",()=>a.abort())):x=a.signal);const h=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:w,signal:x}).catch(E=>{throw new Eg(E)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Gc(h);if(!h.ok)throw new Jc(h);let p=((s=h.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return p==="application/json"?_=yield h.json():p==="application/octet-stream"||p==="application/pdf"?_=yield h.blob():p==="text/event-stream"?_=h:p==="multipart/form-data"?_=yield h.formData():_=yield h.text(),{data:_,error:null,response:h}}catch(l){return{data:null,error:l,response:l instanceof Jc||l instanceof Gc?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var Cg=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Tg=class{constructor(e){var t,n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=e.urlLengthLimit)!==null&&r!==void 0?r:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let a=null,l=null,c=null,u=i.status,d=i.statusText;if(i.ok){var y,m;if(n.method!=="HEAD"){var g;const h=await i.text();h===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((g=n.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?l=h:l=JSON.parse(h))}const w=(y=n.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),x=(m=i.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");w&&x&&x.length>1&&(c=parseInt(x[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(l)&&(l.length>1?(a={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var v;const w=await i.text();try{a=JSON.parse(w),Array.isArray(a)&&i.status===404&&(l=[],a=null,u=200,d="OK")}catch{i.status===404&&w===""?(u=204,d="No Content"):a={message:w}}if(a&&n.isMaybeSingle&&(!(a==null||(v=a.details)===null||v===void 0)&&v.includes("0 rows"))&&(a=null,u=200,d="OK"),a&&n.shouldThrowOnError)throw new Cg(a)}return{error:a,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var a;let l="",c="",u="";const d=i==null?void 0:i.cause;if(d){var y,m,g,v;const h=(y=d==null?void 0:d.message)!==null&&y!==void 0?y:"",f=(m=d==null?void 0:d.code)!==null&&m!==void 0?m:"";l=`${(g=i==null?void 0:i.name)!==null&&g!==void 0?g:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(v=d==null?void 0:d.name)!==null&&v!==void 0?v:"Error"}: ${h}`,f&&(l+=` (${f})`),d!=null&&d.stack&&(l+=`
${d.stack}`)}else{var w;l=(w=i==null?void 0:i.stack)!==null&&w!==void 0?w:""}const x=this.url.toString().length;return(i==null?void 0:i.name)==="AbortError"||(i==null?void 0:i.code)==="ABORT_ERR"?(u="",c="Request was aborted (timeout or manual cancellation)",x>this.urlLengthLimit&&(c+=`. Note: Your request URL is ${x} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((d==null?void 0:d.name)==="HeadersOverflowError"||(d==null?void 0:d.code)==="UND_ERR_HEADERS_OVERFLOW")&&(u="",c="HTTP headers exceeded server limits (typically 16KB)",x>this.urlLengthLimit&&(c+=`. Your request URL is ${x} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:c,code:u},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},Og=class extends Tg{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Yc=new RegExp("[,()]");var kn=class extends Og{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Yc.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Yc.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},Rg=class{constructor(e,{headers:t={},schema:n,fetch:r,urlLengthLimit:s=8e3}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r,this.urlLengthLimit=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=t??{},s=n?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",a),r&&c.append("Prefer",`count=${r}`),new kn({method:s,url:l,headers:c,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const s="POST",{url:i,headers:a}=this.cloneRequestState();if(t&&a.append("Prefer",`count=${t}`),n||a.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);i.searchParams.set("columns",c.join(","))}}return new kn({method:s,url:i,headers:a,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var i;const a="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),r&&c.append("Prefer",`count=${r}`),s||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,y)=>d.concat(Object.keys(y)),[]);if(u.length>0){const d=[...new Set(u)].map(y=>`"${y}"`);l.searchParams.set("columns",d.join(","))}}return new kn({method:a,url:l,headers:c,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var n;const r="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new kn({method:r,url:s,headers:i,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const n="DELETE",{url:r,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new kn({method:n,url:r,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function Xr(e){"@babel/helpers - typeof";return Xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xr(e)}function Ag(e,t){if(Xr(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pg(e){var t=Ag(e,"string");return Xr(t)=="symbol"?t:t+""}function Ig(e,t,n){return(t=Pg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Os(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qc(Object(n),!0).forEach(function(r){Ig(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Dg=class Fh{constructor(t,{headers:n={},schema:r,fetch:s,timeout:i,urlLengthLimit:a=8e3}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=a;const l=s??globalThis.fetch;i!==void 0&&i>0?this.fetch=(c,u)=>{const d=new AbortController,y=setTimeout(()=>d.abort(),i),m=u==null?void 0:u.signal;if(m){if(m.aborted)return clearTimeout(y),l(c,u);const g=()=>{clearTimeout(y),d.abort()};return m.addEventListener("abort",g,{once:!0}),l(c,Os(Os({},u),{},{signal:d.signal})).finally(()=>{clearTimeout(y),m.removeEventListener("abort",g)})}return l(c,Os(Os({},u),{},{signal:d.signal})).finally(()=>clearTimeout(y))}:this.fetch=l}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Rg(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new Fh(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var a;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;const d=g=>g!==null&&typeof g=="object"&&(!Array.isArray(g)||g.some(d)),y=r&&Object.values(n).some(d);y?(l="POST",u=n):r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([g,v])=>v!==void 0).map(([g,v])=>[g,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([g,v])=>{c.searchParams.append(g,v)})):(l="POST",u=n);const m=new Headers(this.headers);return y?m.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&m.set("Prefer",`count=${i}`),new kn({method:l,url:c,headers:m,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}};class $g{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const s=r.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Lg="2.95.3",Ug=`realtime-js/${Lg}`,zg="1.0.0",Bh="2.0.0",Xc=Bh,No=1e4,Mg=1e3,Fg=100;var bt;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(bt||(bt={}));var se;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(se||(se={}));var Je;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Je||(Je={}));var Co;(function(e){e.websocket="websocket"})(Co||(Co={}));var Qt;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Qt||(Qt={}));class Bg{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(t,n,r){var s,i;const a=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},y=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+a.length+u.length+y.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let v=new DataView(g),w=0;v.setUint8(w++,this.KINDS.userBroadcastPush),v.setUint8(w++,c.length),v.setUint8(w++,l.length),v.setUint8(w++,a.length),v.setUint8(w++,u.length),v.setUint8(w++,y.length),v.setUint8(w++,n),Array.from(c,h=>v.setUint8(w++,h.charCodeAt(0))),Array.from(l,h=>v.setUint8(w++,h.charCodeAt(0))),Array.from(a,h=>v.setUint8(w++,h.charCodeAt(0))),Array.from(u,h=>v.setUint8(w++,h.charCodeAt(0))),Array.from(y,h=>v.setUint8(w++,h.charCodeAt(0)));var x=new Uint8Array(g.byteLength+r.byteLength);return x.set(new Uint8Array(g),0),x.set(new Uint8Array(r),g.byteLength),x.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[s,i,a,l,c]=r;return n({join_ref:s,ref:i,topic:a,event:l,payload:c})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,s)}}_decodeUserBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2),a=n.getUint8(3),l=n.getUint8(4);let c=this.HEADER_LENGTH+4;const u=r.decode(t.slice(c,c+s));c=c+s;const d=r.decode(t.slice(c,c+i));c=c+i;const y=r.decode(t.slice(c,c+a));c=c+a;const m=t.slice(c,t.byteLength),g=l===this.JSON_ENCODING?JSON.parse(r.decode(m)):m,v={type:this.BROADCAST_EVENT,event:d,payload:g};return a>0&&(v.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class Wh{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var H;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(H||(H={}));const Zc=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,a)=>(i[a]=Wg(a,e,t,s),i),{}):{}},Wg=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=n[e];return i&&!r.includes(i)?Hh(i,a):To(a)},Hh=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Kg(t,n)}switch(e){case H.bool:return Hg(t);case H.float4:case H.float8:case H.int2:case H.int4:case H.int8:case H.numeric:case H.oid:return Vg(t);case H.json:case H.jsonb:return qg(t);case H.timestamp:return Gg(t);case H.abstime:case H.date:case H.daterange:case H.int4range:case H.int8range:case H.money:case H.reltime:case H.text:case H.time:case H.timestamptz:case H.timetz:case H.tsrange:case H.tstzrange:return To(t);default:return To(t)}},To=e=>e,Hg=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Vg=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},qg=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},Kg=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const a=e.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Hh(t,l))}return e},Gg=e=>typeof e=="string"?e.replace(" ","T"):e,Vh=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Sa{constructor(t,n,r={},s=No){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var eu;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(eu||(eu={}));class Pr{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pr.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=Pr.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Pr.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const y=i[u];if(y){const m=d.map(x=>x.presence_ref),g=y.map(x=>x.presence_ref),v=d.filter(x=>g.indexOf(x.presence_ref)<0),w=y.filter(x=>m.indexOf(x.presence_ref)<0);v.length>0&&(l[u]=v),w.length>0&&(c[u]=w)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const y=t[l].map(g=>g.presence_ref),m=d.filter(g=>y.indexOf(g.presence_ref)<0);t[l].unshift(...m)}r(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(y=>y.presence_ref);u=u.filter(y=>d.indexOf(y.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var tu;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(tu||(tu={}));var Ir;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ir||(Ir={}));var lt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(lt||(lt={}));class Ln{constructor(t,n={config:{}},r){var s,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Sa(this,Je.join,this.params,this.timeout),this.rejoinTimer=new Wh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=se.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Je.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new Pr(this),this.broadcastEndpointURL=Vh(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==se.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Ir.PRESENCE]&&this.bindings[Ir.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,y={},m={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(g=>t==null?void 0:t(lt.CHANNEL_ERROR,g)),this._onClose(()=>t==null?void 0:t(lt.CLOSED)),this.updateJoinPayload(Object.assign({config:m},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){t==null||t(lt.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,x=(v=w==null?void 0:w.length)!==null&&v!==void 0?v:0,h=[];for(let f=0;f<x;f++){const p=w[f],{filter:{event:_,schema:E,table:S,filter:j}}=p,O=g&&g[f];if(O&&O.event===_&&Ln.isFilterValueEqual(O.schema,E)&&Ln.isFilterValueEqual(O.table,S)&&Ln.isFilterValueEqual(O.filter,j))h.push(Object.assign(Object.assign({},p),{id:O.id}));else{this.unsubscribe(),this.state=se.errored,t==null||t(lt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=h,t&&t(lt.SUBSCRIBED);return}}).receive("error",g=>{this.state=se.errored,t==null||t(lt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(lt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===se.joined&&t===Ir.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:a}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=se.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Je.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Sa(this,Je.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=se.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Sa(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Fg){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Je;if(r&&[l,c,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let m=this._onMessage(a,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var v,w,x;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((x=(w=g.filter)===null||w===void 0?void 0:w.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===a}).map(g=>g.callback(m,r)):(i=this.bindings[a])===null||i===void 0||i.filter(g=>{var v,w,x,h,f,p;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const _=g.id,E=(v=g.filter)===null||v===void 0?void 0:v.event;return _&&((w=n.ids)===null||w===void 0?void 0:w.includes(_))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const _=(f=(h=g==null?void 0:g.filter)===null||h===void 0?void 0:h.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return _==="*"||_===((p=n==null?void 0:n.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:w,table:x,commit_timestamp:h,type:f,errors:p}=v;m=Object.assign(Object.assign({},{schema:w,table:x,commit_timestamp:h,eventType:f,new:{},old:{},errors:p}),this._getPayloadRecords(v))}g.callback(m,r)})}_isClosed(){return this.state===se.closed}_isJoined(){return this.state===se.joined}_isJoining(){return this.state===se.joining}_isLeaving(){return this.state===se.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Ln.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Je.close,{},t)}_onError(t){this._on(Je.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=se.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Zc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Zc(t.columns,t.old_record)),n}}const ba=()=>{},Rs={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Jg=[1e3,2e3,5e3,1e4],Yg=1e4,Qg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Xg{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=No,this.transport=null,this.heartbeatIntervalMs=Rs.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ba,this.ref=0,this.reconnectTimer=null,this.vsn=Xc,this.logger=ba,this.conn=null,this.sendBuffer=[],this.serializer=new Bg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Co.websocket}`,this.httpEndpoint=Vh(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=$g.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return n==="ok"&&this._remove(t),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case bt.connecting:return Qt.Connecting;case bt.open:return Qt.Open;case bt.closing:return Qt.Closing;default:return Qt.Closed}}isConnected(){return this.connectionState()===Qt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Ln(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Mg,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Rs.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:i,ref:a}=n,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===bt.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===bt.open||this.conn.readyState===bt.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(Je.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Qg],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:Ug};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Je.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Wh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Rs.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,a,l,c,u,d,y,m,g;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:No,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Rs.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:ba,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Xc,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:v=>Jg[v-1]||Yg,this.vsn){case zg:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(v,w)=>w(JSON.stringify(v)),this.decode=(y=t==null?void 0:t.decode)!==null&&y!==void 0?y:(v,w)=>w(JSON.parse(v));break;case Bh:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(g=t==null?void 0:t.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Zr=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Zg(e,t,n){const r=new URL(t,e);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function ey(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function ty(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:a}){const l=Zg(e.baseUrl,r,s),c=await ey(e.auth),u=await t(l,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...c,...a},body:i?JSON.stringify(i):void 0}),d=await u.text(),y=(u.headers.get("content-type")||"").includes("application/json"),m=y&&d?JSON.parse(d):d;if(!u.ok){const g=y?m:void 0,v=g==null?void 0:g.error;throw new Zr((v==null?void 0:v.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:g})}return{status:u.status,headers:u.headers,data:m}}}}function As(e){return e.join("")}var ny=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:As(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${As(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${As(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${As(e.namespace)}`}),!0}catch(t){if(t instanceof Zr&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Zr&&n.status===409)return;throw n}}};function gn(e){return e.join("")}var ry=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gn(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${gn(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${gn(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${gn(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gn(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${gn(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Zr&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Zr&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},sy=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=ty({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new ny(this.client,t),this.tableOps=new ry(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Vi=class extends Error{constructor(e,t="storage",n,r){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function qi(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Ps=class extends Vi{constructor(e,t,n,r="storage"){super(e,r,t,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},qh=class extends Vi{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const iy=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),ay=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Oo=e=>{if(Array.isArray(e))return e.map(n=>Oo(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Oo(r)}),t},oy=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function es(e){"@babel/helpers - typeof";return es=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},es(e)}function ly(e,t){if(es(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(es(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cy(e){var t=ly(e,"string");return es(t)=="symbol"?t:t+""}function uy(e,t,n){return(t=cy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nu(Object(n),!0).forEach(function(r){uy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const ru=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},dy=async(e,t,n,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const s=e,i=s.status||500;if(typeof s.json=="function")s.json().then(a=>{const l=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";t(new Ps(ru(a),i,l,r))}).catch(()=>{if(r==="vectors"){const a=i+"";t(new Ps(s.statusText||`HTTP ${i} error`,i,a,r))}else{const a=i+"";t(new Ps(s.statusText||`HTTP ${i} error`,i,a,r))}});else{const a=i+"";t(new Ps(s.statusText||`HTTP ${i} error`,i,a,r))}}else t(new qh(ru(e),e,r))},hy=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!r?D(D({},s),n):(ay(r)?(s.headers=D({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),D(D({},s),n))};async function mr(e,t,n,r,s,i,a){return new Promise((l,c)=>{e(n,hy(t,r,s,i)).then(u=>{if(!u.ok)throw u;if(r!=null&&r.noResolveJson)return u;if(a==="vectors"){const d=u.headers.get("content-type");if(u.headers.get("content-length")==="0"||u.status===204)return{};if(!d||!d.includes("application/json"))return{}}return u.json()}).then(u=>l(u)).catch(u=>dy(u,c,r,a))})}function Kh(e="storage"){return{get:async(t,n,r,s)=>mr(t,"GET",n,r,s,void 0,e),post:async(t,n,r,s,i)=>mr(t,"POST",n,s,i,r,e),put:async(t,n,r,s,i)=>mr(t,"PUT",n,s,i,r,e),head:async(t,n,r,s)=>mr(t,"HEAD",n,D(D({},r),{},{noResolveJson:!0}),s,void 0,e),remove:async(t,n,r,s,i)=>mr(t,"DELETE",n,s,i,r,e)}}const fy=Kh("storage"),{get:ts,post:Ke,put:Ro,head:py,remove:Al}=fy,Re=Kh("vectors");var ir=class{constructor(e,t={},n,r="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=iy(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(qi(n))return{data:null,error:n};throw n}}},my=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(qi(t))return{data:null,error:t};throw t}}};let Gh;Gh=Symbol.toStringTag;var gy=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Gh]="BlobDownloadBuilder",this.promise=null}asStream(){return new my(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(qi(t))return{data:null,error:t};throw t}}};const yy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},su={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var vy=class extends ir{constructor(e,t={},n,r){super(e,t,r,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,r){var s=this;return s.handleOperation(async()=>{let i;const a=D(D({},su),r);let l=D(D({},s.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",s.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",a.cacheControl),c&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!a.duplex&&(a.duplex="half")),r!=null&&r.headers&&(l=D(D({},l),r.headers));const u=s._removeEmptyFolders(t),d=s._getFinalPath(u),y=await(e=="PUT"?Ro:Ke)(s.fetch,`${s.url}/object/${d}`,i,D({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{path:u,id:y.Id,fullPath:y.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var s=this;const i=s._removeEmptyFolders(e),a=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${a}`);return l.searchParams.set("token",t),s.handleOperation(async()=>{let c;const u=D({upsert:su.upsert},r),d=D(D({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{path:i,fullPath:(await Ro(s.fetch,l.toString(),c,{headers:d})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(e);const s=D({},n.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await Ke(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(n.url+i.url),l=a.searchParams.get("token");if(!l)throw new Vi("No token returned by API");return{signedUrl:a.toString(),path:e,token:l}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;return r.handleOperation(async()=>await Ke(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(e,t,n){var r=this;return r.handleOperation(async()=>({path:(await Ke(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(e,t,n){var r=this;return r.handleOperation(async()=>{let s=r._getFinalPath(e),i=await Ke(r.fetch,`${r.url}/object/sign/${s}`,D({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${i.signedURL}${a}`)}})}async createSignedUrls(e,t,n){var r=this;return r.handleOperation(async()=>{const s=await Ke(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s.map(a=>D(D({},a),{},{signedUrl:a.signedURL?encodeURI(`${r.url}${a.signedURL}${i}`):null}))})}download(e,t,n){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=s?`?${s}`:"",a=this._getFinalPath(e),l=()=>ts(this.fetch,`${this.url}/${r}/${a}${i}`,{headers:this.headers,noResolveJson:!0},n);return new gy(l,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);return t.handleOperation(async()=>Oo(await ts(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await py(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(qi(r)&&r instanceof qh){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&r.push(a);let l=r.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${l}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await Al(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var r=this;return r.handleOperation(async()=>{const s=D(D(D({},yy),t),{},{prefix:e||""});return await Ke(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{const r=D({},e);return await Ke(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const wy="2.95.3",us={"X-Client-Info":`storage-js/${wy}`};var xy=class extends ir{constructor(e,t={},n,r){const s=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const i=s.href.replace(/\/$/,""),a=D(D({},us),t);super(i,a,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=t.listBucketOptionsToQueryString(e);return await ts(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await ts(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await Ke(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await Ro(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Ke(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Al(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},_y=class extends ir{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=D(D({},us),t);super(r,s,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Ke(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return await ts(t.fetch,s,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Al(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!oy(e))throw new Vi("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new sy({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,i){const a=s[i];return typeof a!="function"?a:async(...l)=>{try{return{data:await a.apply(s,l),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}},ky=class extends ir{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=D(D({},us),{},{"Content-Type":"application/json"},t);super(r,s,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Re.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await Re.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Re.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await Re.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},Sy=class extends ir{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=D(D({},us),{},{"Content-Type":"application/json"},t);super(r,s,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Re.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Re.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Re.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Re.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Re.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},by=class extends ir{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=D(D({},us),{},{"Content-Type":"application/json"},t);super(r,s,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Re.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Re.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Re.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Re.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},jy=class extends by{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Ey(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},Ey=class extends ky{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,D(D({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,D(D({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new Ny(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Ny=class extends Sy{constructor(e,t,n,r,s){super(e,t,s),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,D(D({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,D(D({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,D(D({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,D(D({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,D(D({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Cy=class extends xy{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new vy(this.url,this.headers,e,this.fetch)}get vectors(){return new jy(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new _y(this.url+"/iceberg",this.headers,this.fetch)}};const Jh="2.95.3",Sn=30*1e3,Ao=3,ja=Ao*Sn,Ty="http://localhost:9999",Oy="supabase.auth.token",Ry={"X-Client-Info":`gotrue-js/${Jh}`},Po="X-Supabase-Api-Version",Yh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ay=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Py=10*60*1e3;class ns extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function R(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Iy extends ns{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Dy(e){return R(e)&&e.name==="AuthApiError"}class Xt extends ns{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class wt extends ns{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Te extends wt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ea(e){return R(e)&&e.name==="AuthSessionMissingError"}class yn extends wt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Is extends wt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ds extends wt{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $y(e){return R(e)&&e.name==="AuthImplicitGrantRedirectError"}class iu extends wt{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ly extends wt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Io extends wt{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Na(e){return R(e)&&e.name==="AuthRetryableFetchError"}class au extends wt{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Do extends wt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const bi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ou=` 	
\r=`.split(""),Uy=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<ou.length;t+=1)e[ou[t].charCodeAt(0)]=-2;for(let t=0;t<bi.length;t+=1)e[bi[t].charCodeAt(0)]=t;return e})();function lu(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(bi[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(bi[r]),t.queuedBits-=6}}function Qh(e,t,n){const r=Uy[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function cu(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{Fy(a,r,n)};for(let a=0;a<e.length;a+=1)Qh(e.charCodeAt(a),s,i);return t.join("")}function zy(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function My(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}zy(r,t)}}function Fy(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Hn(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Qh(e.charCodeAt(s),n,r);return new Uint8Array(t)}function By(e){const t=[];return My(e,n=>t.push(n)),new Uint8Array(t)}function nn(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>lu(s,n,r)),lu(null,n,r),t.join("")}function Wy(e){return Math.round(Date.now()/1e3)+e}function Hy(){return Symbol("auth-callback")}const ue=()=>typeof window<"u"&&typeof document<"u",qt={tested:!1,writable:!1},Xh=()=>{if(!ue())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qt.tested)return qt.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),qt.tested=!0,qt.writable=!0}catch{qt.tested=!0,qt.writable=!1}return qt.writable};function Vy(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Zh=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),qy=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",bn=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Kt=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ce=async(e,t)=>{await e.removeItem(t)};class Ki{constructor(){this.promise=new Ki.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ki.promiseConstructor=Promise;function $s(e){const t=e.split(".");if(t.length!==3)throw new Do("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Ay.test(t[r]))throw new Do("JWT not in base64url format");return{header:JSON.parse(cu(t[0])),payload:JSON.parse(cu(t[1])),signature:Hn(t[2]),raw:{header:t[0],payload:t[1]}}}async function Ky(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Gy(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){r(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function Jy(e){return("0"+e.toString(16)).substr(-2)}function Yy(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,Jy).join("")}async function Qy(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Xy(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await Qy(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vn(e,t,n=!1){const r=Yy();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await bn(e,`${t}-code-verifier`,s);const i=await Xy(r);return[i,r===i?"plain":"s256"]}const Zy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ev(e){const t=e.headers.get(Po);if(!t||!t.match(Zy))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function tv(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function nv(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const rv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wn(e){if(!rv.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ca(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function sv(e,t){return new Proxy(e,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,s)}})}function uu(e){return JSON.parse(JSON.stringify(e))}const Yt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),iv=[502,503,504];async function du(e){var t;if(!qy(e))throw new Io(Yt(e),0);if(iv.includes(e.status))throw new Io(Yt(e),e.status);let n;try{n=await e.json()}catch(i){throw new Xt(Yt(i),i)}let r;const s=ev(e);if(s&&s.getTime()>=Yh["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new au(Yt(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Te}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new au(Yt(n),e.status,n.weak_password.reasons);throw new Iy(Yt(n),e.status||500,r)}const av=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function I(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Po]||(i[Po]=Yh["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await ov(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function ov(e,t,n,r,s,i){const a=av(t,r,s,i);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new Io(Yt(c),0)}if(l.ok||await du(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await du(c)}}function Ve(e){var t;let n=null;uv(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Wy(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function hu(e){const t=Ve(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Nt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function lv(e){return{data:e,error:null}}function cv(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=Hi(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function fu(e){return e}function uv(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ta=["global","local","others"];class dv{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Zh(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Ta[0]){if(Ta.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ta.join(", ")}`);try{return await I(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(R(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await I(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Nt})}catch(r){if(R(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Hi(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await I(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:cv,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(R(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await I(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Nt})}catch(n){if(R(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await I(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:fu});if(d.error)throw d.error;const y=await d.json(),m=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);u[`${x}Page`]=w}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},y),u),error:null}}catch(u){if(R(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){wn(t);try{return await I(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Nt})}catch(n){if(R(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){wn(t);try{return await I(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Nt})}catch(r){if(R(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){wn(t);try{return await I(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Nt})}catch(r){if(R(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){wn(t.userId);try{const{data:n,error:r}=await I(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(R(n))return{data:null,error:n};throw n}}async _deleteFactor(t){wn(t.userId),wn(t.id);try{return{data:await I(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(R(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await I(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:fu});if(d.error)throw d.error;const y=await d.json(),m=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);u[`${x}Page`]=w}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},y),u),error:null}}catch(u){if(R(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await I(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(R(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await I(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(R(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await I(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(R(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await I(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(R(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await I(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(R(n))return{data:null,error:n};throw n}}}function pu(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const xn={debug:!!(globalThis&&Xh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ef extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class hv extends ef{}async function fv(e,t,n){xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),xn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new hv(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(xn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function pv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function tf(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function mv(e){return parseInt(e,16)}function gv(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function yv(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:l,requestId:c,resources:u,scheme:d,uri:y,version:m}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const g=tf(e.address),v=d?`${d}://${r}`:r,w=e.statement?`${e.statement}
`:"",x=`${v} wants you to sign in with your Ethereum account:
${g}

${w}`;let h=`URI: ${y}
Version: ${m}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(h+=`
Expiration Time: ${s.toISOString()}`),l&&(h+=`
Not Before: ${l.toISOString()}`),c&&(h+=`
Request ID: ${c}`),u){let f=`
Resources:`;for(const p of u){if(!p||typeof p!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${p}`);f+=`
- ${p}`}h+=f}return`${x}
${h}`}class ne extends Error{constructor({message:t,code:n,cause:r,name:s}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class ji extends ne{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function vv({error:e,options:t}){var n,r,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ne({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ne({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ne({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ne({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ne({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ne({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new ne({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ne({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(nf(a)){if(i.rp.id!==a)return new ne({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ne({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ne({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ne({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ne({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function wv({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ne({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ne({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(nf(r)){if(n.rpId!==r)return new ne({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ne({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ne({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ne({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class xv{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const _v=new xv;function kv(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=Hi(e,["challenge","user","excludeCredentials"]),i=Hn(t).buffer,a=Object.assign(Object.assign({},n),{id:Hn(n.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:a});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Hn(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function Sv(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Hi(e,["challenge","allowCredentials"]),s=Hn(t).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const l=n[a];i.allowCredentials[a]=Object.assign(Object.assign({},l),{id:Hn(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function bv(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:nn(new Uint8Array(e.response.attestationObject)),clientDataJSON:nn(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function jv(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:nn(new Uint8Array(s.authenticatorData)),clientDataJSON:nn(new Uint8Array(s.clientDataJSON)),signature:nn(new Uint8Array(s.signature)),userHandle:s.userHandle?nn(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function nf(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function mu(){var e,t;return!!(ue()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Ev(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ji("Browser returned unexpected credential type",t)}:{data:null,error:new ji("Empty credential response",t)}}catch(t){return{data:null,error:vv({error:t,options:e})}}}async function Nv(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ji("Browser returned unexpected credential type",t)}:{data:null,error:new ji("Empty credential response",t)}}catch(t){return{data:null,error:wv({error:t,options:e})}}}const Cv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Tv={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ei(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))r[i]=a;else if(n(a))r[i]=a;else if(t(a)){const l=r[i];t(l)?r[i]=Ei(l,a):r[i]=Ei(a)}else r[i]=a}return r}function Ov(e,t){return Ei(Cv,e,t||{})}function Rv(e,t){return Ei(Tv,e,t||{})}class Av{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},i){var a;try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!l)return{data:null,error:c};const u=s??_v.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:d}=l.webauthn.credential_options.publicKey;if(!d.name){const y=r;if(y)d.name=`${d.id}:${y}`;else{const g=(await this.client.getUser()).data.user,v=((a=g==null?void 0:g.user_metadata)===null||a===void 0?void 0:a.name)||(g==null?void 0:g.email)||(g==null?void 0:g.id)||"User";d.name=`${d.id}:${v}`}}d.displayName||(d.displayName=d.name)}switch(l.webauthn.type){case"create":{const d=Ov(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:y,error:m}=await Ev({publicKey:d,signal:u});return y?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:y}},error:null}:{data:null,error:m}}case"request":{const d=Rv(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:y,error:m}=await Nv(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:d,signal:u}));return y?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:y}},error:null}:{data:null,error:m}}}}catch(l){return R(l)?{data:null,error:l}:{data:null,error:new Xt("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new ns("rpId is required for WebAuthn authentication")};try{if(!mu())return{data:null,error:new Xt("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!a)return{data:null,error:l};const{webauthn:c}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(a){return R(a)?{data:null,error:a}:{data:null,error:new Xt("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new ns("rpId is required for WebAuthn registration")};try{if(!mu())return{data:null,error:new Xt("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(d=>{var y;return(y=d.data)===null||y===void 0?void 0:y.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(a){return R(a)?{data:null,error:a}:{data:null,error:new Xt("Unexpected error in register",a)}}}}pv();const Pv={url:Ty,storageKey:Oy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ry,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function gu(e,t,n){return await n()}const _n={};class rs{get jwks(){var t,n;return(n=(t=_n[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){_n[this.storageKey]=Object.assign(Object.assign({},_n[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=_n[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){_n[this.storageKey]=Object.assign(Object.assign({},_n[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Pv),t);if(this.storageKey=i.storageKey,this.instanceID=(n=rs.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,rs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&ue()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new dv({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Zh(i.fetch),this.lock=i.lock||gu,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&ue()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=fv:this.lock=gu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Av(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Xh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=pu(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=pu(this.memoryStorage)),ue()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a);try{await this._notifyAllSubscribers(a.data.event,a.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(a=>{this._debug("#initialize()","error",a)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Jh}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(ue()&&(n=Vy(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),ue()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),$y(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return R(n)?this._returnResult({error:n}):this._returnResult({error:new Xt("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ve}),{data:a,error:l}=i;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(R(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:d,password:y,options:m}=t;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await vn(this.storage,this.storageKey)),i=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:y,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:v},xform:Ve})}else if("phone"in t){const{phone:d,password:y,options:m}=t;i=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:y,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ve})}else throw new Is("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return await ce(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await ce(this.storage,`${this.storageKey}-code-verifier`),R(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:a,options:l}=t;n=await I(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:hu})}else if("phone"in t){const{phone:i,password:a,options:l}=t;n=await I(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:hu})}else throw new Is("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new yn;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(R(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,i,a,l,c,u,d,y,m;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:w,wallet:x,statement:h,options:f}=t;let p;if(ue())if(typeof x=="object")p=x;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")p=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");p=x}const _=new URL((n=f==null?void 0:f.url)!==null&&n!==void 0?n:window.location.href),E=await p.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=tf(E[0]);let j=(r=f==null?void 0:f.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!j){const F=await p.request({method:"eth_chainId"});j=mv(F)}const O={domain:_.host,address:S,statement:h,uri:_.href,version:"1",chainId:j,nonce:(s=f==null?void 0:f.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=f==null?void 0:f.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=f==null?void 0:f.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=f==null?void 0:f.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=f==null?void 0:f.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=f==null?void 0:f.signInWithEthereum)===null||d===void 0?void 0:d.resources};g=yv(O),v=await p.request({method:"personal_sign",params:[gv(g),S]})}try{const{data:w,error:x}=await I(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:v},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Ve});if(x)throw x;if(!w||!w.session||!w.user){const h=new yn;return this._returnResult({data:{user:null,session:null},error:h})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:x})}catch(w){if(R(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var n,r,s,i,a,l,c,u,d,y,m,g;let v,w;if("message"in t)v=t.message,w=t.signature;else{const{chain:x,wallet:h,statement:f,options:p}=t;let _;if(ue())if(typeof h=="object")_=h;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof h!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=h}const E=new URL((n=p==null?void 0:p.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),f?{statement:f}:null));let j;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")j=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)j=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)v=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),w=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${E.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(r=p==null?void 0:p.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=p==null?void 0:p.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((a=p==null?void 0:p.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((y=(d=p==null?void 0:p.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||y===void 0)&&y.length?["Resources",...p.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(v),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=S}}try{const{data:x,error:h}=await I(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:nn(w)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Ve});if(h)throw h;if(!x||!x.session||!x.user){const f=new yn;return this._returnResult({data:{user:null,session:null},error:f})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:h})}catch(x){if(R(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(t){const n=await Kt(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new Ly;const{data:i,error:a}=await I(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Ve});if(await ce(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!i||!i.session||!i.user){const l=new yn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(await ce(this.storage,`${this.storageKey}-code-verifier`),R(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=t,l=await I(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ve}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new yn;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(n){if(R(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await vn(this.storage,this.storageKey));const{error:y}=await I(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await I(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Is("You must provide either an email or phone number.")}catch(l){if(await ce(this.storage,`${this.storageKey}-code-verifier`),R(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await I(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ve});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(R(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var n,r,s,i,a;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await vn(this.storage,this.storageKey));const u=await I(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:lv});return!((i=u.data)===null||i===void 0)&&i.url&&ue()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await ce(this.storage,`${this.storageKey}-code-verifier`),R(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Te;const{error:s}=await I(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(R(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:a}=await I(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:a,error:l}=await I(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l})}throw new Is("You must provide either an email or phone number and a type")}catch(n){if(R(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Kt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<ja:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await Kt(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=Ca()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=sv(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await I(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Nt}):await this._useSession(async n=>{var r,s,i;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Te}:await I(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Nt})})}catch(n){if(R(n))return Ea(n)&&(await this._removeSession(),await ce(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Te;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await vn(this.storage,this.storageKey));const{data:u,error:d}=await I(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Nt});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await ce(this.storage,`${this.storageKey}-code-verifier`),R(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Te;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=$s(t.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(R(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Te;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(R(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!ue())throw new Ds("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ds(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new iu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ds("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new iu("No code detected.");const{data:f,error:p}=await this._exchangeCodeForSession(t.code);if(p)throw p;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new Ds("No session defined in URL");const d=Math.round(Date.now()/1e3),y=parseInt(l);let m=d+y;c&&(m=parseInt(c));const g=m-d;g*1e3<=Sn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${y}s`);const v=m-y;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,d);const{data:w,error:x}=await this._getUser(i);if(x)throw x;const h={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:y,expires_at:m,refresh_token:a,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:h,redirectType:t.type},error:null})}catch(r){if(R(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Kt(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i&&!Ea(i))return this._returnResult({error:i});const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(Dy(l)&&(l.status===404||l.status===401||l.status===403)||Ea(l)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await ce(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=Hy(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await vn(this.storage,this.storageKey,!0));try{return await I(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await ce(this.storage,`${this.storageKey}-code-verifier`),R(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(R(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:y,error:m}=i;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await I(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=y.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return ue()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(R(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:a,provider:l,token:c,access_token:u,nonce:d}=t,y=await I(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ve}),{data:m,error:g}=y;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new yn}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:g}))}catch(s){if(await ce(this.storage,`${this.storageKey}-code-verifier`),R(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await I(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(R(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Gy(async s=>(s>0&&await Ky(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await I(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ve})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Na(i)&&Date.now()+a-r<Sn})}catch(r){if(this._debug(n,"error",r),R(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),ue()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Kt(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Kt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await bn(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:Ca()}else if(s&&!s.user&&!s.user){const a=await Kt(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await ce(this.storage,this.storageKey+"-user"),await bn(this.storage,this.storageKey,s)):s.user=Ca()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ja;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${ja}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Na(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Te;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ki;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new Te;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),R(i)){const a={data:null,error:i};return Na(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await ce(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await bn(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=uu(s);await bn(this.storage,this.storageKey,i)}else{const s=uu(n);await bn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ce(this.storage,this.storageKey),await ce(this.storage,this.storageKey+"-code-verifier"),await ce(this.storage,this.storageKey+"-user"),this.userStorage&&await ce(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ue()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Sn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Sn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Sn}ms, refresh threshold is ${Ao} ticks`),s<=Ao&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof ef)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ue()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await vn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await I(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(R(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await I(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(R(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?bv(t.webauthn.credential_response):jv(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await I(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(n){if(R(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const a=await I(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:kv(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Sv(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(R(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(t){var n,r,s,i;if(t)try{const{payload:g}=$s(t);let v=null;g.aal&&(v=g.aal);let w=v;const{data:{user:x},error:h}=await this.getUser(t);if(h)return this._returnResult({data:null,error:h});((r=(n=x==null?void 0:x.factors)===null||n===void 0?void 0:n.filter(_=>_.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(w="aal2");const p=g.amr||[];return{data:{currentLevel:v,nextLevel:w,currentAuthenticationMethods:p},error:null}}catch(g){if(R(g))return this._returnResult({data:null,error:g});throw g}const{data:{session:a},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=$s(a.access_token);let u=null;c.aal&&(u=c.aal);let d=u;((i=(s=a.user.factors)===null||s===void 0?void 0:s.filter(g=>g.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(d="aal2");const m=c.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await I(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Te})})}catch(n){if(R(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Te});const a=await I(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&ue()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(R(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Te});const a=await I(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&ue()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(R(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await I(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Te})})}catch(t){if(R(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await I(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Te})})}catch(n){if(R(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+Py>s)return r;const{data:i,error:a}=await I(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:g,error:v}=await this.getSession();if(v||!g.session)return this._returnResult({data:null,error:v});r=g.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=$s(r);n!=null&&n.allowExpired||tv(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:i,header:s,signature:a},error:null}}const d=nv(s.alg),y=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,y,a,By(`${l}.${c}`)))throw new Do("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(R(r))return this._returnResult({data:null,error:r});throw r}}}rs.nextInstanceID={};const Iv=rs,Dv="2.95.3";let xr="";typeof Deno<"u"?xr="deno":typeof document<"u"?xr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xr="react-native":xr="node";const $v={"X-Client-Info":`supabase-js-${xr}/${Dv}`},Lv={headers:$v},Uv={schema:"public"},zv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mv={};function ss(e){"@babel/helpers - typeof";return ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ss(e)}function Fv(e,t){if(ss(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ss(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bv(e){var t=Fv(e,"string");return ss(t)=="symbol"?t:t+""}function Wv(e,t,n){return(t=Bv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yu(Object(n),!0).forEach(function(r){Wv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Hv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Vv=()=>Headers,qv=(e,t,n)=>{const r=Hv(n),s=Vv();return async(i,a)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,X(X({},a),{},{headers:u}))}};function Kv(e){return e.endsWith("/")?e:e+"/"}function Gv(e,t){var n,r;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:d,global:y}=t,m={db:X(X({},c),s),auth:X(X({},u),i),realtime:X(X({},d),a),storage:{},global:X(X(X({},y),l),{},{headers:X(X({},(n=y==null?void 0:y.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function Jv(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Kv(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Yv=class extends Iv{constructor(e){super(e)}},Qv=class{constructor(e,t,n){var r,s;this.supabaseUrl=e,this.supabaseKey=t;const i=Jv(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const a=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:Uv,realtime:Mv,auth:X(X({},zv),{},{storageKey:a}),global:Lv},c=Gv(n??{},l);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=qv(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(X({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new Dg(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch,timeout:c.db.timeout,urlLengthLimit:c.db.urlLengthLimit}),this.storage=new Cy(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Ng(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:i,flowType:a,lock:l,debug:c,throwOnError:u},d,y){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Yv({url:this.authUrl.href,headers:X(X({},m),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,flowType:a,lock:l,debug:c,throwOnError:u,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Xg(this.realtimeUrl.href,X(X({},e),{},{params:X(X({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Xv=(e,t,n)=>new Qv(e,t,n);function Zv(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}Zv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const e0="https://sstvzhzqwfbcymotooeg.supabase.co",rf="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNzdHZ6aHpxd2ZiY3ltb3Rvb2VnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA1ODA0NDMsImV4cCI6MjA4NjE1NjQ0M30.MF2J1jr-PD4Bt3Cy9K7Mp8uaSY-Zk7uEASztSgFacsM",at=Xv(e0,rf,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"financial-tracker-auth"},realtime:{params:{eventsPerSecond:10}}}),t0=()=>!!rf,vu=()=>window.location.hostname==="localhost"?window.location.origin:window.location.origin+window.location.pathname.replace(/\/+$/,""),_t={signUp:async(e,t,n={})=>{const{data:r,error:s}=await at.auth.signUp({email:e,password:t,options:{data:n}});return{data:r,error:s}},signIn:async(e,t)=>{const{data:n,error:r}=await at.auth.signInWithPassword({email:e,password:t});return{data:n,error:r}},signInWithOAuth:async e=>{const t=vu();console.log("OAuth redirectTo:",t);const{data:n,error:r}=await at.auth.signInWithOAuth({provider:e,options:{redirectTo:t}});return{data:n,error:r}},signOut:async()=>{const{error:e}=await at.auth.signOut();return{error:e}},getUser:async()=>{const{data:e,error:t}=await at.auth.getUser();return{data:e==null?void 0:e.user,error:t}},getSession:async()=>{const{data:e,error:t}=await at.auth.getSession();return{data:e==null?void 0:e.session,error:t}},resetPassword:async e=>{const{data:t,error:n}=await at.auth.resetPasswordForEmail(e,{redirectTo:`${vu()}/reset-password`});return{data:t,error:n}},updatePassword:async e=>{const{data:t,error:n}=await at.auth.updateUser({password:e});return{data:t,error:n}},onAuthStateChange:e=>at.auth.onAuthStateChange(e)},sf=P.createContext({}),Gi=()=>{const e=P.useContext(sf);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},n0=({children:e})=>{const[t,n]=P.useState(null),[r,s]=P.useState(null),[i,a]=P.useState(!0),[l,c]=P.useState(!1);P.useEffect(()=>{const x=t0();if(c(x),!x){console.warn("  Supabase not configured. Running in local-only mode."),a(!1);return}(async()=>{try{const{data:p}=await _t.getSession();s(p),n((p==null?void 0:p.user)??null)}catch(p){console.error("Error initializing auth:",p)}finally{a(!1)}})();const{data:f}=_t.onAuthStateChange(async(p,_)=>{console.log("Auth event:",p),s(_),n((_==null?void 0:_.user)??null),a(!1)});return()=>{var p;(p=f==null?void 0:f.subscription)==null||p.unsubscribe()}},[]);const w={user:t,session:r,loading:i,isConfigured:l,isAuthenticated:!!t,signUp:async(x,h,f={})=>{try{a(!0);const{data:p,error:_}=await _t.signUp(x,h,f);if(_)throw _;return{data:p,error:null}}catch(p){return console.error("Error signing up:",p),{data:null,error:p}}finally{a(!1)}},signIn:async(x,h)=>{try{a(!0);const{data:f,error:p}=await _t.signIn(x,h);if(p)throw p;return{data:f,error:null}}catch(f){return console.error("Error signing in:",f),{data:null,error:f}}finally{a(!1)}},signInWithOAuth:async x=>{try{a(!0);const{data:h,error:f}=await _t.signInWithOAuth(x);if(f)throw f;return{data:h,error:null}}catch(h){return console.error("Error signing in with OAuth:",h),{data:null,error:h}}finally{a(!1)}},signOut:async()=>{try{a(!0);const{error:x}=await _t.signOut();if(x)throw x;return n(null),s(null),{error:null}}catch(x){return console.error("Error signing out:",x),{error:x}}finally{a(!1)}},resetPassword:async x=>{try{const{data:h,error:f}=await _t.resetPassword(x);if(f)throw f;return{data:h,error:null}}catch(h){return console.error("Error resetting password:",h),{data:null,error:h}}},updatePassword:async x=>{try{const{data:h,error:f}=await _t.updatePassword(x);if(f)throw f;return{data:h,error:null}}catch(h){return console.error("Error updating password:",h),{data:null,error:h}}}};return o.jsx(sf.Provider,{value:w,children:e})};function r0(){var u,d;const{user:e,signOut:t,isAuthenticated:n,isConfigured:r}=Gi(),[s,i]=P.useState(!1),a=P.useRef(null);if(P.useEffect(()=>{const y=m=>{a.current&&!a.current.contains(m.target)&&i(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]),!n)return null;const l=async()=>{await t(),i(!1)},c=()=>{var y,m,g;return(y=e==null?void 0:e.user_metadata)!=null&&y.full_name?e.user_metadata.full_name.split(" ").map(v=>v[0]).join("").toUpperCase().slice(0,2):((g=(m=e==null?void 0:e.email)==null?void 0:m[0])==null?void 0:g.toUpperCase())||"U"};return o.jsxs("div",{ref:a,style:{position:"relative"},children:[o.jsx("button",{onClick:()=>i(!s),style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #10b981 0%, #06b6d4 100%)",border:"2px solid var(--border-light)",color:"white",fontSize:"0.875rem",fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.3)"},onMouseEnter:y=>{y.currentTarget.style.transform="scale(1.05)",y.currentTarget.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.5)"},onMouseLeave:y=>{y.currentTarget.style.transform="scale(1)",y.currentTarget.style.boxShadow="0 2px 8px rgba(16, 185, 129, 0.3)"},children:(u=e==null?void 0:e.user_metadata)!=null&&u.avatar_url?o.jsx("img",{src:e.user_metadata.avatar_url,alt:"Avatar",style:{width:"100%",height:"100%",borderRadius:"50%"}}):c()}),s&&o.jsxs("div",{style:{position:"absolute",top:"calc(100% + 0.5rem)",right:0,minWidth:"240px",background:"var(--card-bg)",border:"1px solid var(--border-light)",borderRadius:"0.75rem",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:1e3,overflow:"hidden",animation:"fadeInDown 0.2s ease-out"},children:[o.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"linear-gradient(135deg, #10b981 0%, #06b6d4 100%)",color:"white",fontSize:"1.125rem",fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center"},children:c()}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontWeight:600,color:"var(--text-primary)",fontSize:"0.9375rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:((d=e==null?void 0:e.user_metadata)==null?void 0:d.full_name)||"User"}),o.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e==null?void 0:e.email})]})]}),o.jsx("div",{style:{marginTop:"0.75rem",padding:"0.5rem",background:r?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",borderRadius:"0.375rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.75rem"},children:r?o.jsxs(o.Fragment,{children:[o.jsx(Xm,{size:14,style:{color:"var(--success)"}}),o.jsx("span",{style:{color:"var(--success)",fontWeight:600},children:"Synced to cloud"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Qm,{size:14,style:{color:"var(--danger)"}}),o.jsx("span",{style:{color:"var(--danger)",fontWeight:600},children:"Local only"})]})})]}),o.jsxs("div",{style:{padding:"0.5rem"},children:[o.jsxs("button",{onClick:()=>{i(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:"none",border:"none",borderRadius:"0.5rem",color:"var(--text-primary)",fontSize:"0.875rem",fontWeight:500,cursor:"pointer",transition:"all 0.2s",textAlign:"left"},onMouseEnter:y=>{y.currentTarget.style.background="var(--bg-tertiary)"},onMouseLeave:y=>{y.currentTarget.style.background="none"},children:[o.jsx(Mh,{size:18}),"Settings"]}),o.jsxs("button",{onClick:l,style:{width:"100%",display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:"none",border:"none",borderRadius:"0.5rem",color:"var(--danger)",fontSize:"0.875rem",fontWeight:500,cursor:"pointer",transition:"all 0.2s",textAlign:"left"},onMouseEnter:y=>{y.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:y=>{y.currentTarget.style.background="none"},children:[o.jsx(cg,{size:18}),"Sign Out"]})]})]}),o.jsx("style",{children:`
        @keyframes fadeInDown {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function s0({onSignInClick:e}){const{isAuthenticated:t,isConfigured:n,loading:r}=Gi();return r?null:n?t?o.jsx(r0,{}):o.jsxs("button",{onClick:e,className:"btn",style:{fontSize:"0.875rem"},children:[o.jsx(lg,{size:16}),"Sign In"]}):o.jsx("div",{style:{padding:"0.5rem 1rem",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"0.5rem",fontSize:"0.75rem",color:"var(--danger)",fontWeight:600},children:"Local Mode"})}function i0({view:e,setView:t,isDarkMode:n,onToggleDarkMode:r}){const s=[{id:"dashboard",label:"Dashboard",icon:Uh},{id:"transactions",label:"Transactions",icon:Qs},{id:"budget",label:"Budget",icon:yt},{id:"reports",label:"Reports",icon:Lh},{id:"settings",label:"Settings",icon:Mh}],i=[{id:"add-transaction",label:"Transaction",icon:ki},{id:"add-goal",label:"Goal",icon:dn},{id:"add-recurring",label:"Recurring",icon:Zn}];return o.jsx("header",{className:"header",children:o.jsxs("div",{className:"header-container",children:[o.jsx("div",{className:"header-left",children:o.jsxs("div",{className:"header-logo",children:[o.jsx("div",{className:"header-logo-icon",children:o.jsx(yt,{size:24})}),o.jsx("span",{className:"header-logo-text",children:"Financial Tracker"})]})}),o.jsx("nav",{className:"header-nav",children:s.map(a=>{const l=a.icon;return o.jsxs("button",{onClick:()=>t(a.id),className:`nav-button ${e===a.id?"nav-button-active":""}`,children:[o.jsx(l,{size:18}),o.jsx("span",{children:a.label})]},a.id)})}),o.jsxs("div",{className:"header-actions",children:[o.jsx(Sg,{isDark:n,onToggle:r}),o.jsx(s0,{onSignInClick:()=>t("auth")}),i.map(a=>{const l=a.icon;return o.jsxs("button",{onClick:()=>t(a.id),className:"btn btn-primary btn-sm",children:[o.jsx(l,{size:16}),o.jsx("span",{className:"hidden md:inline",children:a.label})]},a.id)})]})]})})}const $o=[{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"",name:"Euro"},{code:"GBP",symbol:"",name:"British Pound"},{code:"JPY",symbol:"",name:"Japanese Yen"},{code:"CNY",symbol:"",name:"Chinese Yuan"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"CHF",symbol:"Fr",name:"Swiss Franc"},{code:"INR",symbol:"",name:"Indian Rupee"},{code:"BRL",symbol:"R$",name:"Brazilian Real"},{code:"MXN",symbol:"Mex$",name:"Mexican Peso"},{code:"ZAR",symbol:"R",name:"South African Rand"},{code:"SEK",symbol:"kr",name:"Swedish Krona"},{code:"NOK",symbol:"kr",name:"Norwegian Krone"},{code:"DKK",symbol:"kr",name:"Danish Krone"},{code:"PLN",symbol:"z",name:"Polish Zloty"},{code:"SGD",symbol:"S$",name:"Singapore Dollar"},{code:"HKD",symbol:"HK$",name:"Hong Kong Dollar"},{code:"KRW",symbol:"",name:"South Korean Won"},{code:"TRY",symbol:"",name:"Turkish Lira"},{code:"RUB",symbol:"",name:"Russian Ruble"},{code:"NZD",symbol:"NZ$",name:"New Zealand Dollar"},{code:"AED",symbol:".",name:"UAE Dirham"},{code:"THB",symbol:"",name:"Thai Baht"}],af="USD",a0=e=>$o.find(t=>t.code===e)||$o.find(t=>t.code===af),z=(e,t=af)=>{const n=a0(t),r=Math.abs(e).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",");return`${n.symbol}${r}`};function o0({balance:e,monthlyIncome:t,monthlyExpenses:n,currency:r="USD"}){return o.jsxs("div",{className:"kpi-grid",children:[o.jsxs("div",{className:"stat-card kpi-card rounded-xl shadow-xl card-hover",children:[o.jsx("div",{className:"kpi-icon-small icon-green",children:o.jsx(yt,{})}),o.jsxs("div",{className:"kpi-info",children:[o.jsx("span",{className:"kpi-label",children:"Current Balance"}),o.jsx("h2",{className:"kpi-value",children:z(e,r)})]})]}),o.jsxs("div",{className:"stat-card kpi-card rounded-xl shadow-xl card-hover",children:[o.jsx("div",{className:"kpi-icon-small icon-blue",children:o.jsx(dn,{})}),o.jsxs("div",{className:"kpi-info",children:[o.jsx("span",{className:"kpi-label",children:"Monthly Income"}),o.jsx("h2",{className:"kpi-value",children:z(t,r)})]})]}),o.jsxs("div",{className:"stat-card kpi-card rounded-xl shadow-xl card-hover",children:[o.jsx("div",{className:"kpi-icon-small icon-red",children:o.jsx(er,{})}),o.jsxs("div",{className:"kpi-info",children:[o.jsx("span",{className:"kpi-label",children:"Monthly Expenses"}),o.jsx("h2",{className:"kpi-value",children:z(n,r)})]})]})]})}function l0({goals:e,onUpdateGoal:t,onDeleteGoal:n,currency:r="USD"}){const s=(a,l,c=100)=>{t(a,l+c)},i=(a,l,c=100)=>{const u=Math.max(0,l-c);t(a,u)};return e.length===0?o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx(Ar,{className:"text-primary",size:28}),o.jsx("h2",{className:"text-2xl font-light",children:"Savings Goals"})]}),o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[o.jsx("div",{className:"text-slate-400 mb-4",children:o.jsx(Ar,{size:48})}),o.jsx("p",{className:"text-slate-600",children:"No goals yet. Set your first savings goal to get started!"})]})]}):o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx(Ar,{className:"text-primary",size:28}),o.jsx("h2",{className:"text-2xl font-light",children:"Savings Goals"})]}),o.jsx("div",{className:"goals-grid",children:e.map(a=>{const l=Math.min(a.current/a.target*100,100),c=l>=100;return o.jsxs("div",{className:"goal-card",children:[o.jsxs("div",{className:"goal-header",children:[o.jsx("h3",{className:"goal-name",children:a.name}),o.jsx("button",{onClick:()=>n(a.id),className:"goal-delete-btn",title:"Delete goal",children:o.jsx(sr,{size:18})})]}),o.jsxs("div",{className:"goal-content",children:[o.jsxs("div",{className:"goal-amount-display",children:[o.jsx("span",{className:"goal-current",children:z(a.current,r)}),o.jsx("span",{className:"goal-separator",children:"/"}),o.jsx("span",{className:"goal-target",children:z(a.target,r)})]}),o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:`progress-fill ${c?"bg-success":""}`,style:{width:`${l}%`}})}),o.jsxs("div",{className:"goal-progress-text",children:[o.jsxs("span",{className:"font-semibold",children:[l.toFixed(0),"% complete"]}),o.jsxs("span",{className:"goal-remaining",children:[z(Math.max(0,a.target-a.current),r)," remaining"]})]}),o.jsxs("div",{className:"goal-controls",children:[o.jsxs("button",{onClick:()=>i(a.id,a.current,100),className:"goal-control-btn goal-control-minus",title:"Subtract 100",disabled:a.current===0,children:[o.jsx(Hc,{size:16}),o.jsx("span",{children:"100"})]}),o.jsxs("button",{onClick:()=>i(a.id,a.current,10),className:"goal-control-btn goal-control-minus",title:"Subtract 10",disabled:a.current===0,children:[o.jsx(Hc,{size:16}),o.jsx("span",{children:"10"})]}),o.jsxs("button",{onClick:()=>s(a.id,a.current,10),className:"goal-control-btn goal-control-plus",title:"Add 10",children:[o.jsx(ki,{size:16}),o.jsx("span",{children:"10"})]}),o.jsxs("button",{onClick:()=>s(a.id,a.current,100),className:"goal-control-btn goal-control-plus",title:"Add 100",children:[o.jsx(ki,{size:16}),o.jsx("span",{children:"100"})]})]})]})]},a.id)})})]})}const wu={"Food & Dining":{icon:xg,color:"#f59e0b"},Shopping:{icon:Vc,color:"#8b5cf6"},Housing:{icon:Uh,color:"#3b82f6"},Utilities:{icon:kg,color:"#06b6d4"},Transportation:{icon:Km,color:"#10b981"},Travel:{icon:fg,color:"#6366f1"},Healthcare:{icon:ig,color:"#ef4444"},Education:{icon:sg,color:"#8b5cf6"},Clothing:{icon:mg,color:"#ec4899"},Entertainment:{icon:tg,color:"#f97316"},Technology:{icon:yg,color:"#64748b"},Fitness:{icon:eg,color:"#10b981"},Groceries:{icon:gg,color:"#22c55e"},"Coffee & Drinks":{icon:Zm,color:"#78350f"},Salary:{icon:qm,color:"#10b981"},"Other Income":{icon:Vm,color:"#3b82f6"},Other:{icon:Vc,color:"#64748b"}},Pl=["Food & Dining","Groceries","Shopping","Housing","Utilities","Transportation","Travel","Healthcare","Education","Clothing","Entertainment","Technology","Fitness","Coffee & Drinks","Other"],of=["Salary","Freelance","Business","Investment","Other Income"],Ji=e=>wu[e]||wu.Other;function c0({transactions:e,onDeleteTransaction:t,onViewAll:n,currency:r="USD"}){const s=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),i=e.slice(0,3);return e.length===0?o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx(Qs,{className:"text-primary",size:28}),o.jsx("h2",{className:"text-2xl font-light",children:"Recent Transactions"})]}),o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[o.jsx("div",{className:"text-slate-400 mb-4",children:o.jsx(Qs,{size:48})}),o.jsx("p",{className:"text-slate-600",children:"No transactions yet. Add your first transaction to start tracking!"})]})]}):o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Qs,{className:"text-primary",size:28}),o.jsx("h2",{className:"text-2xl font-light",children:"Recent Transactions"})]}),e.length>3&&o.jsxs("button",{onClick:n,className:"btn btn-primary text-sm",children:["View All (",e.length,")",o.jsx(Hm,{size:16})]})]}),o.jsx("div",{className:"transaction-list",children:i.map((a,l)=>{const c=Ji(a.category),u=c.icon;return o.jsxs("div",{className:"transaction-item animate-slide-in",style:{animationDelay:`${l*.05}s`},children:[o.jsxs("div",{className:"transaction-left",children:[o.jsx("div",{className:"transaction-icon",style:{backgroundColor:`${c.color}20`,color:c.color},children:o.jsx(u,{size:20})}),o.jsxs("div",{className:"transaction-details",children:[o.jsx("h4",{children:a.description}),o.jsxs("div",{className:"transaction-meta",children:[o.jsxs("span",{children:[o.jsx(Xn,{size:12}),s(a.date)]}),o.jsxs("span",{children:[o.jsx(Si,{size:12}),a.category]})]})]})]}),o.jsxs("div",{className:"transaction-right",children:[o.jsxs("span",{className:`transaction-amount ${a.type==="income"?"amount-income":"amount-expense"}`,children:[a.type==="income"?"+":"-",z(a.amount,r)]}),o.jsx("button",{onClick:()=>t(a.id),className:"btn-icon",title:"Delete transaction",children:o.jsx(sr,{size:18})})]})]},a.id)})})]})}function u0({transactions:e,onDeleteTransaction:t,currency:n="USD"}){const[r,s]=P.useState(""),[i,a]=P.useState("all"),[l,c]=P.useState("all"),[u,d]=P.useState("all"),y=h=>new Date(h).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),m=["all",...new Set(e.map(h=>h.category))],g=()=>{if(u==="all")return e;const h=new Date,f={"7days":7,"30days":30,"90days":90}[u],p=new Date(h.getTime()-f*24*60*60*1e3);return e.filter(_=>new Date(_.date)>=p)},v=P.useMemo(()=>g().filter(f=>{const p=f.description.toLowerCase().includes(r.toLowerCase()),_=i==="all"||f.type===i,E=l==="all"||f.category===l;return p&&_&&E}),[e,r,i,l,u]),w=v.filter(h=>h.type==="income").reduce((h,f)=>h+f.amount,0),x=v.filter(h=>h.type==="expense").reduce((h,f)=>h+f.amount,0);return e.length===0?o.jsxs("div",{className:"card",children:[o.jsx("h2",{className:"text-2xl font-light mb-6",children:"All Transactions"}),o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[o.jsx("div",{className:"text-slate-400 mb-4",children:o.jsx(yt,{size:48})}),o.jsx("p",{className:"text-slate-600",children:"No transactions yet. Add your first transaction to start tracking!"})]})]}):o.jsxs("div",{children:[o.jsxs("div",{className:"grid-3 mb-6",children:[o.jsxs("div",{className:"card",style:{padding:"1.5rem",marginBottom:0},children:[o.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Filtered Income"}),o.jsx("div",{className:"text-2xl font-bold text-green-600",children:z(w,n)})]}),o.jsxs("div",{className:"card",style:{padding:"1.5rem",marginBottom:0},children:[o.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Filtered Expenses"}),o.jsx("div",{className:"text-2xl font-bold text-red-600",children:z(x,n)})]}),o.jsxs("div",{className:"card",style:{padding:"1.5rem",marginBottom:0},children:[o.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Net"}),o.jsx("div",{className:`text-2xl font-bold ${w-x>=0?"text-green-600":"text-red-600"}`,children:z(w-x,n)})]})]}),o.jsxs("div",{className:"card",children:[o.jsx("h2",{className:"text-2xl font-light mb-6",children:"All Transactions"}),o.jsxs("div",{className:"filters-section",children:[o.jsxs("div",{className:"search-box",children:[o.jsx(pg,{size:18,className:"search-icon"}),o.jsx("input",{type:"text",placeholder:"Search transactions...",value:r,onChange:h=>s(h.target.value),className:"search-input"})]}),o.jsxs("div",{className:"filter-group",children:[o.jsx(Xn,{size:18}),o.jsxs("select",{value:u,onChange:h=>d(h.target.value),className:"filter-select",children:[o.jsx("option",{value:"all",children:"All Time"}),o.jsx("option",{value:"7days",children:"Last 7 Days"}),o.jsx("option",{value:"30days",children:"Last 30 Days"}),o.jsx("option",{value:"90days",children:"Last 90 Days"})]})]}),o.jsxs("div",{className:"filter-group",children:[o.jsx(ng,{size:18}),o.jsxs("select",{value:i,onChange:h=>a(h.target.value),className:"filter-select",children:[o.jsx("option",{value:"all",children:"All Types"}),o.jsx("option",{value:"income",children:"Income"}),o.jsx("option",{value:"expense",children:"Expenses"})]})]}),o.jsxs("div",{className:"filter-group",children:[o.jsx(Si,{size:18}),o.jsx("select",{value:l,onChange:h=>c(h.target.value),className:"filter-select",children:m.map(h=>o.jsx("option",{value:h,children:h==="all"?"All Categories":h},h))})]})]}),o.jsxs("div",{className:"text-sm text-slate-600 mb-4",children:["Showing ",v.length," of ",e.length," transactions"]}),v.length===0?o.jsx("div",{className:"text-center py-12 text-slate-600",children:"No transactions match your filters."}):o.jsx("div",{className:"transaction-list",children:v.map((h,f)=>{const p=Ji(h.category),_=p.icon;return o.jsxs("div",{className:"transaction-item animate-slide-in",style:{animationDelay:`${Math.min(f*.02,.6)}s`},children:[o.jsxs("div",{className:"transaction-left",children:[o.jsx("div",{className:"transaction-icon",style:{backgroundColor:`${p.color}20`,color:p.color},children:o.jsx(_,{size:20})}),o.jsxs("div",{className:"transaction-details",children:[o.jsx("h4",{children:h.description}),o.jsxs("div",{className:"transaction-meta",children:[o.jsxs("span",{children:[o.jsx(Xn,{size:12}),y(h.date)]}),o.jsxs("span",{children:[o.jsx(Si,{size:12}),h.category]})]})]})]}),o.jsxs("div",{className:"transaction-right",children:[o.jsxs("span",{className:`transaction-amount ${h.type==="income"?"amount-income":"amount-expense"}`,children:[h.type==="income"?"+":"-",z(h.amount,n)]}),o.jsx("button",{onClick:()=>t(h.id),className:"btn-icon",title:"Delete transaction",children:o.jsx(sr,{})})]})]},h.id)})})]})]})}function d0({onSubmit:e,onCancel:t}){const[n,r]=P.useState({type:"income",amount:"",description:"",category:"",date:new Date().toISOString().split("T")[0]}),s=n.type==="expense"?Pl:of,i=a=>{a.preventDefault();const l=parseFloat(n.amount);if(isNaN(l)||l<=0){alert("Please enter a valid amount");return}e({type:n.type,amount:l,description:n.description||(n.type==="income"?"Income":"Expense"),category:n.category||"Other",date:n.date}),r({type:"income",amount:"",description:"",category:"",date:new Date().toISOString().split("T")[0]})};return o.jsxs("div",{className:"card",children:[o.jsx("h2",{className:"text-2xl font-light mb-6",children:"Add Transaction"}),o.jsxs("form",{onSubmit:i,children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"block text-sm font-medium mb-3",children:"Type"}),o.jsxs("div",{className:"type-selector-grid",children:[o.jsxs("button",{type:"button",onClick:()=>r({...n,type:"income",category:""}),className:`type-button ${n.type==="income"?"type-button-income-active":"type-button-inactive"}`,children:[o.jsx(dn,{size:24}),o.jsx("span",{children:"Income"})]}),o.jsxs("button",{type:"button",onClick:()=>r({...n,type:"expense",category:""}),className:`type-button ${n.type==="expense"?"type-button-expense-active":"type-button-inactive"}`,children:[o.jsx(er,{size:24}),o.jsx("span",{children:"Expense"})]})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Amount"}),o.jsx("input",{type:"number",step:"0.01",value:n.amount,onChange:a=>r({...n,amount:a.target.value}),placeholder:"0.00",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Description"}),o.jsx("input",{type:"text",value:n.description,onChange:a=>r({...n,description:a.target.value}),placeholder:"e.g., Monthly salary, Groceries"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Category"}),o.jsxs("select",{value:n.category,onChange:a=>r({...n,category:a.target.value}),children:[o.jsx("option",{value:"",children:"Select category"}),s.map(a=>o.jsx("option",{value:a,children:a},a))]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Date"}),o.jsx("input",{type:"date",value:n.date,onChange:a=>r({...n,date:a.target.value}),required:!0})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{type:"submit",className:"btn btn-primary",children:"Add Transaction"}),o.jsx("button",{type:"button",onClick:t,className:"btn",children:"Cancel"})]})]})]})}function h0({onSubmit:e,onCancel:t,currency:n="USD"}){const[r,s]=P.useState({name:"",target:"",current:0}),i=a=>{a.preventDefault();const l=parseFloat(r.target);if(!r.name||isNaN(l)||l<=0){alert("Please fill in all fields correctly");return}e({name:r.name,target:l,current:parseFloat(r.current)||0}),s({name:"",target:"",current:0})};return o.jsx("div",{className:"animate-slide-in max-w-2xl mx-auto",children:o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx(Ar,{className:"text-primary",size:28}),o.jsx("h2",{className:"text-2xl font-light",children:"Create Savings Goal"})]}),o.jsxs("form",{onSubmit:i,children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Goal Name"}),o.jsx("input",{type:"text",value:r.name,onChange:a=>s({...r,name:a.target.value}),placeholder:"e.g., Emergency Fund, Vacation, New Car",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Target Amount"}),o.jsx("input",{type:"number",step:"0.01",value:r.target,onChange:a=>s({...r,target:a.target.value}),placeholder:"0.00",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Current Progress (Optional)"}),o.jsx("input",{type:"number",step:"0.01",value:r.current,onChange:a=>s({...r,current:a.target.value}),placeholder:"0.00"})]}),o.jsxs("div",{className:"form-actions",children:[o.jsxs("button",{type:"submit",className:"btn btn-primary",children:[o.jsx(Ar,{size:18}),"Create Goal"]}),o.jsx("button",{type:"button",onClick:t,className:"btn",children:"Cancel"})]})]})]})})}function lf({spendingByCategory:e,currency:t="USD"}){const n=Object.entries(e),r=n.reduce((l,[,c])=>l+c,0),s=["#6366f1","#8b5cf6","#ec4899","#f59e0b","#10b981","#06b6d4","#ef4444","#64748b"],a=(()=>{if(n.length===0)return[];let l=-90;const c=100,u=120;return n.map(([d,y],m)=>{const g=y/r*100,v=g/100*360,w=l*Math.PI/180,x=(l+v)*Math.PI/180,h=u+c*Math.cos(w),f=u+c*Math.sin(w),p=u+c*Math.cos(x),_=u+c*Math.sin(x),E=v>180?1:0,S=[`M ${u} ${u}`,`L ${h} ${f}`,`A ${c} ${c} 0 ${E} 1 ${p} ${_}`,"Z"].join(" ");return l+=v,{path:S,color:s[m%s.length],category:d,amount:y,percentage:g}})})();return n.length===0?o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Spending by Category"}),o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[o.jsx("div",{className:"text-slate-400 mb-4",children:o.jsx(Rr,{size:48})}),o.jsx("p",{className:"text-slate-600",children:"No expense data available yet"})]})]}):o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Spending by Category"}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("svg",{width:"240",height:"240",viewBox:"0 0 240 240",className:"mb-6",children:a.map((l,c)=>o.jsx("g",{children:o.jsx("path",{d:l.path,fill:l.color,className:"pie-slice",style:{transition:"all 0.3s ease"}})},c))}),o.jsx("div",{className:"w-full space-y-2",children:a.map((l,c)=>o.jsxs("div",{className:"flex items-center justify-between py-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-4 h-4 rounded-sm",style:{backgroundColor:l.color}}),o.jsx("span",{className:"text-sm font-medium text-slate-700",children:l.category})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-sm font-semibold text-slate-900",children:z(l.amount,t)}),o.jsxs("div",{className:"text-xs text-slate-500",children:[l.percentage.toFixed(1),"%"]})]})]},c))})]})]})}function f0({balanceData:e,currency:t="USD"}){if(!e||e.length===0)return o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Balance Over Time"}),o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[o.jsx("div",{className:"text-slate-400 mb-4",children:o.jsx($h,{size:48})}),o.jsx("p",{className:"text-slate-600",children:"No transaction history available yet"})]})]});const n=e.map(x=>x.balance),r=Math.max(...n,0),s=Math.min(...n,0),i=r-s||1,a=300,l=800,c=40,u=30,d=Math.ceil(e.length/u),y=e.filter((x,h)=>h%d===0||h===e.length-1),m=()=>y.map((x,h)=>{const f=c+h/(y.length-1)*(l-c*2),p=a-c-(x.balance-s)/i*(a-c*2);return h===0?`M ${f} ${p}`:`L ${f} ${p}`}).join(" "),g=()=>{const x=m(),h=c+(l-c*2),f=a-c-(0-s)/i*(a-c*2);return`${x} L ${h} ${f} L ${c} ${f} Z`},v=e[e.length-1].balance,w=v>=0;return o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Balance Over Time"}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Current Balance"}),o.jsx("div",{className:`text-3xl font-bold ${w?"text-green-600":"text-red-600"}`,children:z(Math.abs(v),t)})]}),o.jsx("div",{className:"relative",style:{height:`${a}px`,width:"100%",overflow:"auto"},children:o.jsxs("svg",{width:l,height:a,className:"balance-chart",children:[o.jsx("line",{x1:c,y1:a-c,x2:l-c,y2:a-c,stroke:"#e2e8f0",strokeWidth:"1"}),o.jsx("line",{x1:c,y1:c,x2:c,y2:a-c,stroke:"#e2e8f0",strokeWidth:"1"}),s<0&&o.jsx("line",{x1:c,y1:a-c-(0-s)/i*(a-c*2),x2:l-c,y2:a-c-(0-s)/i*(a-c*2),stroke:"#94a3b8",strokeWidth:"1",strokeDasharray:"4 4"}),o.jsx("path",{d:g(),fill:"url(#gradient)",opacity:"0.2"}),o.jsx("path",{d:m(),fill:"none",stroke:"#6366f1",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),y.map((x,h)=>{const f=c+h/(y.length-1)*(l-c*2),p=a-c-(x.balance-s)/i*(a-c*2);return o.jsx("g",{children:o.jsx("circle",{cx:f,cy:p,r:"4",fill:"#6366f1",className:"chart-point"})},h)}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#6366f1",stopOpacity:"0.8"}),o.jsx("stop",{offset:"100%",stopColor:"#6366f1",stopOpacity:"0"})]})})]})}),o.jsxs("div",{className:"mt-6 grid grid-3 gap-4 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Highest"}),o.jsx("div",{className:"text-lg font-semibold text-green-600",children:z(r,t)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Lowest"}),o.jsx("div",{className:"text-lg font-semibold text-red-600",children:z(s,t)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Transactions"}),o.jsx("div",{className:"text-lg font-semibold text-slate-900",children:e.length})]})]})]})}function p0({budgets:e,currentMonthSpending:t,onUpdateBudgets:n,currency:r="USD"}){const[s,i]=P.useState(!1),[a,l]=P.useState(null),[c,u]=P.useState({category:"",amount:""}),d=()=>{if(!c.category||!c.amount||parseFloat(c.amount)<=0){alert("Please enter a valid category and amount");return}const x={...e,[c.category]:parseFloat(c.amount)};n(x),u({category:"",amount:""}),i(!1)},y=x=>{l(x),u({category:x,amount:e[x].toString()})},m=()=>{if(!c.amount||parseFloat(c.amount)<=0){alert("Please enter a valid amount");return}const x={...e};delete x[a],x[c.category]=parseFloat(c.amount),n(x),l(null),u({category:"",amount:""})},g=x=>{if(!confirm(`Delete budget for ${x}?`))return;const h={...e};delete h[x],n(h)},v=()=>{i(!1),l(null),u({category:"",amount:""})},w=Pl.filter(x=>!e[x]||x===a);return o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h3",{className:"text-xl font-semibold",children:"Monthly Budgets"}),!s&&!a&&o.jsxs("button",{onClick:()=>i(!0),className:"btn btn-primary",children:[o.jsx(ki,{size:18}),"Add Budget"]})]}),(s||a)&&o.jsxs("div",{className:"budget-form",children:[o.jsxs("div",{className:"grid grid-2 gap-4",children:[o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsx("label",{children:"Category"}),o.jsxs("select",{value:c.category,onChange:x=>u({...c,category:x.target.value}),disabled:a!==null,children:[o.jsx("option",{value:"",children:"Select category"}),w.map(x=>o.jsx("option",{value:x,children:x},x))]})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsx("label",{children:"Budget Amount"}),o.jsx("input",{type:"number",step:"0.01",value:c.amount,onChange:x=>u({...c,amount:x.target.value}),placeholder:"0.00"})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsxs("button",{onClick:a?m:d,className:"btn btn-primary",children:[o.jsx(Jm,{size:18}),a?"Save":"Add"]}),o.jsxs("button",{onClick:v,className:"btn",children:[o.jsx(sr,{size:18}),"Cancel"]})]})]}),Object.keys(e).length===0?o.jsx("div",{className:"text-center py-12 text-slate-600",children:"No budgets set yet. Add your first budget to start tracking!"}):o.jsx("div",{className:"space-y-4 mt-6",children:Object.entries(e).map(([x,h])=>{const f=t[x]||0,p=h-f,_=Math.min(f/h*100,100),E=f>h;return o.jsxs("div",{className:"budget-item",children:[o.jsxs("div",{className:"flex justify-between items-start mb-3",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-slate-900",children:x}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:[z(f,r)," of ",z(h,r)]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>y(x),className:"btn-icon-small",title:"Edit budget",children:o.jsx(hg,{size:16})}),o.jsx("button",{onClick:()=>g(x),className:"btn-icon-small text-red-600",title:"Delete budget",children:o.jsx(jo,{size:16})})]})]}),o.jsx("div",{className:"progress-bar",style:{height:"8px"},children:o.jsx("div",{className:`progress-fill ${E?"bg-red-500":""}`,style:{width:`${_}%`}})}),o.jsxs("div",{className:"flex justify-between items-center mt-2",children:[o.jsx("span",{className:`text-sm font-medium ${E?"text-red-600":p<h*.2?"text-amber-600":"text-green-600"}`,children:E?`${z(Math.abs(p),r)} over budget`:`${z(p,r)} remaining`}),o.jsxs("span",{className:"text-sm text-slate-600",children:[_.toFixed(0),"%"]})]})]},x)})})]})}function m0({transactions:e,budgets:t,onUpdateBudgets:n,currency:r="USD"}){const[s,i]=P.useState("overview"),a=()=>{const w={};return e.filter(x=>x.type==="expense").forEach(x=>{const h=x.category||"Other";w[h]=(w[h]||0)+x.amount}),w},l=()=>{const w=[...e].sort((f,p)=>new Date(f.date)-new Date(p.date));let x=0;return w.map(f=>(f.type==="income"?x+=f.amount:x-=f.amount,{date:f.date,balance:x,label:new Date(f.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}))},c=()=>{const w=new Date,x=w.getMonth(),h=w.getFullYear(),f={};return e.filter(p=>{const _=new Date(p.date);return p.type==="expense"&&_.getMonth()===x&&_.getFullYear()===h}).forEach(p=>{const _=p.category||"Other";f[_]=(f[_]||0)+p.amount}),f},u=a(),d=l(),y=c(),m=e.filter(w=>w.type==="expense").reduce((w,x)=>w+x.amount,0),g=e.filter(w=>w.type==="income").reduce((w,x)=>w+x.amount,0),v=g-m;return o.jsxs("div",{children:[o.jsxs("div",{className:"kpi-grid",style:{marginBottom:"2rem"},children:[o.jsxs("div",{className:"kpi-card",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"kpi-icon-small icon-blue",children:o.jsx(dn,{size:20})}),o.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Total Income"})]}),o.jsx("div",{className:"text-2xl font-bold text-slate-900",children:z(g,r)})]}),o.jsxs("div",{className:"kpi-card",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"kpi-icon-small icon-red",children:o.jsx(er,{size:20})}),o.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Total Expenses"})]}),o.jsx("div",{className:"text-2xl font-bold text-slate-900",children:z(m,r)})]}),o.jsxs("div",{className:"kpi-card",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:`kpi-icon-small ${v>=0?"icon-green":"icon-red"}`,children:o.jsx(yt,{size:20})}),o.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Net Savings"})]}),o.jsx("div",{className:`text-2xl font-bold ${v>=0?"text-green-600":"text-red-600"}`,children:z(Math.abs(v),r)})]})]}),o.jsxs("div",{className:"budget-tabs",children:[o.jsxs("button",{onClick:()=>i("overview"),className:`budget-tab ${s==="overview"?"budget-tab-active":""}`,children:[o.jsx(Rr,{size:18}),"Overview"]}),o.jsxs("button",{onClick:()=>i("budgets"),className:`budget-tab ${s==="budgets"?"budget-tab-active":""}`,children:[o.jsx(yt,{size:18}),"Budgets"]}),o.jsxs("button",{onClick:()=>i("trends"),className:`budget-tab ${s==="trends"?"budget-tab-active":""}`,children:[o.jsx($h,{size:18}),"Trends"]})]}),s==="overview"&&o.jsxs("div",{className:"grid grid-2",style:{gap:"2rem"},children:[o.jsx(lf,{spendingByCategory:u,currency:r}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Spending Breakdown"}),o.jsx("div",{className:"space-y-3",children:Object.entries(u).sort(([,w],[,x])=>x-w).map(([w,x])=>{const h=x/m*100;return o.jsxs("div",{className:"spending-item",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"font-medium text-slate-700",children:w}),o.jsx("span",{className:"text-slate-900 font-semibold",children:z(x,r)})]}),o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:"progress-fill",style:{width:`${h}%`}})}),o.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:[h.toFixed(1),"% of total expenses"]})]},w)})})]})]}),s==="budgets"&&o.jsx(p0,{budgets:t,currentMonthSpending:y,onUpdateBudgets:n,currency:r}),s==="trends"&&o.jsx("div",{children:o.jsx(f0,{balanceData:d,currency:r})})]})}function g0({budgets:e,currentMonthSpending:t,currency:n="USD"}){const r=[];return Object.entries(e).forEach(([s,i])=>{const a=t[s]||0,l=a/i*100;l>=75&&r.push({category:s,spent:a,budget:i,percentage:l,remaining:i-a,isOver:l>100})}),r.length===0?null:o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(bo,{className:"text-warning",size:28}),o.jsx("h2",{className:"text-2xl font-light",children:"Budget Alerts"})]}),o.jsxs("span",{className:"text-sm font-semibold px-3 py-1 bg-warning/20 text-warning rounded-full",children:[r.length," ",r.length===1?"Alert":"Alerts"]})]}),o.jsx("div",{className:"space-y-3",children:r.map(s=>o.jsxs("div",{className:"budget-warning-card",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${s.isOver?"bg-danger/10 text-danger":"bg-warning/10 text-warning"}`,children:s.isOver?o.jsx(Wi,{size:20}):o.jsx(bo,{size:20})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-lg",children:s.category}),o.jsxs("p",{className:"text-sm text-slate-600",children:[z(s.spent,n)," of ",z(s.budget,n)]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:`text-2xl font-bold ${s.isOver?"text-danger":"text-warning"}`,children:[s.percentage.toFixed(0),"%"]}),o.jsx("div",{className:"text-xs text-slate-500 font-medium",children:"Used"})]})]}),o.jsx("div",{className:"progress-bar mb-2",children:o.jsx("div",{className:`progress-fill ${s.isOver?"bg-danger-gradient":"bg-warning-gradient"}`,style:{width:`${Math.min(s.percentage,100)}%`}})}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:s.isOver?"text-danger font-semibold":"text-warning font-semibold",children:s.isOver?`${z(Math.abs(s.remaining),n)} over budget`:`${z(s.remaining,n)} remaining`}),o.jsx("span",{className:"text-slate-500",children:s.isOver?"Over budget!":"Approaching limit"})]})]},s.category))})]})}function y0({transactions:e,currency:t="USD"}){const n=new Date,r=n.getMonth(),s=n.getFullYear(),i=e.filter(u=>{const d=new Date(u.date);return u.type==="expense"&&d.getMonth()===r&&d.getFullYear()===s}),a={};i.forEach(u=>{const d=u.category||"Other";a[d]||(a[d]=0),a[d]+=u.amount});const l=Object.entries(a).map(([u,d])=>({category:u,amount:d})).sort((u,d)=>d.amount-u.amount).slice(0,6),c=l.reduce((u,d)=>u+d.amount,0);return l.length===0?o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx(Rr,{className:"text-primary",size:28}),o.jsx("h2",{className:"text-2xl font-light",children:"Spending by Category"})]}),o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[o.jsx("div",{className:"text-slate-400 mb-4",children:o.jsx(Rr,{size:48})}),o.jsx("p",{style:{color:"var(--text-secondary)"},children:"No expenses this month yet."})]})]}):o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx(Rr,{className:"text-primary",size:28}),o.jsx("h2",{className:"text-2xl font-light",children:"Spending by Category"})]}),o.jsx("div",{className:"space-y-4",children:l.map((u,d)=>{const y=(u.amount/c*100).toFixed(1),m=Ji(u.category),g=m.icon;return o.jsxs("div",{className:"animate-slide-in",style:{animationDelay:`${d*.05}s`},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"kpi-icon-small",style:{backgroundColor:`${m.color}20`,color:m.color,width:"2.5rem",height:"2.5rem",borderRadius:"0.5rem"},children:o.jsx(g,{size:18})}),o.jsx("span",{className:"font-medium",style:{color:"var(--text-primary)"},children:u.category})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:[y,"%"]}),o.jsx("span",{className:"font-semibold",style:{color:"var(--text-primary)"},children:z(u.amount,t)})]})]}),o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:"progress-fill",style:{width:`${y}%`,background:m.color}})})]},u.category)})}),o.jsx("div",{className:"mt-6 pt-6",style:{borderTop:"1px solid var(--border)"},children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{style:{color:"var(--text-secondary)"},className:"font-medium",children:"Total Spending"}),o.jsx("span",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:z(c,t)})]})})]})}const v0=({onExport:e,onImport:t,onClearAll:n,currency:r,onCurrencyChange:s})=>{const i=P.useRef(null),a=()=>{var u;(u=i.current)==null||u.click()},l=u=>{var y;const d=(y=u.target.files)==null?void 0:y[0];d&&(t(d),u.target.value="")},c=u=>{s(u.target.value)};return o.jsxs("div",{className:"card",children:[o.jsx("h2",{className:"text-2xl font-light mb-6",children:"Settings"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"settings-section",children:[o.jsx("div",{className:"flex-shrink-0",style:{color:"var(--primary)"},children:o.jsx(yt,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:"Currency"}),o.jsx("p",{className:"text-sm mb-3",style:{color:"var(--text-secondary)"},children:"Select your preferred currency for displaying amounts throughout the app."}),o.jsx("div",{className:"form-group mb-0",children:o.jsx("select",{value:r,onChange:c,className:"filter-select w-full max-w-xs",children:$o.map(u=>o.jsxs("option",{value:u.code,children:[u.symbol," ",u.name," (",u.code,")"]},u.code))})})]})]}),o.jsx("div",{style:{borderTop:"1px solid var(--border)",margin:"1.5rem 0"}}),o.jsx("h3",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)"},children:"Data Management"}),o.jsxs("div",{className:"settings-section settings-section-info",children:[o.jsx("div",{className:"flex-shrink-0",style:{color:"var(--accent)"},children:o.jsx(Or,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:"Export Data"}),o.jsx("p",{className:"text-sm mb-3",style:{color:"var(--text-secondary)"},children:"Download your financial data as a JSON file for backup or transfer to another device."}),o.jsxs("button",{onClick:e,className:"btn btn-primary text-sm",children:[o.jsx(Or,{className:"w-4 h-4"}),"Export Data"]})]})]}),o.jsxs("div",{className:"settings-section settings-section-success",children:[o.jsx("div",{className:"flex-shrink-0",style:{color:"var(--success)"},children:o.jsx(qc,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:"Import Data"}),o.jsx("p",{className:"text-sm mb-3",style:{color:"var(--text-secondary)"},children:"Restore your financial data from a previously exported JSON file. This will replace all current data."}),o.jsx("input",{ref:i,type:"file",accept:".json",onChange:l,className:"hidden"}),o.jsxs("button",{onClick:a,className:"btn btn-secondary text-sm",children:[o.jsx(qc,{className:"w-4 h-4"}),"Import Data"]})]})]}),o.jsxs("div",{className:"settings-section settings-section-danger",children:[o.jsx("div",{className:"flex-shrink-0",style:{color:"var(--danger)"},children:o.jsx(jo,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:"Clear All Data"}),o.jsx("p",{className:"text-sm mb-3",style:{color:"var(--text-secondary)"},children:"Permanently delete all transactions, goals, and balance data. This action cannot be undone."}),o.jsxs("button",{onClick:n,className:"btn btn-danger text-sm",children:[o.jsx(jo,{className:"w-4 h-4"}),"Clear All Data"]})]})]})]})]})},cf=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"biweekly",label:"Bi-weekly"},{value:"monthly",label:"Monthly"},{value:"quarterly",label:"Quarterly"},{value:"yearly",label:"Yearly"}],w0=(e,t)=>{const n=new Date(e);switch(t){case"daily":n.setDate(n.getDate()+1);break;case"weekly":n.setDate(n.getDate()+7);break;case"biweekly":n.setDate(n.getDate()+14);break;case"monthly":n.setMonth(n.getMonth()+1);break;case"quarterly":n.setMonth(n.getMonth()+3);break;case"yearly":n.setFullYear(n.getFullYear()+1);break}return n.toISOString().split("T")[0]},x0=e=>{const t=new Date;t.setHours(0,0,0,0);const n=new Date(e.nextDate);if(n.setHours(0,0,0,0),e.endDate){const r=new Date(e.endDate);if(r.setHours(0,0,0,0),t>r)return!1}return t>=n},_0=e=>{const t=[],n=[];return e.forEach(r=>{x0(r)?(t.push({id:Date.now()+Math.random(),type:r.type,amount:r.amount,description:r.description,category:r.category,date:r.nextDate,recurring:!0,recurringId:r.id,timestamp:Date.now()}),n.push({...r,nextDate:w0(r.nextDate,r.frequency),lastProcessed:new Date().toISOString()})):n.push(r)}),{newTransactions:t,updatedRecurring:n}},k0=e=>{const t=cf.find(n=>n.value===e);return t?t.label:e},Ls=({label:e,error:t,type:n="text",required:r=!1,helpText:s,icon:i,...a})=>o.jsxs("div",{className:"form-group",children:[e&&o.jsxs("label",{className:"flex items-center gap-2",children:[i&&o.jsx(i,{size:16}),e,r&&o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:n,className:`w-full ${t?"border-red-500 focus:border-red-500":""}`,...a}),t&&o.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-red-500",children:o.jsx(Wi,{size:18})})]}),t&&o.jsx("p",{className:"text-sm text-red-600 mt-1 flex items-center gap-1",children:t}),s&&!t&&o.jsx("p",{className:"text-sm text-slate-500 mt-1",children:s})]}),S0=e=>{const t=parseFloat(e);return isNaN(t)?"Please enter a valid number":t<=0?"Amount must be greater than 0":t>1e9?"Amount is too large":null},b0=(e,t=!1)=>t&&(!e||e.trim()==="")?"Description is required":e&&e.length>200?"Description is too long (max 200 characters)":null,j0=(e,t=!1)=>t&&!e?"Please select a category":null,E0=(e,t=!1)=>{if(!e)return"Date is required";const n=new Date(e),r=new Date;return r.setHours(0,0,0,0),!t&&n>r?"Date cannot be in the future":n<new Date("2000-01-01")?"Date is too far in the past":null};function N0({onSubmit:e,onCancel:t}){const[n,r]=P.useState({type:"expense",amount:"",description:"",category:"",frequency:"monthly",startDate:new Date().toISOString().split("T")[0],endDate:""}),[s,i]=P.useState({}),a=n.type==="expense"?Pl:of,l=()=>{const u={},d=S0(n.amount);d&&(u.amount=d);const y=b0(n.description,!0);y&&(u.description=y);const m=j0(n.category,!0);m&&(u.category=m);const g=E0(n.startDate,!0);if(g&&(u.startDate=g),n.endDate){const v=new Date(n.endDate),w=new Date(n.startDate);v<=w&&(u.endDate="End date must be after start date")}return i(u),Object.keys(u).length===0},c=u=>{if(u.preventDefault(),!l())return;const d=parseFloat(n.amount),y=n.startDate;e({type:n.type,amount:d,description:n.description,category:n.category,frequency:n.frequency,startDate:n.startDate,endDate:n.endDate||null,nextDate:y,active:!0})};return o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx(Zn,{className:"text-primary",size:28}),o.jsx("h2",{className:"text-2xl font-light",children:"Add Recurring Transaction"})]}),o.jsxs("form",{onSubmit:c,children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"block text-sm font-medium mb-3",children:"Type"}),o.jsxs("div",{className:"type-selector-grid",children:[o.jsxs("button",{type:"button",onClick:()=>r({...n,type:"income",category:""}),className:`type-button ${n.type==="income"?"type-button-income-active":"type-button-inactive"}`,children:[o.jsx(dn,{size:24}),o.jsx("span",{children:"Income"})]}),o.jsxs("button",{type:"button",onClick:()=>r({...n,type:"expense",category:""}),className:`type-button ${n.type==="expense"?"type-button-expense-active":"type-button-inactive"}`,children:[o.jsx(er,{size:24}),o.jsx("span",{children:"Expense"})]})]})]}),o.jsx(Ls,{label:"Amount",type:"number",step:"0.01",value:n.amount,onChange:u=>r({...n,amount:u.target.value}),placeholder:"0.00",required:!0,error:s.amount}),o.jsx(Ls,{label:"Description",type:"text",value:n.description,onChange:u=>r({...n,description:u.target.value}),placeholder:"e.g., Netflix Subscription, Monthly Salary",required:!0,error:s.description}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{children:["Category ",s.category&&o.jsx("span",{className:"text-red-500 text-sm ml-2",children:s.category})]}),o.jsxs("select",{value:n.category,onChange:u=>r({...n,category:u.target.value}),className:s.category?"border-red-500":"",children:[o.jsx("option",{value:"",children:"Select category"}),a.map(u=>o.jsx("option",{value:u,children:u},u))]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Frequency"}),o.jsx("select",{value:n.frequency,onChange:u=>r({...n,frequency:u.target.value}),children:cf.map(u=>o.jsx("option",{value:u.value,children:u.label},u.value))})]}),o.jsxs("div",{className:"grid grid-2 gap-4",children:[o.jsx(Ls,{label:"Start Date",type:"date",value:n.startDate,onChange:u=>r({...n,startDate:u.target.value}),required:!0,error:s.startDate,icon:Xn}),o.jsx(Ls,{label:"End Date (Optional)",type:"date",value:n.endDate,onChange:u=>r({...n,endDate:u.target.value}),error:s.endDate,helpText:"Leave empty for no end date",icon:Xn})]}),o.jsxs("div",{className:"form-actions",children:[o.jsxs("button",{type:"submit",className:"btn btn-primary",children:[o.jsx(Zn,{size:18}),"Create Recurring Transaction"]}),o.jsx("button",{type:"button",onClick:t,className:"btn",children:"Cancel"})]})]})]})}function C0({recurringTransactions:e,onDelete:t,onToggleActive:n,currency:r="USD"}){if(e.length===0)return o.jsxs("div",{className:"card",children:[o.jsx("h2",{className:"text-2xl font-light mb-6",children:"Recurring Transactions"}),o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[o.jsx("div",{className:"text-slate-400 mb-4",children:o.jsx(Zn,{size:48})}),o.jsx("p",{className:"text-slate-600",children:"No recurring transactions yet. Set up automatic income or expenses!"})]})]});const s=i=>new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Zn,{className:"text-primary",size:28}),o.jsx("h2",{className:"text-2xl font-light",children:"Recurring Transactions"})]}),o.jsxs("span",{className:"text-sm text-slate-600",children:[e.length," active"]})]}),o.jsx("div",{className:"space-y-3",children:e.map((i,a)=>{const l=Ji(i.category),c=l.icon,u=i.endDate&&new Date(i.endDate)<=new Date(Date.now()+7*24*60*60*1e3);return o.jsxs("div",{className:`transaction-item animate-slide-in ${i.active?"":"opacity-50"}`,style:{animationDelay:`${a*.05}s`},children:[o.jsxs("div",{className:"transaction-left",children:[o.jsx("div",{className:"transaction-icon",style:{backgroundColor:`${l.color}20`,color:l.color},children:o.jsx(c,{size:20})}),o.jsxs("div",{className:"transaction-details",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h4",{children:i.description}),o.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-0.5 rounded-full font-medium",children:k0(i.frequency)}),!i.active&&o.jsx("span",{className:"text-xs bg-slate-200 text-slate-600 px-2 py-0.5 rounded-full",children:"Paused"})]}),o.jsxs("div",{className:"transaction-meta",children:[o.jsxs("span",{children:[o.jsx(Xn,{size:12}),"Next: ",s(i.nextDate)]}),o.jsxs("span",{children:[o.jsx(Si,{size:12}),i.category]}),u&&i.endDate&&o.jsxs("span",{className:"text-amber-600",children:[o.jsx(Wi,{size:12}),"Ends ",s(i.endDate)]})]})]})]}),o.jsxs("div",{className:"transaction-right",children:[o.jsxs("span",{className:`transaction-amount ${i.type==="income"?"amount-income":"amount-expense"}`,children:[i.type==="income"?"+":"-",z(i.amount,r)]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>n(i.id),className:"btn-icon",title:i.active?"Pause":"Resume",children:i.active?o.jsx("span",{className:"text-amber-600",children:""}):o.jsx("span",{className:"text-green-600",children:""})}),o.jsx("button",{onClick:()=>t(i.id),className:"btn-icon",title:"Delete recurring transaction",children:o.jsx(sr,{})})]})]})]},i.id)})})]})}const T0=(e,t="transactions.csv")=>{if(e.length===0)return!1;const n=["Date","Type","Category","Description","Amount"],r=e.map(c=>[c.date,c.type,c.category,`"${c.description.replace(/"/g,'""')}"`,c.amount.toFixed(2)]),s=[n.join(","),...r.map(c=>c.join(","))].join(`
`),i=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),l=URL.createObjectURL(i);return a.setAttribute("href",l),a.setAttribute("download",t),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),!0},O0=(e,t="goals.csv")=>{if(e.length===0)return!1;const n=["Goal Name","Target Amount","Current Amount","Progress %"],r=e.map(c=>[`"${c.name.replace(/"/g,'""')}"`,c.target.toFixed(2),c.current.toFixed(2),(c.current/c.target*100).toFixed(2)]),s=[n.join(","),...r.map(c=>c.join(","))].join(`
`),i=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),l=URL.createObjectURL(i);return a.setAttribute("href",l),a.setAttribute("download",t),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),!0},R0=(e,t,n="budgets.csv")=>{const r=Object.entries(e);if(r.length===0)return!1;const s=["Category","Budget","Spent","Remaining","Usage %"],i=r.map(([d,y])=>{const m=t[d]||0,g=y-m,v=m/y*100;return[`"${d}"`,y.toFixed(2),m.toFixed(2),g.toFixed(2),v.toFixed(2)]}),a=[s.join(","),...i.map(d=>d.join(","))].join(`
`),l=new Blob([a],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a"),u=URL.createObjectURL(l);return c.setAttribute("href",u),c.setAttribute("download",n),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c),!0};function A0({transactions:e,goals:t,budgets:n,currentMonthSpending:r,currency:s="USD"}){const[i,a]=P.useState("month"),l=P.useMemo(()=>{const m=new Date,g=m.getFullYear(),v=m.getMonth(),w=Math.floor(v/3);return e.filter(x=>{const h=new Date(x.date),f=h.getFullYear(),p=h.getMonth(),_=Math.floor(p/3);switch(i){case"month":return f===g&&p===v;case"quarter":return f===g&&_===w;case"year":return f===g;case"all":default:return!0}})},[e,i]),c=P.useMemo(()=>{const m=l.filter(p=>p.type==="income").reduce((p,_)=>p+_.amount,0),g=l.filter(p=>p.type==="expense").reduce((p,_)=>p+_.amount,0),v=m-g,w=m>0?v/m*100:0,x={};l.filter(p=>p.type==="expense").forEach(p=>{x[p.category]=(x[p.category]||0)+p.amount});const h=Object.entries(x).sort(([,p],[,_])=>_-p).slice(0,5),f=g>0?g/l.filter(p=>p.type==="expense").length:0;return{income:m,expenses:g,savings:v,savingsRate:w,categoryBreakdown:x,topCategories:h,avgTransaction:f,transactionCount:l.length}},[l]),u=P.useMemo(()=>{const m=new Date,g=m.getMonth(),v=m.getFullYear(),w=g===0?11:g-1,x=g===0?v-1:v,h=e.filter(S=>{const j=new Date(S.date);return j.getMonth()===g&&j.getFullYear()===v}),f=e.filter(S=>{const j=new Date(S.date);return j.getMonth()===w&&j.getFullYear()===x}),p=h.filter(S=>S.type==="expense").reduce((S,j)=>S+j.amount,0),_=f.filter(S=>S.type==="expense").reduce((S,j)=>S+j.amount,0),E=_>0?(p-_)/_*100:0;return{thisMonth:p,lastMonth:_,change:E,isIncrease:E>0}},[e]),d=m=>{let g=!1;const v=new Date().toISOString().split("T")[0];switch(m){case"transactions":g=T0(l,`transactions-${v}.csv`);break;case"goals":g=O0(t,`goals-${v}.csv`);break;case"budgets":g=R0(n,r,`budgets-${v}.csv`);break}return g},y=()=>{switch(i){case"month":return"This Month";case"quarter":return"This Quarter";case"year":return"This Year";case"all":return"All Time";default:return""}};return o.jsxs("div",{children:[o.jsxs("div",{className:"card mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Lh,{className:"text-primary",size:28}),o.jsx("h2",{className:"text-2xl font-light",children:"Financial Reports"})]}),o.jsx("div",{className:"flex items-center gap-3",children:o.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[o.jsxs("select",{value:i,onChange:m=>a(m.target.value),className:"filter-select",style:{paddingRight:"2.5rem",minWidth:"150px",appearance:"none",WebkitAppearance:"none",MozAppearance:"none"},children:[o.jsx("option",{value:"month",children:"This Month"}),o.jsx("option",{value:"quarter",children:"This Quarter"}),o.jsx("option",{value:"year",children:"This Year"}),o.jsx("option",{value:"all",children:"All Time"})]}),o.jsx("div",{style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none",display:"flex",alignItems:"center",color:"var(--text-secondary)"},children:o.jsx(Ym,{size:16})})]})})]}),o.jsxs("div",{className:"flex gap-3 flex-wrap",children:[o.jsxs("button",{onClick:()=>d("transactions"),className:"btn btn-primary text-sm",disabled:l.length===0,children:[o.jsx(Or,{size:16}),"Export Transactions CSV"]}),o.jsxs("button",{onClick:()=>d("goals"),className:"btn text-sm",disabled:t.length===0,children:[o.jsx(Or,{size:16}),"Export Goals CSV"]}),o.jsxs("button",{onClick:()=>d("budgets"),className:"btn text-sm",disabled:Object.keys(n).length===0,children:[o.jsx(Or,{size:16}),"Export Budgets CSV"]})]})]}),o.jsxs("div",{className:"kpi-grid mb-6",children:[o.jsxs("div",{className:"kpi-card",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"kpi-icon-small icon-green",children:o.jsx(dn,{size:20})}),o.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-secondary)"},children:"Income"})]}),o.jsx("div",{className:"text-2xl font-bold",style:{color:"var(--success)"},children:z(c.income,s)}),o.jsx("div",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:y()})]}),o.jsxs("div",{className:"kpi-card",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"kpi-icon-small icon-red",children:o.jsx(er,{size:20})}),o.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-secondary)"},children:"Expenses"})]}),o.jsx("div",{className:"text-2xl font-bold",style:{color:"var(--danger)"},children:z(c.expenses,s)}),o.jsx("div",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:y()})]}),o.jsxs("div",{className:"kpi-card",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:`kpi-icon-small ${c.savings>=0?"icon-blue":"icon-red"}`,children:o.jsx(yt,{size:20})}),o.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-secondary)"},children:"Net Savings"})]}),o.jsx("div",{className:"text-2xl font-bold",style:{color:c.savings>=0?"var(--accent)":"var(--danger)"},children:z(Math.abs(c.savings),s)}),o.jsxs("div",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:[c.savingsRate.toFixed(1),"% savings rate"]})]})]}),o.jsxs("div",{className:"card mb-6",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Month-over-Month"}),o.jsxs("div",{className:"grid grid-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm mb-1",style:{color:"var(--text-secondary)"},children:"This Month"}),o.jsx("div",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:z(u.thisMonth,s)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Last Month"}),o.jsx("div",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:z(u.lastMonth,s)})]})]}),o.jsx("div",{className:"mt-4 p-4 rounded-lg",style:{background:u.isIncrease?"rgba(239, 68, 68, 0.1)":"rgba(16, 185, 129, 0.1)",border:`1px solid ${u.isIncrease?"rgba(239, 68, 68, 0.3)":"rgba(16, 185, 129, 0.3)"}`},children:o.jsxs("div",{className:"flex items-center gap-2",style:{color:u.isIncrease?"var(--danger)":"var(--success)"},children:[u.isIncrease?o.jsx(dn,{size:20}):o.jsx(er,{size:20}),o.jsxs("span",{className:"font-semibold",children:[Math.abs(u.change).toFixed(1),"% ",u.isIncrease?"increase":"decrease"]}),o.jsx("span",{className:"text-sm",children:"in spending from last month"})]})})]}),o.jsxs("div",{className:"grid grid-2 gap-6 mb-6",children:[o.jsx(lf,{spendingByCategory:c.categoryBreakdown,currency:s}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Top Spending Categories"}),c.topCategories.length===0?o.jsx("div",{className:"text-center py-12",style:{color:"var(--text-secondary)"},children:"No expenses in this period"}):o.jsx("div",{className:"space-y-4",children:c.topCategories.map(([m,g],v)=>{const w=g/c.expenses*100;return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"font-medium",style:{color:"var(--text-primary)"},children:m}),o.jsx("span",{className:"font-semibold",style:{color:"var(--text-primary)"},children:z(g,s)})]}),o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:"progress-fill",style:{width:`${w}%`}})}),o.jsxs("div",{className:"text-sm mt-1",style:{color:"var(--text-secondary)"},children:[w.toFixed(1),"% of total expenses"]})]},m)})})]})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Additional Insights"}),o.jsxs("div",{className:"grid grid-3 gap-6",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Average Transaction"}),o.jsx("div",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:z(c.avgTransaction,s)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Total Transactions"}),o.jsx("div",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:c.transactionCount})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Categories Used"}),o.jsx("div",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:Object.keys(c.categoryBreakdown).length})]})]})]})]})}function P0({onBack:e}){const[t,n]=P.useState("signin"),[r,s]=P.useState(""),[i,a]=P.useState(""),[l,c]=P.useState(""),[u,d]=P.useState(!1),[y,m]=P.useState(""),[g,v]=P.useState(""),{signIn:w,signUp:x,signInWithOAuth:h,resetPassword:f,isAuthenticated:p}=Gi();P.useEffect(()=>{p&&e&&e()},[p,e]);const _=async S=>{S.preventDefault(),m(""),v(""),d(!0);try{if(t==="signin"){const{error:j}=await w(r,i);if(j)throw j;e&&e()}else if(t==="signup"){const{error:j}=await x(r,i,{full_name:l});if(j)throw j;v("Check your email to confirm your account!")}else if(t==="reset"){const{error:j}=await f(r);if(j)throw j;v("Password reset email sent! Check your inbox."),setTimeout(()=>{n("signin"),v("")},3e3)}}catch(j){m(j.message||"An error occurred")}finally{d(!1)}},E=async S=>{m(""),d(!0);try{const{error:j}=await h(S);if(j)throw j}catch(j){m(j.message||"OAuth sign in failed"),d(!1)}};return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%)"},children:[o.jsxs("div",{style:{width:"100%",maxWidth:"450px",background:"var(--card-bg)",borderRadius:"1rem",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.5)",border:"1px solid var(--border-light)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"2rem 2rem 1rem 2rem",borderBottom:"1px solid var(--border)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"3rem",height:"3rem",background:"linear-gradient(135deg, #10b981 0%, #06b6d4 100%)",borderRadius:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.4)"},children:o.jsx(yt,{size:24})}),o.jsxs("div",{children:[o.jsxs("h2",{style:{color:"var(--text-primary)",marginBottom:"0.25rem",fontSize:"1.5rem"},children:[t==="signin"&&"Welcome Back",t==="signup"&&"Create Account",t==="reset"&&"Reset Password"]}),o.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.875rem"},children:"Financial Tracker"})]})]}),e&&o.jsx("button",{onClick:e,className:"btn-icon",style:{color:"var(--text-secondary)"},title:"Back to dashboard",children:o.jsx(Wm,{size:20})})]}),o.jsxs("div",{style:{padding:"2rem"},children:[y&&o.jsx("div",{style:{padding:"1rem",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"0.5rem",color:"var(--danger)",marginBottom:"1rem",fontSize:"0.875rem"},children:y}),g&&o.jsx("div",{style:{padding:"1rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"0.5rem",color:"var(--success)",marginBottom:"1rem",fontSize:"0.875rem"},children:g}),o.jsxs("form",{onSubmit:_,children:[t==="signup"&&o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Full Name"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx("input",{type:"text",value:l,onChange:S=>c(S.target.value),placeholder:"John Doe",required:!0,style:{paddingLeft:"2.75rem"}}),o.jsx(wg,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)",pointerEvents:"none"}})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Email"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx("input",{type:"email",value:r,onChange:S=>s(S.target.value),placeholder:"you@example.com",required:!0,style:{paddingLeft:"2.75rem"}}),o.jsx(ug,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)",pointerEvents:"none"}})]})]}),t!=="reset"&&o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Password"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx("input",{type:"password",value:i,onChange:S=>a(S.target.value),placeholder:"",required:!0,minLength:6,style:{paddingLeft:"2.75rem"}}),o.jsx(og,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)",pointerEvents:"none"}})]})]}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:u,style:{width:"100%",marginTop:"1rem"},children:u?o.jsxs(o.Fragment,{children:[o.jsx(zh,{size:16,className:"animate-spin"}),"Loading..."]}):o.jsxs(o.Fragment,{children:[t==="signin"&&"Sign In",t==="signup"&&"Create Account",t==="reset"&&"Send Reset Email"]})})]}),t!=="reset"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",margin:"1.5rem 0"},children:[o.jsx("div",{style:{flex:1,height:"1px",background:"var(--border)"}}),o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.875rem"},children:"or continue with"}),o.jsx("div",{style:{flex:1,height:"1px",background:"var(--border)"}})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[o.jsxs("button",{onClick:()=>E("google"),className:"btn",disabled:u,style:{flex:1},children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[o.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),o.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),o.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),o.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),o.jsxs("button",{onClick:()=>E("github"),className:"btn",disabled:u,style:{flex:1},children:[o.jsx(rg,{size:18}),"GitHub"]})]})]}),o.jsxs("div",{style:{marginTop:"1.5rem",textAlign:"center",fontSize:"0.875rem",color:"var(--text-secondary)"},children:[t==="signin"&&o.jsxs(o.Fragment,{children:[o.jsxs("p",{children:["Don't have an account?"," ",o.jsx("button",{onClick:()=>n("signup"),style:{background:"none",border:"none",color:"var(--primary)",cursor:"pointer",fontWeight:600},children:"Sign up"})]}),o.jsx("p",{style:{marginTop:"0.5rem"},children:o.jsx("button",{onClick:()=>n("reset"),style:{background:"none",border:"none",color:"var(--text-secondary)",cursor:"pointer",textDecoration:"underline"},children:"Forgot password?"})})]}),t==="signup"&&o.jsxs("p",{children:["Already have an account?"," ",o.jsx("button",{onClick:()=>n("signin"),style:{background:"none",border:"none",color:"var(--primary)",cursor:"pointer",fontWeight:600},children:"Sign in"})]}),t==="reset"&&o.jsxs("p",{children:["Remember your password?"," ",o.jsx("button",{onClick:()=>n("signin"),style:{background:"none",border:"none",color:"var(--primary)",cursor:"pointer",fontWeight:600},children:"Sign in"})]})]})]})]}),o.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        .animate-spin {
          animation: spin 1s linear infinite;
        }
      `})]})}const xu=({message:e,type:t="info",onClose:n,duration:r=4e3})=>{P.useEffect(()=>{if(r>0){const d=setTimeout(n,r);return()=>clearTimeout(d)}},[r,n]);const s={success:{icon:Gm,bgColor:"bg-green-50",borderColor:"border-green-200",iconColor:"text-green-600",textColor:"text-green-900"},error:{icon:_g,bgColor:"bg-red-50",borderColor:"border-red-200",iconColor:"text-red-600",textColor:"text-red-900"},warning:{icon:Wi,bgColor:"bg-amber-50",borderColor:"border-amber-200",iconColor:"text-amber-600",textColor:"text-amber-900"},info:{icon:ag,bgColor:"bg-blue-50",borderColor:"border-blue-200",iconColor:"text-blue-600",textColor:"text-blue-900"}},{icon:i,bgColor:a,borderColor:l,iconColor:c,textColor:u}=s[t]||s.info;return o.jsx("div",{className:`fixed top-20 right-4 z-50 ${a} border-2 ${l} rounded-lg shadow-lg p-4 min-w-80 max-w-md animate-slide-in`,role:"alert",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:c,children:o.jsx(i,{size:24})}),o.jsx("div",{className:"flex-1",children:o.jsx("p",{className:`text-sm font-medium ${u}`,children:e})}),o.jsx("button",{onClick:n,className:`${u} hover:opacity-70 transition-opacity`,children:o.jsx(sr,{size:20})})]})})},I0=({size:e="md",text:t=""})=>{const n={sm:16,md:24,lg:32,xl:48};return o.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[o.jsx(zh,{size:n[e],className:"animate-spin text-primary"}),t&&o.jsx("p",{className:"text-sm text-slate-600",children:t})]})},Us="finance-dashboard-data",_u="finance-dashboard-settings",Le={getData:()=>{try{const e=localStorage.getItem(Us);return e?JSON.parse(e):{balance:0,transactions:[],goals:[],budgets:{},recurringTransactions:[]}}catch(e){return console.error("Error loading data:",e),{balance:0,transactions:[],goals:[],budgets:{},recurringTransactions:[]}}},saveData:e=>{try{return localStorage.setItem(Us,JSON.stringify(e)),!0}catch(t){return console.error("Error saving data:",t),!1}},getSettings:()=>{try{const e=localStorage.getItem(_u);return e?JSON.parse(e):{currency:"USD",theme:"light"}}catch(e){return console.error("Error loading settings:",e),{currency:"USD",theme:"light"}}},saveSettings:e=>{try{return localStorage.setItem(_u,JSON.stringify(e)),!0}catch(t){return console.error("Error saving settings:",t),!1}},clearData:()=>{try{return localStorage.removeItem(Us),!0}catch(e){return console.error("Error clearing data:",e),!1}},exportData:()=>{try{const e=Le.getData(),t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),s=document.createElement("a");return s.href=r,s.download=`financial-tracker-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r),!0}catch(e){return console.error("Error exporting data:",e),!1}},importData:e=>new Promise((t,n)=>{const r=new FileReader;r.onload=s=>{try{const i=JSON.parse(s.target.result);if(!i.hasOwnProperty("balance")||!Array.isArray(i.transactions)||!Array.isArray(i.goals))throw new Error("Invalid data format");i.budgets||(i.budgets={}),i.recurringTransactions||(i.recurringTransactions=[]),Le.saveData(i),t(i)}catch(i){n(i)}},r.onerror=()=>n(new Error("Failed to read file")),r.readAsText(e)}),getStorageSize:()=>{try{const e=localStorage.getItem(Us);return e?new Blob([e]).size:0}catch(e){return console.error("Error getting storage size:",e),0}}},uf="financial-tracker-theme",D0=()=>{const e=localStorage.getItem(uf);return e||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},$0=e=>{localStorage.setItem(uf,e)},ku=e=>{e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};function L0(){const{isConfigured:e}=Gi(),[t,n]=P.useState({balance:0,transactions:[],goals:[],budgets:{},recurringTransactions:[]}),[r,s]=P.useState("USD"),[i,a]=P.useState("light"),[l,c]=P.useState("dashboard"),[u,d]=P.useState(!0),[y,m]=P.useState(null),g=(k,b="info")=>{m({message:k,type:b})};P.useEffect(()=>{try{const k=Le.getData();k.budgets||(k.budgets={}),k.recurringTransactions||(k.recurringTransactions=[]),n(k);const b=Le.getSettings();s(b.currency||"USD");const C=b.theme||D0();a(C),ku(C),d(!1)}catch(k){console.error("Failed to load data:",k),g("Failed to load data. Starting fresh.","error"),d(!1)}},[]),P.useEffect(()=>{if(u||t.recurringTransactions.length===0)return;const k=()=>{const{newTransactions:C,updatedRecurring:L}=_0(t.recurringTransactions.filter($=>$.active));if(C.length>0){let $=t.balance;C.forEach(ee=>{ee.type==="income"?$+=ee.amount:$-=ee.amount});const ke={...t,balance:$,transactions:[...C,...t.transactions],recurringTransactions:L};v(ke),g(`${C.length} recurring transaction${C.length>1?"s":""} processed!`,"success")}};k();const b=setInterval(k,60*60*1e3);return()=>clearInterval(b)},[u,t.recurringTransactions]);const v=k=>{try{n(k);const b=Le.saveData(k);return b||g("Failed to save data. Please try again.","error"),b}catch(b){return console.error("Error saving data:",b),g("Error saving data. Please try again.","error"),!1}},w=k=>{try{s(k);const b=Le.getSettings();Le.saveSettings({...b,currency:k})?g("Currency updated successfully!","success"):g("Failed to save currency setting.","error")}catch(b){console.error("Error updating currency:",b),g("Failed to update currency. Please try again.","error")}},x=()=>{const k=i==="light"?"dark":"light";a(k),ku(k),$0(k);const b=Le.getSettings();Le.saveSettings({...b,theme:k}),g(`Switched to ${k} mode`,"info")},h=k=>{try{const b={id:Date.now(),...k,timestamp:Date.now()},C=k.type==="income"?t.balance+k.amount:t.balance-k.amount;v({...t,balance:C,transactions:[b,...t.transactions]})&&(g(`${k.type==="income"?"Income":"Expense"} added successfully!`,"success"),c("dashboard"))}catch(b){console.error("Error adding transaction:",b),g("Failed to add transaction. Please try again.","error")}},f=k=>{if(confirm("Are you sure you want to delete this transaction?"))try{const b=t.transactions.find($=>$.id===k);if(!b){g("Transaction not found.","error");return}const C=b.type==="income"?t.balance-b.amount:t.balance+b.amount;v({...t,balance:C,transactions:t.transactions.filter($=>$.id!==k)})&&g("Transaction deleted successfully!","success")}catch(b){console.error("Error deleting transaction:",b),g("Failed to delete transaction. Please try again.","error")}},p=k=>{try{const b={id:Date.now(),...k,createdAt:Date.now()};v({...t,recurringTransactions:[...t.recurringTransactions,b]})&&(g("Recurring transaction created successfully!","success"),c("dashboard"))}catch(b){console.error("Error adding recurring transaction:",b),g("Failed to add recurring transaction. Please try again.","error")}},_=k=>{if(confirm("Are you sure you want to delete this recurring transaction?"))try{v({...t,recurringTransactions:t.recurringTransactions.filter(C=>C.id!==k)})&&g("Recurring transaction deleted successfully!","success")}catch(b){console.error("Error deleting recurring transaction:",b),g("Failed to delete recurring transaction. Please try again.","error")}},E=k=>{try{const b=t.recurringTransactions.map(L=>L.id===k?{...L,active:!L.active}:L);if(v({...t,recurringTransactions:b})){const L=b.find($=>$.id===k);g(`Recurring transaction ${L.active?"resumed":"paused"}!`,"success")}}catch(b){console.error("Error toggling recurring transaction:",b),g("Failed to update recurring transaction. Please try again.","error")}},S=k=>{try{const b={id:Date.now(),...k};v({...t,goals:[...t.goals,b]})&&(g("Savings goal created successfully!","success"),c("dashboard"))}catch(b){console.error("Error adding goal:",b),g("Failed to add goal. Please try again.","error")}},j=(k,b)=>{try{const C=t.goals.map($=>$.id===k?{...$,current:b}:$);v({...t,goals:C})&&g("Goal progress updated!","success")}catch(C){console.error("Error updating goal:",C),g("Failed to update goal. Please try again.","error")}},O=k=>{if(confirm("Are you sure you want to delete this goal?"))try{v({...t,goals:t.goals.filter(C=>C.id!==k)})&&g("Goal deleted successfully!","success")}catch(b){console.error("Error deleting goal:",b),g("Failed to delete goal. Please try again.","error")}},F=k=>{try{v({...t,budgets:k})&&g("Budgets updated successfully!","success")}catch(b){console.error("Error updating budgets:",b),g("Failed to update budgets. Please try again.","error")}},U=()=>{try{Le.exportData()?g("Data exported successfully!","success"):g("Failed to export data.","error")}catch(k){console.error("Error exporting data:",k),g("Failed to export data. Please try again.","error")}},Ce=async k=>{try{const b=await Le.importData(k);b.budgets||(b.budgets={}),b.recurringTransactions||(b.recurringTransactions=[]),n(b),g("Data imported successfully!","success"),c("dashboard")}catch(b){console.error("Error importing data:",b),g("Failed to import data. Please check the file format.","error")}},Wt=()=>{if(confirm("Are you sure you want to clear ALL data? This cannot be undone!"))try{Le.clearData()?(n({balance:0,transactions:[],goals:[],budgets:{},recurringTransactions:[]}),g("All data cleared successfully!","warning"),c("dashboard")):g("Failed to clear data.","error")}catch(k){console.error("Error clearing data:",k),g("Failed to clear data. Please try again.","error")}},Ht=()=>{const k=new Date,b=k.getMonth(),C=k.getFullYear(),L=t.transactions.filter(ee=>{const et=new Date(ee.date);return et.getMonth()===b&&et.getFullYear()===C}),$=L.filter(ee=>ee.type==="income").reduce((ee,et)=>ee+et.amount,0),ke=L.filter(ee=>ee.type==="expense").reduce((ee,et)=>ee+et.amount,0);return{monthlyIncome:$,monthlyExpenses:ke}},ds=()=>{const k=new Date,b=k.getMonth(),C=k.getFullYear(),L={};return t.transactions.filter($=>{const ke=new Date($.date);return $.type==="expense"&&ke.getMonth()===b&&ke.getFullYear()===C}).forEach($=>{const ke=$.category||"Other";L[ke]=(L[ke]||0)+$.amount}),L},{monthlyIncome:Yi,monthlyExpenses:ar}=Ht(),pn=ds();return u?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx(I0,{size:"xl",text:"Loading your finances..."})}):e&&l==="auth"?o.jsxs(Kc,{children:[y&&o.jsx(xu,{message:y.message,type:y.type,onClose:()=>m(null)}),o.jsx(P0,{onBack:()=>c("dashboard")})]}):o.jsx(Kc,{children:o.jsxs("div",{className:"min-h-screen",children:[y&&o.jsx(xu,{message:y.message,type:y.type,onClose:()=>m(null)}),o.jsx(i0,{view:l,setView:c,isDarkMode:i==="dark",onToggleDarkMode:x}),o.jsxs("div",{className:"container",children:[l==="dashboard"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"kpi-section",children:o.jsx(o0,{balance:t.balance,monthlyIncome:Yi,monthlyExpenses:ar,currency:r})}),Object.keys(t.budgets).length>0&&o.jsx(g0,{budgets:t.budgets,currentMonthSpending:pn,currency:r}),o.jsx(y0,{transactions:t.transactions,currency:r}),t.recurringTransactions.length>0&&o.jsx(C0,{recurringTransactions:t.recurringTransactions,onDelete:_,onToggleActive:E,currency:r}),o.jsx(l0,{goals:t.goals,onUpdateGoal:j,onDeleteGoal:O,currency:r}),o.jsx(c0,{transactions:t.transactions,onDeleteTransaction:f,onViewAll:()=>c("transactions"),currency:r})]}),l==="transactions"&&o.jsx(u0,{transactions:t.transactions,onDeleteTransaction:f,currency:r}),l==="budget"&&o.jsx(m0,{transactions:t.transactions,budgets:t.budgets,onUpdateBudgets:F,currency:r}),l==="reports"&&o.jsx(A0,{transactions:t.transactions,goals:t.goals,budgets:t.budgets,currentMonthSpending:pn,currency:r}),l==="add-transaction"&&o.jsx(d0,{onSubmit:h,onCancel:()=>c("dashboard")}),l==="add-goal"&&o.jsx(h0,{onSubmit:S,onCancel:()=>c("dashboard")}),l==="add-recurring"&&o.jsx(N0,{onSubmit:p,onCancel:()=>c("dashboard")}),l==="settings"&&o.jsx(v0,{onExport:U,onImport:Ce,onClearAll:Wt,currency:r,onCurrencyChange:w})]})]})})}Oa.createRoot(document.getElementById("root")).render(o.jsx(Pu.StrictMode,{children:o.jsx(n0,{children:o.jsx(L0,{})})}));
